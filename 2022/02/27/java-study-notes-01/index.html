<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>AmiaaaZ's Site | Java学习笔记Ⅰ</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.104.3"><meta name=ROBOTS content="INDEX, FOLLOW"><link href=/dist/app.css rel=stylesheet><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-203328343-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<link rel=stylesheet href=https://amiaaaz.github.io/lib/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://amiaaaz.github.io/lib/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script>
<script defer src=https://amiaaaz.github.io/lib/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("https://amiaaaz.github.io/lib/pangu.min.js",function(){pangu.spacingPage()})</script><style type=text/css media="screen, print">@font-face{font-family:fancytitlefont;font-style:normal;font-display:swap;src:url(%25!s%28%3cnil%3e%29.woff2)format('woff2'),url(%25!s%28%3cnil%3e%29.woff)format('woff')}@font-face{font-family:noto serif cjk sc;font-style:normal;font-weight:300;font-display:swap;src:local('Noto Serif CJK SC Light'),local('NotoSerifCJK-Light'),url(https://amiaaaz.github.io/fonts/noto-serif-sc-v7-latin_chinese-simplified-300.woff2)format('woff2'),url(https://amiaaaz.github.io/fonts/noto-serif-sc-v7-latin_chinese-simplified-300.woff)format('woff')}@font-face{font-family:noto serif cjk sc;font-style:normal;font-weight:400;font-display:swap;src:local('Noto Serif CJK SC'),local('NotoSerifCJK-Regular'),url(https://amiaaaz.github.io/fonts/noto-serif-sc-v7-latin_chinese-simplified-regular.woff2)format('woff2'),url(https://amiaaaz.github.io/fonts/noto-serif-sc-v7-latin_chinese-simplified-regular.woff)format('woff')}@font-face{font-family:noto serif cjk sc;font-style:normal;font-weight:500;font-display:swap;src:local('Noto Serif CJK SC Medium'),local('NotoSerifCJK-Medium'),url(https://amiaaaz.github.io/fonts/noto-serif-sc-v7-latin_chinese-simplified-500.woff2)format('woff2'),url(https://amiaaaz.github.io/fonts/noto-serif-sc-v7-latin_chinese-simplified-500.woff)format('woff')}</style></head><body class="bg-gray-100 text-gray-700 font-sans"><div class="p-6 sm:p-10 md:p-16 flex flex-wrap"><header class="w-full md:w-2/5 xl:w-1/2 md:pr-12 lg:pr-20 xl:pr-24 order-1 md:order-1 max-w-2xl"><div class="z-50 bg-gray-100 bg-opacity-75 bg-opacity-custom lg:min-w-0.7 max-w-xl md:float-right md:text-right leading-loose tracking-tight md:sticky md:top-0 pt-2"><div><h2><a href=https://amiaaaz.github.io/ title="AmiaaaZ's Site" class="heading font-cursive icon">AmiaaaZ's Site</a></h2></div><h1 class=pt-2>Java学习笔记Ⅰ</h1><h3 class="text-java-700 font-normal leading-relaxed pt-2">记录向，6小时速通Java基础(上)</h3><div class="flex flex-wrap justify-end pt-2"><div class="md:flex-grow-0 font-light"><a class="post-taxonomy-category text-medium-red-violet-600 hover:text-medium-red-violet-400" href=/categories/notessummary>NOTES&SUMMARY</a>
&nbsp;&nbsp;
<a class="post-taxonomy-tag text-eucalyptus-500" href=/tags/java>Java</a></div><time class="text-eucalyptus-500 md:text-right md:flex-grow font-light pl-4" datetime=2022-02-27T01:28:17+08:00>2022-2-27 01:28</time></div><details class=toc open><summary><hr></summary><div class="inline toc-content"><nav id=TableOfContents><ul><li><a href=#java基础>Java基础</a><ul><li><a href=#java程序结构>java程序结构</a></li><li><a href=#classpathjar>classpath&jar</a></li><li><a href=#模块>模块</a></li><li><a href=#javabean>JavaBean</a></li></ul></li><li><a href=#语法基础>语法基础</a><ul><li><a href=#变量数据类型>变量&数据类型</a></li><li><a href=#运算>运算</a></li><li><a href=#字符字符串>字符&字符串</a></li><li><a href=#数组>数组</a></li><li><a href=#流程控制>流程控制</a></li></ul></li><li><a href=#oop基础>OOP基础</a><ul><li><a href=#类实例>类&实例</a></li><li><a href=#方法>方法</a></li><li><a href=#继承多态>继承&多态</a></li><li><a href=#抽象类接口>抽象类&接口</a></li><li><a href=#静态字段静态方法>静态字段&静态方法</a></li><li><a href=#包>包</a></li><li><a href=#内部类>内部类</a></li></ul></li><li><a href=#java核心类部分>Java核心类(部分)</a><ul><li><a href=#stringbuilder>StringBuilder</a></li><li><a href=#enum>enum</a></li><li><a href=#record>record</a></li></ul></li><li><a href=#异常处理>异常处理</a><ul><li><a href=#异常捕获异常>异常&捕获异常</a></li><li><a href=#抛出异常>抛出异常</a></li><li><a href=#自定义异常>自定义异常</a></li><li><a href=#断言>断言</a></li></ul></li><li><a href=#日志>日志</a><ul><li><a href=#jdk-logging>JDK Logging</a></li><li><a href=#commons-logging>Commons Logging</a></li><li><a href=#log4j>Log4j</a></li><li><a href=#slf4jlogback>SLF4J&Logback</a></li></ul></li></ul></nav></div></details><hr></div></header><main role=main class="w-full md:w-3/5 xl:w-1/2 max-w-3xl order-2 md:order-2 min-h-70vh pt-2 pb-4"><article><section class="mx-auto content"><div class=c-rich-text><p>ctf里有几类题我是见到之后拔腿就跑，比如java和xss，对于后者，最近杂七杂八的学了很多js和前端的知识 没那么发怵了，而前者……不多说了，学学学！</p><p>本篇学习内容来自于<a href=https://www.liaoxuefeng.com/wiki/1252599548343744>廖雪峰Java教程</a>，个人感觉比较适合对其它语言也有一点掌握的人</p><p>本机win10，为了兼容一些程序暂时有java8和11两个版；ide使用idea</p><p><img src=https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220226170711379.png alt=image-20220226170711379></p><hr><h2 id=java基础>Java基础</h2><h3 id=java程序结构>java程序结构</h3><ul><li>src/xxx.java，类名为文件名，main为入口（idea直接输main会自动补全），idea格式化代码ctrl+shift+F</li><li>类class习惯大写字母开头，方法method习惯小写字母开头，必须带分号（不同于js可有可无）</li></ul><h3 id=classpathjar>classpath&jar</h3><ul><li><code>classpath</code>是JVM的环境变量，是一组目录的集合（分隔符由系统定</li><li>推荐在启动JVM时设置<code>classpath</code>变量，不要污染系统环境（可以放心的交给idea</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>java -classpath .<span style=color:#111>;</span>C:<span style=color:#8045ff>\w</span>ork<span style=color:#8045ff>\p</span>roject1<span style=color:#8045ff>\b</span>in<span style=color:#111>;</span>C:<span style=color:#8045ff>\s</span>hared abc.xyz.Hello
</span></span><span style=display:flex><span>java -cp .<span style=color:#111>;</span>C:<span style=color:#8045ff>\w</span>ork<span style=color:#8045ff>\p</span>roject1<span style=color:#8045ff>\b</span>in<span style=color:#111>;</span>C:<span style=color:#8045ff>\s</span>hared abc.xyz.Hello
</span></span></code></pre></div><ul><li><p>不要把任何Java核心库添加到classpath中！默认的当前目录<code>.</code>对于绝大多数情况都够用</p></li><li><p>jar包实际上就是一个zip格式的压缩文件，包含<code>package</code>组织的目录层级，以及各个目录下的所有文件（包括<code>.class</code>文件和其他文件），注意不含<code>bin</code>目录（注意层级）</p></li><li><p>可以把jar理解为n多个class文件的容器，JVM自带的Java标准库rt.jar也是以jar形式进行存放</p></li><li><p>jar不关心class之间的依赖，如果漏掉的话在运行期极有可能抛出<code>ClassNotFoundException</code></p></li><li><p>如果我们要执行一个jar包的<code>class</code>，就可以把jar包放到<code>classpath</code>中</p></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>java -cp ./hello.jar abc.xyz.Hello
</span></span></code></pre></div><ul><li><code>MANIFEST.MF</code>文件可以提供jar包的信息，如<code>Main-Class</code></li><li>分析题目中给出jar包时我一般直接改zip解压，用idea打开整个目录作为项目（idea yyds</li></ul><h3 id=模块>模块</h3><ul><li>Java9后引入，解决依赖问题，控制jar之间的相互调用</li><li>把一堆class封装为jar仅仅是一个打包的过程，而把一堆class封装为模块则不但需要打包，还需要写入依赖关系，并且还可以包含二进制代码（通常是JNI扩展）</li><li>以java的标准库rt.jar为例，被拆为</li></ul><pre tabindex=0><code>java.base.jmod
java.compiler.jmod
java.datatransfer.jmod
java.desktop.jmod
...
</code></pre><p>以<code>.jmod</code>为拓展名标识，每个文件都是一个模块，模块<code>java.base</code>对应的文件就是<code>java.base.jmod</code></p><ul><li>模块之间的依赖关系已经被写入到模块内的<code>module-info.class</code>文件了。所有的模块都直接或间接地依赖<code>java.base</code>模块，只有<code>java.base</code>模块不依赖任何模块，它可以被看作是根模块，好比所有的类都是从<code>Object</code>直接或间接继承而来</li></ul><p>编写模块的部分暂略。</p><h3 id=javabean>JavaBean</h3><p>指的是符合某种规范的一种编程模式或编程思想（个人理解</p><p>部分Python爱好者也喜欢这么写，可拓展性强，就是很臃肿</p><ul><li>写方法<code>setter</code>，读方法<code>getter</code>，只有其中一种属性之一的被称为只写/读属性——满足这样规范的class被称为JavaBean</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 读方法:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>public</span> <span style=color:#111>Type</span> <span style=color:#75af00>getXyz</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 写方法:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>setXyz</span><span style=color:#f92672>(</span><span style=color:#111>Type</span> <span style=color:#111>value</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><ul><li>要枚举一个JavaBean的所有属性，可以直接使用Java核心库提供的<code>Introspector</code></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.beans.*</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#00a8c8>throws</span> <span style=color:#111>Exception</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>BeanInfo</span> <span style=color:#111>info</span> <span style=color:#f92672>=</span> <span style=color:#111>Introspector</span><span style=color:#f92672>.</span><span style=color:#75af00>getBeanInfo</span><span style=color:#f92672>(</span><span style=color:#111>Person</span><span style=color:#f92672>.</span><span style=color:#75af00>class</span><span style=color:#f92672>);</span>	<span style=color:#75715e>// 获取属性列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>for</span> <span style=color:#f92672>(</span><span style=color:#111>PropertyDescriptor</span> <span style=color:#111>pd</span> <span style=color:#f92672>:</span> <span style=color:#111>info</span><span style=color:#f92672>.</span><span style=color:#75af00>getPropertyDescriptors</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#75af00>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;  &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#75af00>getReadMethod</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;  &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#75af00>getWriteMethod</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>int</span> <span style=color:#111>age</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#111>String</span> <span style=color:#75af00>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>setName</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#75af00>getAge</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#111>age</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>setAge</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>age</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>age</span> <span style=color:#f92672>=</span> <span style=color:#111>age</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=语法基础>语法基础</h2><h3 id=变量数据类型>变量&数据类型</h3><ul><li>类似c的赋值风格：<code>类型 变量名 = 变量值</code>（不同于go）</li><li>程序设计的一个重要原则：数据的存储和显示要分离</li><li>执行<code>int x = n</code>这样的变量赋值时，相当于两步操作，x与n是不同的存储单元</li><li>基本类型有<code>byte</code>, <code>int</code>, <code>short</code>, <code>long</code>, <code>float</code>, <code>double</code>, <code>boolean</code>, <code>char</code>（表示ascii或一个Unicode字符），不可赋值null</li><li>引用类型为所有class和interface类型，可赋值为null表示空</li><li>使用对应的Wrapper Class包装类可以将基本类型视为引用类型(class)，好处是可以使用大量的实用方法</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>int</span> <span style=color:#111>i</span> <span style=color:#f92672>=</span> <span style=color:#111>100</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 通过new操作符创建Integer实例(不推荐使用,会有编译警告):
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>Integer</span> <span style=color:#111>n1</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Integer</span><span style=color:#f92672>(</span><span style=color:#111>i</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 通过静态方法valueOf(int)创建Integer实例:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>Integer</span> <span style=color:#111>n2</span> <span style=color:#f92672>=</span> <span style=color:#111>Integer</span><span style=color:#f92672>.</span><span style=color:#75af00>valueOf</span><span style=color:#f92672>(</span><span style=color:#111>i</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 通过静态方法valueOf(String)创建Integer实例:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>Integer</span> <span style=color:#111>n3</span> <span style=color:#f92672>=</span> <span style=color:#111>Integer</span><span style=color:#f92672>.</span><span style=color:#75af00>valueOf</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;100&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>n3</span><span style=color:#f92672>.</span><span style=color:#75af00>intValue</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>每种基本类型都有其包装类型</li></ul><table><thead><tr><th style=text-align:left>基本类型</th><th style=text-align:left>对应的引用类型</th></tr></thead><tbody><tr><td style=text-align:left>boolean</td><td style=text-align:left>java.lang.Boolean</td></tr><tr><td style=text-align:left>byte</td><td style=text-align:left>java.lang.Byte</td></tr><tr><td style=text-align:left>short</td><td style=text-align:left>java.lang.Short</td></tr><tr><td style=text-align:left>int</td><td style=text-align:left>java.lang.Integer</td></tr><tr><td style=text-align:left>long</td><td style=text-align:left>java.lang.Long</td></tr><tr><td style=text-align:left>float</td><td style=text-align:left>java.lang.Float</td></tr><tr><td style=text-align:left>double</td><td style=text-align:left>java.lang.Double</td></tr><tr><td style=text-align:left>char</td><td style=text-align:left>java.lang.Character</td></tr></tbody></table><ul><li>所有的整数和浮点数的包装类型都继承自<code>Number</code>，因此，可以非常方便地直接通过包装类型获取各种基本类型</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 向上转型为Number:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#111>Number</span> <span style=color:#111>num</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Integer</span><span style=color:#f92672>(</span><span style=color:#111>999</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取byte, int, long, float, double:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>byte</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>num</span><span style=color:#f92672>.</span><span style=color:#75af00>byteValue</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>int</span> <span style=color:#111>n</span> <span style=color:#f92672>=</span> <span style=color:#111>num</span><span style=color:#f92672>.</span><span style=color:#75af00>intValue</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>long</span> <span style=color:#111>ln</span> <span style=color:#f92672>=</span> <span style=color:#111>num</span><span style=color:#f92672>.</span><span style=color:#75af00>longValue</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>float</span> <span style=color:#111>f</span> <span style=color:#f92672>=</span> <span style=color:#111>num</span><span style=color:#f92672>.</span><span style=color:#75af00>floatValue</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>double</span> <span style=color:#111>d</span> <span style=color:#f92672>=</span> <span style=color:#111>num</span><span style=color:#f92672>.</span><span style=color:#75af00>doubleValue</span><span style=color:#f92672>();</span>
</span></span></code></pre></div><ul><li><p>由于java中并不存在无符号整型这一说，全部都是有整型的，需要通过包装类型的静态方法来完成，比如<code>Byte.toUnsignedInt()</code></p></li><li><p><code>int</code>和对应的<code>Integer</code>可以互相转化，甚至直接使用</p></li></ul><pre tabindex=0><code>Integer n = 100; // 编译器自动使用Integer.valueOf(int)
int x = n; // 编译器自动使用Integer.intValue()
</code></pre><p>这种直接把<code>int</code>变为<code>Integer</code>的赋值写法，称为自动装箱（Auto Boxing）；反过来，把<code>Integer</code>变为<code>int</code>的赋值写法，称为自动拆箱（Auto Unboxing）</p><p>注意：自动装箱和自动拆箱只发生在编译阶段，目的是为了少写代码。</p><p>装箱和拆箱会影响代码的执行效率，因为编译后的<code>class</code>代码是严格区分基本类型和引用类型的。并且，自动拆箱执行时可能会报<code>NullPointerException</code>（两种类型对null的容忍度不同</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Integer</span> <span style=color:#111>n</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>int</span> <span style=color:#111>i</span> <span style=color:#f92672>=</span> <span style=color:#111>n</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// NullPointerException
</span></span></span></code></pre></div><ul><li>所有包装类型都是不变类，和String一样通过内部的<code>private final int</code>字段实现，无法派生子类</li><li>判断值类型的变量是否相等可用<code>==</code>，但是包装类型必须用<code>equals</code>比较（引用类型存在值相等但指向不同对象的情况）！！！详细的演示</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Integer</span> <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#111>127</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Integer</span> <span style=color:#111>y</span> <span style=color:#f92672>=</span> <span style=color:#111>127</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Integer</span> <span style=color:#111>m</span> <span style=color:#f92672>=</span> <span style=color:#111>99999</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Integer</span> <span style=color:#111>n</span> <span style=color:#f92672>=</span> <span style=color:#111>99999</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;x == y: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#f92672>(</span><span style=color:#111>x</span><span style=color:#f92672>==</span><span style=color:#111>y</span><span style=color:#f92672>));</span> <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;m == n: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#f92672>(</span><span style=color:#111>m</span><span style=color:#f92672>==</span><span style=color:#111>n</span><span style=color:#f92672>));</span> <span style=color:#75715e>// false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;x.equals(y): &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>x</span><span style=color:#f92672>.</span><span style=color:#75af00>equals</span><span style=color:#f92672>(</span><span style=color:#111>y</span><span style=color:#f92672>));</span> <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;m.equals(n): &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>m</span><span style=color:#f92672>.</span><span style=color:#75af00>equals</span><span style=color:#f92672>(</span><span style=color:#111>n</span><span style=color:#f92672>));</span> <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>==</code>比较，较小的两个相同的<code>Integer</code>返回<code>true</code>，较大的两个相同的<code>Integer</code>返回<code>false</code>，这是因为<code>Integer</code>是不变类，编译器把<code>Integer x = 127;</code>自动变为<code>Integer x = Integer.valueOf(127);</code></p><p>为了节省内存，<code>Integer.valueOf()</code>对于较小的数，始终返回相同的实例，因此<code>==</code>比较“恰好”为<code>true</code>，但我们绝不能因为Java标准库的<code>Integer</code>内部有缓存优化就用<code>==</code>比较，必须用<code>equals()</code>方法比较两个<code>Integer</code></p><ul><li>因为<code>Integer.valueOf()</code>可能始终返回同一个<code>Integer</code>实例，因此，在我们自己创建<code>Integer</code>的时候，以下两种方法：</li></ul><pre tabindex=0><code>Integer n = new Integer(100);
</code></pre><pre tabindex=0><code>Integer n = Integer.valueOf(100);
</code></pre><p>方法二更好，不用每次都new新的实例而是直接使用静态工厂方法进行调用，它会做到内部优化，尽可能地返回缓存的实例以节省内存</p><ul><li><code>String</code>作引用类型，类似c中的指针，内部存储一个指向内存中的地址</li><li>加上<code>final</code>表示常量，创建实例后无法修改</li><li>类型名过长时可用<code>var</code>代替</li><li><code>instanceof()</code>确定类型</li></ul><h3 id=运算>运算</h3><ul><li>溢出不报错，注意自检</li><li>优先级太多记不住，统一加括号完事了</li><li>两种类型不同的数进行运算时会存在类型的隐式转换（short+int -> int+int），注意运算精度</li><li>整数运算很准确，没有必要为了节省内存而使用<code>byte</code>和<code>short</code>进行整数运算</li><li>整数运算在除数为<code>0</code>时会报错，而浮点数运算在除数为<code>0</code>时，不会报错，返回<code>NAN</code> or <code>Infinity</code> or <code>-Infinity</code></li><li>布尔关系和三元运算中注意逻辑短路</li><li>三元运算<code>b ? x : y</code>后面的类型必须相同</li></ul><h3 id=字符字符串>字符&字符串</h3><ul><li>Java的<code>String</code>和<code>char</code>在内存中总是以Unicode编码表示</li><li>字符char用<code>''</code>，字符串用<code>""</code>（空字符串不等于null），字符串拼接存在类型隐式转换，<code>""" """</code>写多行字符串（同py）</li><li>java中的字符串赋值操作可直接联想c的指针进行理解，通过内部的<code>private final char[]</code>字段 以及没有任何修改<code>char[]</code>的方法实现字符串的不可变性；基于这一点，如果传入的对象有可能改变，我们需要复制而不是直接引用</li><li>字符串比较必须用<code>equals()</code>或<code>equalsIgnoreCase()</code>，不可偷懒用<code>==</code></li></ul><p>更多字符串的用法可几乎等同于Python，不列举</p><ul><li><code>String</code>和<code>char[]</code>类型可以互相转换</li></ul><pre tabindex=0><code>char[] cs = &#34;Hello&#34;.toCharArray(); // String -&gt; char[]
String s = new String(cs); // char[] -&gt; String
</code></pre><ul><li>如果修改了<code>char[]</code>数组，<code>String</code>并不会改变</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>char</span><span style=color:#f92672>[]</span> <span style=color:#111>cs</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Hello&#34;</span><span style=color:#f92672>.</span><span style=color:#75af00>toCharArray</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>String</span> <span style=color:#111>s</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>String</span><span style=color:#f92672>(</span><span style=color:#111>cs</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>s</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>cs</span><span style=color:#f92672>[</span><span style=color:#111>0</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;X&#39;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>s</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>这是因为通过<code>new String(char[])</code>创建新的<code>String</code>实例时，它并不会直接引用传入的<code>char[]</code>数组，而是会复制一份，所以，修改外部的<code>char[]</code>数组不会影响<code>String</code>实例内部的<code>char[]</code>数组，因为这是两个不同的数组</p><ul><li>早期的String总以char[]进行存储</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>String</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>char</span><span style=color:#f92672>[]</span> <span style=color:#111>value</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>int</span> <span style=color:#111>offset</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>int</span> <span style=color:#111>count</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>而较新的JDK版本的<code>String</code>则以<code>byte[]</code>存储：如果<code>String</code>仅包含ASCII字符，则每个<code>byte</code>存储一个字符，否则，每两个<code>byte</code>存储一个字符，这样做的目的是为了节省内存，因为大量的长度较短的<code>String</code>通常仅包含ASCII字符</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>String</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>byte</span><span style=color:#f92672>[]</span> <span style=color:#111>value</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>byte</span> <span style=color:#111>coder</span><span style=color:#f92672>;</span> <span style=color:#75715e>// 0 = LATIN1, 1 = UTF16
</span></span></span></code></pre></div><p>对于使用者来说，<code>String</code>内部的优化不影响任何已有代码，因为它的<code>public</code>方法签名是不变的</p><h3 id=数组>数组</h3><ul><li>新建数组<code>int[] n = new int[5];</code>，大小不可变，为引用类型</li><li>对于数组元素（或所有可迭代的数据类型）的遍历直接使用<code>for(int n:na){}</code>，缺点是无法指定遍历顺序，无法获取数组索引（n直接代表元素）</li><li>快速打印数组内容<code>System.out.println(Arrays.toString(ns));</code></li><li>快速打印二维数组内容<code>System.out.println(Arrays.deepToString(ns));</code></li><li>可变参数用<code>类型...</code>定义，可变参数相当于数组类型</li></ul><h3 id=流程控制>流程控制</h3><ul><li>读取输入需要<code>import java.util.Scanner</code>，由<code>Scanner</code>对象进行读入操作</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.util.Scanner</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>hello</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Scanner</span> <span style=color:#111>scanner</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Scanner</span><span style=color:#f92672>(</span><span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>in</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>print</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Input your name: &#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>String</span> <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#111>scanner</span><span style=color:#f92672>.</span><span style=color:#75af00>nextLine</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>print</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Input your age: &#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>int</span> <span style=color:#111>age</span> <span style=color:#f92672>=</span> <span style=color:#111>scanner</span><span style=color:#f92672>.</span><span style=color:#75af00>nextInt</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>printf</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Hi, %s, you are %d\n&#34;</span><span style=color:#f92672>,</span> <span style=color:#111>name</span><span style=color:#f92672>,</span> <span style=color:#111>age</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>switch语句不要忘break，case不用花括号</li><li><code>default</code>语句，可以在漏写某个枚举常量时自动报错，从而及时发现错误</li></ul><h2 id=oop基础>OOP基础</h2><h3 id=类实例>类&实例</h3><ul><li>对象靠new</li><li>一个java源文件可以包含多个类的定义，但只能定义一个public类，且public类名必须与文件名一致；如果要定义多个public类，必须拆到多个Java源文件中</li></ul><h3 id=方法>方法</h3><ul><li>语法</li></ul><pre tabindex=0><code>修饰符 方法返回类型 方法名(方法参数列表) {
    若干方法语句;
    return 方法返回值;
}
// 无return 返回类型为void
</code></pre><ul><li>变量设为private后可以通过public对外的方法间接修改</li><li>没事儿就尽可能少用public，少暴露对外的方法</li><li>与类名相同的方法作为construct构造方法，无返回值</li><li>先初始化字段，再执行构造方法（可覆盖前面的</li><li>可定义多个构造方法（传入参数类型 数量不同），new时会自动匹配；一个构造方法可以调用其他构造方法（便于代码复用），语法</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>int</span> <span style=color:#111>age</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>Person</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>age</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>age</span> <span style=color:#f92672>=</span> <span style=color:#111>age</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>Person</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>(</span><span style=color:#111>name</span><span style=color:#f92672>,</span> <span style=color:#111>18</span><span style=color:#f92672>);</span> <span style=color:#75715e>// 调用另一个构造方法Person(String, int)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>Person</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Unnamed&#34;</span><span style=color:#f92672>);</span> <span style=color:#75715e>// 调用另一个构造方法Person(String)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>非构造方法也可有多个重名的（参数不同 返回值通常相同），称为方法重载(Overload)，便于用一个名字处理多种参数输入</li></ul><h3 id=继承多态>继承&多态</h3><ul><li>使用<code>extends</code>关键字，例<code>class Student extends Person</code></li><li>subclass == extended class; super class == parent class == base class</li><li>子类不可访问父类的<code>private</code>字段和方法，不能覆写父类带有<code>final</code>关键字的方法，不能继承带有<code>final</code>的类，不能重新赋值带有<code>final</code>的字段</li><li><code>private</code>访问权限被限定在<code>class</code>的内部，而且与方法声明顺序无关；如果一个类内部还定义了nested class嵌套类，那么，嵌套类拥有访问<code>private</code>的权限</li><li>定义为<code>protected</code>的字段和方法可以被子类访问，以及子类的子类</li><li>继承之后<code>super.name</code>, <code>this.name</code>, <code>name</code>都是一个意思，但如果存在方法覆写后调用父类方法就必须用<code>super.name</code>（联想NodeJS的<code>.call</code>, <code>.apply</code> 异曲同工之妙）</li><li>未注明<code>extends xxx</code>的类自动被补上了<code>extends Object</code>，最顶层的<code>object</code>也是可以被覆写的</li><li>任何类的构造方法中第一行语句必须是调用父类的构造方法，如未注明会自动补上<code>super();</code>，所以如果父类没有默认的构造方法，子类就必须显式调用<code>super()</code>并给出参数以便让编译器定位到父类的一个合适的构造方法————一句话：子类不继承父类的构造方法，是自动生成的（联想Nodejs执行代码时的wrapper）</li><li>Java15之后允许<code>sealed</code>修饰class，并可通过<code>permits</code>限制能从该类继承的子类名称（目前为预览状态，可开启<code>--enable-preview</code>和<code>--source 15</code>开启）</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#111>sealed</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Shape</span> <span style=color:#111>permits</span> <span style=color:#111>Rect</span><span style=color:#f92672>,</span> <span style=color:#111>Circle</span><span style=color:#f92672>,</span> <span style=color:#111>Triangle</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// xxx
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>向上转型基本无问题，向下可能回报ClassCastException的错误，用<code>instanceof</code>判断一个实例究竟是不是某种类型</li><li>子类与父类方法签名完全相同时可覆写(Override)，加上<code>@Override</code>可以让编译器帮助检查是否进行了正确的覆写（非必要）</li><li>new来的对象如果指定的类型不同，实际调用其方法时会不同，run起来才知道具体用的啥，这个叫多态(Polymorphic)，有助于实现功能拓展，封装底层逻辑 优化交互</li></ul><h3 id=抽象类接口>抽象类&接口</h3><ul><li>抽象类不实现任何功能 仅为了定义方法签名，目的就是为了让子类继承并覆盖，注意这个类本身也要声明为<code>abstract</code>作抽象类</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>abstract</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>abstract</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>run</span><span style=color:#f92672>();</span>	<span style=color:#75715e>// 无子句
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>当我们定义了一个抽象类和N个具体类，我们可以用抽象类作引用类型去引用具体类的子类实例，好处在于对实例的方法进行调用时并不关心抽象类型变量的具体子类型</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#111>Person</span> <span style=color:#111>s</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Student</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#111>Person</span> <span style=color:#111>t</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Teacher</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 不关心Person变量的具体子类型:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#111>s</span><span style=color:#f92672>.</span><span style=color:#75af00>run</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#111>t</span><span style=color:#f92672>.</span><span style=color:#75af00>run</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 同样不关心新的子类是如何实现run()方法的：
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#111>Person</span> <span style=color:#111>e</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Employee</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#111>e</span><span style=color:#f92672>.</span><span style=color:#75af00>run</span><span style=color:#f92672>();</span>
</span></span></code></pre></div><p>这种尽量引用高层类型，避免引用实际子类型的方式，称之为面向抽象编程，本质：</p><p>上层代码只定义规范(<code>abstract class Person</code>)，不需要子类就可以实现业务逻辑（正常编译），具体的业务逻辑由不同的子类实现，调用者并不关心</p><ul><li><code>interface</code>比抽象类还抽象的纯抽象接口，无实例字段，所有方法都默认<code>public abstract</code></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>interface</span> <span style=color:#75af00>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>void</span> <span style=color:#75af00>run</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#111>String</span> <span style=color:#75af00>getName</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>当具体类实现一个接口时需要用<code>implements</code></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Student</span> <span style=color:#00a8c8>implements</span> <span style=color:#111>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>Student</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75af00>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>+</span> <span style=color:#d88200>&#34; run&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75af00>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#111>String</span> <span style=color:#75af00>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>一个类可以实现多个接口，一个接口也可以继承自另一个接口</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Student</span> <span style=color:#00a8c8>implements</span> <span style=color:#111>Person</span><span style=color:#f92672>,</span> <span style=color:#111>Hello</span> <span style=color:#f92672>{</span> <span style=color:#75715e>// 实现了两个interface
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>interface</span> <span style=color:#75af00>Person</span> <span style=color:#00a8c8>extends</span> <span style=color:#111>Hello</span> <span style=color:#f92672>{</span>	<span style=color:#75715e>// 继承另一个接口
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#00a8c8>void</span> <span style=color:#75af00>run</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#111>String</span> <span style=color:#75af00>getName</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>在接口中，可以定义<code>default</code>方法；<code>default</code>方法和抽象类的普通方法是有所不同的。因为<code>interface</code>没有字段，<code>default</code>方法无法访问字段，而抽象类的普通方法可以访问实例字段(Java>=1.8)</li></ul><h3 id=静态字段静态方法>静态字段&静态方法</h3><ul><li><p>用<code>static</code>关键字修饰的字段处于同一个共享作用域中</p></li><li><p>不推荐用<code>实例.静态字段</code>去访问静态字段，因为在java中实例对象并没有静态字段(实际)，代码中可以访问是因为编译器可以根据实例类型自动转换为<code>类名.静态字段</code>来访问</p></li><li><p>推荐用类名来访问静态字段，可以将其理解为类本身的字段</p></li><li><p>调用实例方法必须通过一个实例变量，而调用静态方法则不需要实例变量，通过类名就可以调用</p></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Person</span><span style=color:#f92672>.</span><span style=color:#75af00>setNumber</span><span style=color:#f92672>(</span><span style=color:#111>99</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>Person</span><span style=color:#f92672>.</span><span style=color:#75af00>number</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>int</span> <span style=color:#111>number</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>setNumber</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>value</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>number</span> <span style=color:#f92672>=</span> <span style=color:#111>value</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>静态方法内部无法访问<code>this</code>，也无法访问实例字段，只能访问静态字段</li><li>静态方法常用于工具类，比如<code>Arrays.sort()</code>和<code>Math.random()</code>；java程序入口的<code>main</code>也是静态方法噢</li><li>对于接口而言虽然不能有实例字段，但是可以有<code>public static final</code>加持的静态字段</li></ul><pre tabindex=0><code>public interface Person {
    public static final int MALE = 1;
    public static final int FEMALE = 2;
}
</code></pre><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 可简写
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>interface</span> <span style=color:#75af00>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 编译器会自动加上public statc final:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#00a8c8>int</span> <span style=color:#111>MALE</span> <span style=color:#f92672>=</span> <span style=color:#111>1</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>int</span> <span style=color:#111>FEMALE</span> <span style=color:#f92672>=</span> <span style=color:#111>2</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=包>包</h3><ul><li>使用package包来解决名字冲突（各个语言都有了 很好懂），可以用类的全名</li><li>包没有父子关系！java.util和java.util.zip是不同的包，两者没有任何继承关系</li><li>所有Java文件对应的目录层次要和包的层次一致，编译后的<code>.class</code>文件也需要按照包结构存放</li><li>位于同一个包的类，可以访问包作用域的字段和方法。不用<code>public</code>、<code>protected</code>、<code>private</code>修饰的字段和方法就是包作用域</li><li><code>import static</code>可以导入可以导入一个类的静态字段和静态方法</li><li>Java编译器最终编译出的<code>.class</code>文件只使用完整类名(超长)，所以编译器在遇到<code>class</code>名称时如果非完整类名，按照 当前package->import的包->java.lang包 的顺序进行查找</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Main.java
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#111>test</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.text.Format</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>java</span><span style=color:#f92672>.</span><span style=color:#75af00>util</span><span style=color:#f92672>.</span><span style=color:#75af00>List</span> <span style=color:#111>list</span><span style=color:#f92672>;</span> <span style=color:#75715e>// ok，使用完整类名 -&gt; java.util.List
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>Format</span> <span style=color:#111>format</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>;</span> <span style=color:#75715e>// ok，使用import的类 -&gt; java.text.Format
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>String</span> <span style=color:#111>s</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;hi&#34;</span><span style=color:#f92672>;</span> <span style=color:#75715e>// ok，使用java.lang包的String -&gt; java.lang.String
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>s</span><span style=color:#f92672>);</span> <span style=color:#75715e>// ok，使用java.lang包的System -&gt; java.lang.System
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>MessageFormat</span> <span style=color:#111>mf</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>;</span> <span style=color:#75715e>// 编译错误：无法找到MessageFormat: MessageFormat cannot be resolved to a type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>编写class时，编译器自动帮我们<code>import java.lang.*</code>(不包含<code>java.lang.reflect</code>这样的包)和<code>import</code>当前<code>package</code>的其它class</li><li>把方法定义为<code>package</code>权限有助于测试，因为测试类和被测试类只要位于同一个<code>package</code>，测试代码就可以访问被测试类的<code>package</code>权限方法</li></ul><h3 id=内部类>内部类</h3><ul><li>或称nested class嵌套类</li><li>Inner Class定义在一个类的内部，它的实例不能单独存在</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Outer</span> <span style=color:#111>outer</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Outer</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Nested&#34;</span><span style=color:#f92672>);</span> <span style=color:#75715e>// 实例化一个Outer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>Outer</span><span style=color:#f92672>.</span><span style=color:#75af00>Inner</span> <span style=color:#111>inner</span> <span style=color:#f92672>=</span> <span style=color:#111>outer</span><span style=color:#f92672>.</span><span style=color:#75af00>new</span> <span style=color:#75af00>Inner</span><span style=color:#f92672>();</span> <span style=color:#75715e>// 实例化一个Inner
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>inner</span><span style=color:#f92672>.</span><span style=color:#75af00>hello</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Outer</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>Outer</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>	<span style=color:#75715e>// 调用Outer的构造方法来创建Inner实例
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>class</span> <span style=color:#75af00>Inner</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>void</span> <span style=color:#75af00>hello</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Hello, &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>Outer</span><span style=color:#f92672>.</span><span style=color:#75af00>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>原因是Inner Class除了<code>this</code>指向自己以外还隐含地持有一个Outer Class实例，可以用<code>Outer.this</code>访问这个实例；所以，实例化一个Inner Class不能脱离Outer实例</p><p>Inner Class和普通Class相比，除了能引用Outer实例外，还有一个额外的特权：可以修改Outer Class的<code>private</code>字段；因为Inner Class的作用域在Outer Class内部，所以能访问Outer Class的<code>private</code>字段和方法</p><p>观察Java编译器编译后的<code>.class</code>文件可以发现，<code>Outer</code>类被编译为<code>Outer.class</code>，而<code>Inner</code>类被编译为<code>Outer$Inner.class</code></p><ul><li>还可以通过匿名类Anonymous Class来定义Inner Class，两者本质上相同</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Outer</span> <span style=color:#111>outer</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Outer</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Nested&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>outer</span><span style=color:#f92672>.</span><span style=color:#75af00>asyncHello</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Outer</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>Outer</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>void</span> <span style=color:#75af00>asyncHello</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Runnable</span> <span style=color:#111>r</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Runnable</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>	<span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75af00>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Hello, &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>Outer</span><span style=color:#f92672>.</span><span style=color:#75af00>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>new</span> <span style=color:#111>Thread</span><span style=color:#f92672>(</span><span style=color:#111>r</span><span style=color:#f92672>).</span><span style=color:#75af00>start</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>Runnabale</code>本身是不能实例化的接口，这里实际定义了一个实现了<code>Runnable</code>接口的匿名类，并通过new实例化 之后转型为Runnable，过程很多但是实现起来代码很简洁；和Inner Class一样也可以访问Outer Class的<code>private</code></p><ul><li>匿名类在定义时必须实例化，最终会编译为<code>Outer$1.class</code></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#111>Runnable</span> <span style=color:#111>r</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Runnable</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 实现必要的抽象方法...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>};</span>
</span></span></code></pre></div><ul><li>继承自普通类的匿名类，编译为<code>Main$1.class</code>和<code>Main$2.class</code>两个匿名类文件</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.util.HashMap</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>HashMap</span><span style=color:#f92672>&lt;</span><span style=color:#111>String</span><span style=color:#f92672>,</span> <span style=color:#111>String</span><span style=color:#f92672>&gt;</span> <span style=color:#111>map1</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>HashMap</span><span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>HashMap</span><span style=color:#f92672>&lt;</span><span style=color:#111>String</span><span style=color:#f92672>,</span> <span style=color:#111>String</span><span style=color:#f92672>&gt;</span> <span style=color:#111>map2</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>HashMap</span><span style=color:#f92672>&lt;&gt;()</span> <span style=color:#f92672>{};</span> <span style=color:#75715e>// 匿名类!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>HashMap</span><span style=color:#f92672>&lt;</span><span style=color:#111>String</span><span style=color:#f92672>,</span> <span style=color:#111>String</span><span style=color:#f92672>&gt;</span> <span style=color:#111>map3</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>HashMap</span><span style=color:#f92672>&lt;&gt;()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#111>put</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;A&#34;</span><span style=color:#f92672>,</span> <span style=color:#d88200>&#34;1&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#111>put</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;B&#34;</span><span style=color:#f92672>,</span> <span style=color:#d88200>&#34;2&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>map3</span><span style=color:#f92672>.</span><span style=color:#75af00>get</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;A&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>静态内部类示例</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Outer</span><span style=color:#f92672>.</span><span style=color:#75af00>StaticNested</span> <span style=color:#111>sn</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Outer</span><span style=color:#f92672>.</span><span style=color:#75af00>StaticNested</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>sn</span><span style=color:#f92672>.</span><span style=color:#75af00>hello</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Outer</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#111>String</span> <span style=color:#111>NAME</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;OUTER&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>Outer</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>name</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>StaticNested</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>void</span> <span style=color:#75af00>hello</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Hello, &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>Outer</span><span style=color:#f92672>.</span><span style=color:#75af00>NAME</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>用<code>static</code>修饰的内部类和Inner Class有很大的不同，它不再依附于<code>Outer</code>的实例，而是一个完全独立的类，因此无法引用<code>Outer.this</code>，但它仍然可以访问<code>Outer</code>的<code>private</code>静态字段和静态方法；如果把<code>StaticNested</code>移到<code>Outer</code>之外，就失去了访问<code>private</code>的权限</p><h2 id=java核心类部分>Java核心类(部分)</h2><h3 id=stringbuilder>StringBuilder</h3><ul><li>是一个可变对象，可以预分配缓冲区，向其中新增字符时，不会创建新的临时对象</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#111>StringBuilder</span> <span style=color:#111>sb</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>StringBuilder</span><span style=color:#f92672>(</span><span style=color:#111>1024</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>for</span> <span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>i</span> <span style=color:#f92672>=</span> <span style=color:#111>0</span><span style=color:#f92672>;</span> <span style=color:#111>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>1000</span><span style=color:#f92672>;</span> <span style=color:#111>i</span><span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>sb</span><span style=color:#f92672>.</span><span style=color:#75af00>append</span><span style=color:#f92672>(</span><span style=color:#d88200>&#39;,&#39;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#111>sb</span><span style=color:#f92672>.</span><span style=color:#75af00>append</span><span style=color:#f92672>(</span><span style=color:#111>i</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#111>String</span> <span style=color:#111>s</span> <span style=color:#f92672>=</span> <span style=color:#111>sb</span><span style=color:#f92672>.</span><span style=color:#75af00>toString</span><span style=color:#f92672>();</span>
</span></span></code></pre></div><ul><li>可链式操作</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>var</span> <span style=color:#111>sb</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>StringBuilder</span><span style=color:#f92672>(</span><span style=color:#111>1024</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>sb</span><span style=color:#f92672>.</span><span style=color:#75af00>append</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Mr &#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>.</span><span style=color:#75af00>append</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Bob&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>.</span><span style=color:#75af00>append</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;!&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>.</span><span style=color:#75af00>insert</span><span style=color:#f92672>(</span><span style=color:#111>0</span><span style=color:#f92672>,</span> <span style=color:#d88200>&#34;Hello, &#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>sb</span><span style=color:#f92672>.</span><span style=color:#75af00>toString</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>实现的关键是定义的<code>append()</code>方法会返回<code>this</code>，这样就可以不断调用自身的其他方法；仿写链式调用函数</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Adder</span> <span style=color:#111>adder</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Adder</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>adder</span><span style=color:#f92672>.</span><span style=color:#75af00>add</span><span style=color:#f92672>(</span><span style=color:#111>3</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>.</span><span style=color:#75af00>add</span><span style=color:#f92672>(</span><span style=color:#111>5</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>.</span><span style=color:#75af00>inc</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>.</span><span style=color:#75af00>add</span><span style=color:#f92672>(</span><span style=color:#111>10</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>adder</span><span style=color:#f92672>.</span><span style=color:#75af00>value</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>class</span> <span style=color:#75af00>Adder</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>int</span> <span style=color:#111>sum</span> <span style=color:#f92672>=</span> <span style=color:#111>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#111>Adder</span> <span style=color:#75af00>add</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>n</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>sum</span> <span style=color:#f92672>+=</span> <span style=color:#111>n</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>this</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#111>Adder</span> <span style=color:#75af00>inc</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>sum</span> <span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>this</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#75af00>value</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#111>sum</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><code>StringBuffer</code>和<code>StringBuilder</code>接口完全相同，是早期版本，通过同步来保证多个线程操作<code>StringBuffer</code>也是安全的，但是同步会带来执行速度的下降</li></ul><h3 id=enum>enum</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Weekday</span> <span style=color:#111>day</span> <span style=color:#f92672>=</span> <span style=color:#111>Weekday</span><span style=color:#f92672>.</span><span style=color:#75af00>SUN</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>if</span> <span style=color:#f92672>(</span><span style=color:#111>day</span> <span style=color:#f92672>==</span> <span style=color:#111>Weekday</span><span style=color:#f92672>.</span><span style=color:#75af00>SAT</span> <span style=color:#f92672>||</span> <span style=color:#111>day</span> <span style=color:#f92672>==</span> <span style=color:#111>Weekday</span><span style=color:#f92672>.</span><span style=color:#75af00>SUN</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Work at home!&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#00a8c8>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Work at office!&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>enum</span> <span style=color:#111>Weekday</span> <span style=color:#f92672>{</span>	<span style=color:#75715e>// 只需依次列出枚举的常量名
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#111>SUN</span><span style=color:#f92672>,</span> <span style=color:#111>MON</span><span style=color:#f92672>,</span> <span style=color:#111>TUE</span><span style=color:#f92672>,</span> <span style=color:#111>WED</span><span style=color:#f92672>,</span> <span style=color:#111>THU</span><span style=color:#f92672>,</span> <span style=color:#111>FRI</span><span style=color:#f92672>,</span> <span style=color:#111>SAT</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p><code>enum</code>常量本身带有类型信息，即<code>Weekday.SUN</code>类型是<code>Weekday</code>，编译器会自动检查出类型错误</p></li><li><p>不可能引用到非枚举的值，因为无法通过编译</p></li><li><p>不同类型的枚举不能互相比较或者赋值，因为类型不符</p></li><li><p><code>enum</code>虽然也是引用类型，但因为其在JVM中只有唯一实例，所以可以直接用<code>==</code>比较</p></li><li><p>继承自<code>java.lang.Enum</code>，无法被继承，无法new实例</p></li><li><p>枚举类的字段也可以是非final类型，即可以在运行期修改，但是不推荐这样</p></li><li><p>天生适合switch，具有类型信息和有限个枚举常量</p></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Weekday</span> <span style=color:#111>day</span> <span style=color:#f92672>=</span> <span style=color:#111>Weekday</span><span style=color:#f92672>.</span><span style=color:#75af00>SUN</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>switch</span><span style=color:#f92672>(</span><span style=color:#111>day</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>case</span> <span style=color:#111>MON</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>case</span> <span style=color:#111>TUE</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>case</span> <span style=color:#111>WED</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>case</span> <span style=color:#111>THU</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>case</span> <span style=color:#111>FRI</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Today is &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>day</span> <span style=color:#f92672>+</span> <span style=color:#d88200>&#34;. Work at office!&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>break</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>case</span> <span style=color:#111>SAT</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>case</span> <span style=color:#111>SUN</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Today is &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>day</span> <span style=color:#f92672>+</span> <span style=color:#d88200>&#34;. Work at home!&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>break</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>RuntimeException</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;cannot process &#34;</span> <span style=color:#f92672>+</span> <span style=color:#111>day</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>enum</span> <span style=color:#111>Weekday</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>MON</span><span style=color:#f92672>,</span> <span style=color:#111>TUE</span><span style=color:#f92672>,</span> <span style=color:#111>WED</span><span style=color:#f92672>,</span> <span style=color:#111>THU</span><span style=color:#f92672>,</span> <span style=color:#111>FRI</span><span style=color:#f92672>,</span> <span style=color:#111>SAT</span><span style=color:#f92672>,</span> <span style=color:#111>SUN</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=record>record</h3><p>java14开始</p><ul><li>不变类的class和字段都使用<code>final</code>关键字，无法派生子类，创建实例后无法修改任何字段</li><li>创建不变类后为了保证不变类的比较，还需要正确覆写<code>equals()</code>和<code>hashCode()</code>方法，手动覆写很麻烦，可以直接用record一行写出不变类</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Point</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>Point</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>x</span> <span style=color:#f92672>=</span> <span style=color:#111>x</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>y</span> <span style=color:#f92672>=</span> <span style=color:#111>y</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#75af00>x</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>x</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#75af00>y</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>y</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Point</span> <span style=color:#111>p</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Point</span><span style=color:#f92672>(</span><span style=color:#111>123</span><span style=color:#f92672>,</span> <span style=color:#111>456</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>p</span><span style=color:#f92672>.</span><span style=color:#75af00>x</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>p</span><span style=color:#f92672>.</span><span style=color:#75af00>y</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>p</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#111>record</span> <span style=color:#75af00>Point</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span></code></pre></div><p>最后一行相当于</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Point</span> <span style=color:#00a8c8>extends</span> <span style=color:#111>Record</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>Point</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>x</span> <span style=color:#f92672>=</span> <span style=color:#111>x</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>y</span> <span style=color:#f92672>=</span> <span style=color:#111>y</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#75af00>x</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>x</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#75af00>y</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>y</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#111>String</span> <span style=color:#75af00>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#111>String</span><span style=color:#f92672>.</span><span style=color:#75af00>format</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Point[x=%s, y=%s]&#34;</span><span style=color:#f92672>,</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#111>y</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>boolean</span> <span style=color:#75af00>equals</span><span style=color:#f92672>(</span><span style=color:#111>Object</span> <span style=color:#111>o</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#75af00>hashCode</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>除了用<code>final</code>修饰class以及每个字段外，编译器还自动为我们创建了构造方法，和字段名同名的方法，以及覆写<code>toString()</code>、<code>equals()</code>和<code>hashCode()</code>方法</p><ul><li>和<code>enum</code>类似，我们自己不能直接从<code>Record</code>派生，只能通过<code>record</code>关键字由编译器实现继承</li><li>如果要对参数进行检查，可以用Compact Constructor</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#111>record</span> <span style=color:#75af00>Point</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#111>Point</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>if</span> <span style=color:#f92672>(</span><span style=color:#111>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>0</span> <span style=color:#f92672>||</span> <span style=color:#111>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>0</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>IllegalArgumentException</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>编译器生成的方法</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>final</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Point</span> <span style=color:#00a8c8>extends</span> <span style=color:#111>Record</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>Point</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 这是我们编写的Compact Constructor:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>if</span> <span style=color:#f92672>(</span><span style=color:#111>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>0</span> <span style=color:#f92672>||</span> <span style=color:#111>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>0</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>IllegalArgumentException</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 这是编译器继续生成的赋值代码:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>x</span> <span style=color:#f92672>=</span> <span style=color:#111>x</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>this</span><span style=color:#f92672>.</span><span style=color:#75af00>y</span> <span style=color:#f92672>=</span> <span style=color:#111>y</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>作为<code>record</code>的<code>Point</code>仍然可以通过<code>of()</code>添加静态方法</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#111>record</span> <span style=color:#75af00>Point</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#111>Point</span> <span style=color:#75af00>of</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Point</span><span style=color:#f92672>(</span><span style=color:#111>0</span><span style=color:#f92672>,</span> <span style=color:#111>0</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#111>Point</span> <span style=color:#75af00>of</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Point</span><span style=color:#f92672>(</span><span style=color:#111>x</span><span style=color:#f92672>,</span> <span style=color:#111>y</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#111>var</span> <span style=color:#111>z</span> <span style=color:#f92672>=</span> <span style=color:#111>Point</span><span style=color:#f92672>.</span><span style=color:#75af00>of</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#111>var</span> <span style=color:#111>p</span> <span style=color:#f92672>=</span> <span style=color:#111>Point</span><span style=color:#f92672>.</span><span style=color:#75af00>of</span><span style=color:#f92672>(</span><span style=color:#111>123</span><span style=color:#f92672>,</span> <span style=color:#111>456</span><span style=color:#f92672>);</span>
</span></span></code></pre></div><h2 id=异常处理>异常处理</h2><h3 id=异常捕获异常>异常&捕获异常</h3><ul><li>Java内置异常处理机制，是一种<code>class</code>，本身带有类型信息；异常可以在任何地方抛出，但只需要在上层捕获，这样可以做到和方法调用分离</li></ul><pre tabindex=0><code>try {
    String s = processFile(“C:\\test.txt”);
    // ok:
} catch (FileNotFoundException e) {
    // file not found:
} catch (SecurityException e) {
    // no read permission:
} catch (IOException e) {
    // io error:
} catch (Exception e) {
    // other error:
}
</code></pre><ul><li>继承关系是这样的</li></ul><p><img src=https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220227002539516.png alt=image-20220227002539516></p><p><code>Throwable</code>是异常体系的根，它继承自<code>Object</code></p><p><code>Error</code>表示严重错误，比如<code>OutofMemoryError</code>, <code>NoClassDefFoundError</code>, <code>StackOverflowError</code></p><p><code>Exception</code>表示运行时的异常，可以被捕获并处理，比如<code>NumberFormatException</code>, <code>FileNotFoundException</code>, <code>SocketException</code>；还包括一些可修正的语法错误，比如<code>NullPointerException</code>, <code>IndexOutOfBoundsException</code></p><ul><li>常用异常</li></ul><pre tabindex=0><code class=language-ascii data-lang=ascii>Exception
│
├─ RuntimeException
│  │
│  ├─ NullPointerException
│  │
│  ├─ IndexOutOfBoundsException
│  │
│  ├─ SecurityException
│  │
│  └─ IllegalArgumentException
│     │
│     └─ NumberFormatException
│
├─ IOException
│  │
│  ├─ UnsupportedCharsetException
│  │
│  ├─ FileNotFoundException
│  │
│  └─ SocketException
│
├─ ParseException
│
├─ GeneralSecurityException
│
├─ SQLException
│
└─ TimeoutException
</code></pre><ul><li><p>必须捕获的异常，包括<code>Exception</code>及其子类，但不包括<code>RuntimeException</code>及其子类，这种类型的异常称为Checked Exception</p></li><li><p>如果不捕获Checked Exception，编译器会报错，原因是方法定义时使用<code>throws Xxx</code>表示该方法可能抛出的异常类型，导致调用方在调用的时候，必须强制捕获这些异常</p></li><li><p>不需要捕获的异常，包括<code>Error</code>及其子类，<code>RuntimeException</code>及其子类</p></li><li><p>捕获异常需要提前import</p></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.io.UnsupportedEncodingException</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.util.Arrays</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>byte</span><span style=color:#f92672>[]</span> <span style=color:#111>bs</span> <span style=color:#f92672>=</span> <span style=color:#111>toGBK</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;中文&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>Arrays</span><span style=color:#f92672>.</span><span style=color:#75af00>toString</span><span style=color:#f92672>(</span><span style=color:#111>bs</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>UnsupportedEncodingException</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>e</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>byte</span><span style=color:#f92672>[]</span> <span style=color:#75af00>toGBK</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>s</span><span style=color:#f92672>)</span> <span style=color:#00a8c8>throws</span> <span style=color:#111>UnsupportedEncodingException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 用指定编码转换String为byte[]:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>return</span> <span style=color:#111>s</span><span style=color:#f92672>.</span><span style=color:#75af00>getBytes</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;GBK&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>只要是方法声明的Checked Exception，不在调用层捕获，也必须在更高的调用层捕获；所有未捕获的异常，最终也必须在<code>main()</code>方法中捕获</li><li>所有异常都可以调用<code>printStackTrace()</code>方法打印异常栈</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>static</span> <span style=color:#00a8c8>byte</span><span style=color:#f92672>[]</span> <span style=color:#75af00>toGBK</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>s</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>return</span> <span style=color:#111>s</span><span style=color:#f92672>.</span><span style=color:#75af00>getBytes</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;GBK&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>UnsupportedEncodingException</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 先记下来再说:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>e</span><span style=color:#f92672>.</span><span style=color:#75af00>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>;</span>
</span></span></code></pre></div><ul><li>如果不想用try可以直接把<code>main()</code>方法定义为<code>throws Exception</code></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.io.UnsupportedEncodingException</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.util.Arrays</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#00a8c8>throws</span> <span style=color:#111>Exception</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>byte</span><span style=color:#f92672>[]</span> <span style=color:#111>bs</span> <span style=color:#f92672>=</span> <span style=color:#111>toGBK</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;中文&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>Arrays</span><span style=color:#f92672>.</span><span style=color:#75af00>toString</span><span style=color:#f92672>(</span><span style=color:#111>bs</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>byte</span><span style=color:#f92672>[]</span> <span style=color:#75af00>toGBK</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>s</span><span style=color:#f92672>)</span> <span style=color:#00a8c8>throws</span> <span style=color:#111>UnsupportedEncodingException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 用指定编码转换String为byte[]:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>return</span> <span style=color:#111>s</span><span style=color:#f92672>.</span><span style=color:#75af00>getBytes</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;GBK&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>相当于声明了所有可能抛出的Exception，也就不用捕获了；代价就是一旦发生异常，程序会立刻退出，不够灵活</p><ul><li>当方法声明了可能抛出的异常，可以没有<code>catch</code>，只使用<code>try ... finally</code>结构</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>process</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>file</span><span style=color:#f92672>)</span> <span style=color:#00a8c8>throws</span> <span style=color:#111>IOException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#00a8c8>finally</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;END&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>可以一个try对多个catch，此时注意catch的顺序：子类在前，避免短路</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>process1</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>process2</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>process3</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>IOException</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;IO error&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>UnsupportedEncodingException</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#75715e>// 永远捕获不到 会被上面的截胡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;Bad encoding&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=抛出异常>抛出异常</h3><ul><li>分两步：创建某个<code>Exception</code>的实例 -> 抛出</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>process2</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>s</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#f92672>(</span><span style=color:#111>s</span><span style=color:#f92672>==</span><span style=color:#00a8c8>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>NullPointerException</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>如果一个方法捕获了某个异常后，又在<code>catch</code>子句中抛出新的异常，就相当于把抛出的异常类型“转换”了；注意为了能追踪到完整的异常栈，在构造异常的时候，把原始的<code>Exception</code>实例传进去</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>process1</span><span style=color:#f92672>();</span>	<span style=color:#75715e>// 01
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>Exception</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>e</span><span style=color:#f92672>.</span><span style=color:#75af00>printStackTrace</span><span style=color:#f92672>();</span>	<span style=color:#75715e>// 05
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>process1</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>process2</span><span style=color:#f92672>();</span>	<span style=color:#75715e>// 02
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>NullPointerException</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// throw new IllegalArgumentException();
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>IllegalArgumentException</span><span style=color:#f92672>(</span><span style=color:#111>e</span><span style=color:#f92672>);</span>	<span style=color:#75715e>// 04
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>process2</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>NullPointerException</span><span style=color:#f92672>();</span>	<span style=color:#75715e>// 03
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>如果用注释掉的方式写就会丢失<code>NullPointerException</code>这一条</p><ul><li>在代码中获取原始异常可以使用<code>Throwable.getCause()</code>方法。如果返回<code>null</code>，说明已经是“根异常”了(Caused by: xxxx)</li><li>如果在finally中抛出异常（尽量别），由于<code>catch</code>中准备抛出的异常就“消失”了，所以这个没有被抛出的异常称为“被屏蔽”的异常Suppressed Exception</li><li>如果我们需要获知所有的异常，可以先用<code>origin</code>变量保存原始异常，然后调用<code>Throwable.addSuppressed()</code>，把原始异常添加进来，最后在<code>finally</code>抛出</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#00a8c8>throws</span> <span style=color:#111>Exception</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Exception</span> <span style=color:#111>origin</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>Integer</span><span style=color:#f92672>.</span><span style=color:#75af00>parseInt</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;abc&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>Exception</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>origin</span> <span style=color:#f92672>=</span> <span style=color:#111>e</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>throw</span> <span style=color:#111>e</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#00a8c8>finally</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>Exception</span> <span style=color:#111>e</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>IllegalArgumentException</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>if</span> <span style=color:#f92672>(</span><span style=color:#111>origin</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#111>e</span><span style=color:#f92672>.</span><span style=color:#75af00>addSuppressed</span><span style=color:#f92672>(</span><span style=color:#111>origin</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>throw</span> <span style=color:#111>e</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>当<code>catch</code>和<code>finally</code>都抛出了异常时，虽然<code>catch</code>的异常被屏蔽了，但是，<code>finally</code>抛出的异常仍然包含了它：</p><pre tabindex=0><code>Exception in thread &#34;main&#34; java.lang.IllegalArgumentException
    at Main.main(Main.java:11)
Suppressed: java.lang.NumberFormatException: For input string: &#34;abc&#34;
    at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.base/java.lang.Integer.parseInt(Integer.java:652)
    at java.base/java.lang.Integer.parseInt(Integer.java:770)
    at Main.main(Main.java:6)
</code></pre><p>通过<code>Throwable.getSuppressed()</code>可以获取所有的<code>Suppressed Exception</code></p><h3 id=自定义异常>自定义异常</h3><ul><li>见的做法是自定义一个<code>BaseException</code>作为“根异常”，然后，派生出各种业务类型的异常；<code>BaseException</code>需要从一个适合的<code>Exception</code>派生，通常建议从<code>RuntimeException</code>派生</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>BaseException</span> <span style=color:#00a8c8>extends</span> <span style=color:#111>RuntimeException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>UserNotFoundException</span> <span style=color:#00a8c8>extends</span> <span style=color:#111>BaseException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>LoginFailedException</span> <span style=color:#00a8c8>extends</span> <span style=color:#111>BaseException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>自定义的<code>BaseException</code>应该提供多个构造方法</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>BaseException</span> <span style=color:#00a8c8>extends</span> <span style=color:#111>RuntimeException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>BaseException</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>super</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>BaseException</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>message</span><span style=color:#f92672>,</span> <span style=color:#111>Throwable</span> <span style=color:#111>cause</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>super</span><span style=color:#f92672>(</span><span style=color:#111>message</span><span style=color:#f92672>,</span> <span style=color:#111>cause</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>BaseException</span><span style=color:#f92672>(</span><span style=color:#111>String</span> <span style=color:#111>message</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>super</span><span style=color:#f92672>(</span><span style=color:#111>message</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#75af00>BaseException</span><span style=color:#f92672>(</span><span style=color:#111>Throwable</span> <span style=color:#111>cause</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>super</span><span style=color:#f92672>(</span><span style=color:#111>cause</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>这样，抛出异常的时候，就可以选择合适的构造方法</p><h3 id=断言>断言</h3><ul><li>JVM默认关闭断言指令，需传入<code>-enableassertions</code>或<code>-ea</code>；还可以有选择地对特定地类启用断言，命令行参数是：<code>-ea:com.itranswarp.sample.Main</code>，表示只对<code>com.itranswarp.sample.Main</code>这个类启用断言；或者对特定地包启用断言，命令行参数是：<code>-ea:com.itranswarp.sample...</code>（注意结尾有3个<code>.</code>），表示对<code>com.itranswarp.sample</code>这个包启动断言</li><li>是一种调试方式，失败时会抛出<code>AssertionError</code>，导致程序结束退出</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>double</span> <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#111>Math</span><span style=color:#f92672>.</span><span style=color:#75af00>abs</span><span style=color:#f92672>(-</span><span style=color:#111>123</span><span style=color:#f92672>.</span><span style=color:#75af00>45</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>assert</span> <span style=color:#111>x</span> <span style=color:#f92672>&gt;=</span> <span style=color:#111>0</span> <span style=color:#f92672>:</span> <span style=color:#d88200>&#34;x must &gt;= 0&#34;</span><span style=color:#f92672>;</span>	<span style=color:#75715e>// 会带上消息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>out</span><span style=color:#f92672>.</span><span style=color:#75af00>println</span><span style=color:#f92672>(</span><span style=color:#111>x</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>不能用于可恢复的程序错误，只应该用于开发和测试阶段，对于可恢复的程序错误，不应该使用断言</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>sort</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span><span style=color:#f92672>[]</span> <span style=color:#111>arr</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>assert</span> <span style=color:#111>arr</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>应该直接捕获了</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>sort</span><span style=color:#f92672>(</span><span style=color:#00a8c8>int</span><span style=color:#f92672>[]</span> <span style=color:#111>arr</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#f92672>(</span><span style=color:#111>arr</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>IllegalArgumentException</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;array cannot be null&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=日志>日志</h2><p>为了取代<code>System.out.println()</code>，封装好了很多好用的方法</p><h3 id=jdk-logging>JDK Logging</h3><p>标准库自带</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.util.logging.Level</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>java.util.logging.Logger</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Hello</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Logger</span> <span style=color:#111>logger</span> <span style=color:#f92672>=</span> <span style=color:#111>Logger</span><span style=color:#f92672>.</span><span style=color:#75af00>getGlobal</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#111>logger</span><span style=color:#f92672>.</span><span style=color:#75af00>info</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;start process...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>logger</span><span style=color:#f92672>.</span><span style=color:#75af00>warning</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;memory is running out...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>logger</span><span style=color:#f92672>.</span><span style=color:#75af00>fine</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;ignored.&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#111>logger</span><span style=color:#f92672>.</span><span style=color:#75af00>severe</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;process will be terminated...&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>JDK的Logging定义了7个日志级别，从严重到普通</li></ul><p>SEVERE, WARNING, INFO(default), CONFIG, FINE, FINER, FINEST</p><ul><li>局限：配置不太方便，需要在JVM启动时传递参数<code>-Djava.util.logging.config.file=&lt;config-file-name></code>，一旦开始运行<code>main()</code>方法，就无法修改配置</li></ul><h3 id=commons-logging>Commons Logging</h3><p>第三方，由Apache创建，可以挂接不同的日志系统，并通过配置文件指定挂接的日志系统</p><p>可作为日志接口，而非日志实现</p><ul><li>默认搜索Log4j，没有的话用JDK Logging</li><li>使用很简单</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>org.apache.commons.logging.Log</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>org.apache.commons.logging.LogFactory</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>main</span><span style=color:#f92672>(</span><span style=color:#111>String</span><span style=color:#f92672>[]</span> <span style=color:#111>args</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Log</span> <span style=color:#111>log</span> <span style=color:#f92672>=</span> <span style=color:#111>LogFactory</span><span style=color:#f92672>.</span><span style=color:#75af00>getLog</span><span style=color:#f92672>(</span><span style=color:#111>Main</span><span style=color:#f92672>.</span><span style=color:#75af00>class</span><span style=color:#f92672>);</span>	<span style=color:#75715e>// 获取实例
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>log</span><span style=color:#f92672>.</span><span style=color:#75af00>info</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;start...&#34;</span><span style=color:#f92672>);</span>	<span style=color:#75715e>// 打印日志
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>log</span><span style=color:#f92672>.</span><span style=color:#75af00>warn</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;end.&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>6个日志级别</li></ul><p>FATAL, ERROR, WARNING, INFO(default), DEBUG, TRACE</p><ul><li>除<code>info(String)</code>外还有<code>info(String, Throwable)</code>这样一个重载方法，便于更简单地记录异常</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#00a8c8>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> <span style=color:#00a8c8>catch</span> <span style=color:#f92672>(</span><span style=color:#111>Exception</span> <span style=color:#111>e</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>log</span><span style=color:#f92672>.</span><span style=color:#75af00>error</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;got exception!&#34;</span><span style=color:#f92672>,</span> <span style=color:#111>e</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>如果在静态方法中引用<code>Log</code>，通常直接定义一个静态类型变量：</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 在静态方法中引用Log:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Main</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>final</span> <span style=color:#111>Log</span> <span style=color:#111>log</span> <span style=color:#f92672>=</span> <span style=color:#111>LogFactory</span><span style=color:#f92672>.</span><span style=color:#75af00>getLog</span><span style=color:#f92672>(</span><span style=color:#111>Main</span><span style=color:#f92672>.</span><span style=color:#75af00>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>foo</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>log</span><span style=color:#f92672>.</span><span style=color:#75af00>info</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;foo&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>在实例方法中引用<code>Log</code>，通常定义一个实例变量</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 在实例方法中引用Log:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>protected</span> <span style=color:#00a8c8>final</span> <span style=color:#111>Log</span> <span style=color:#111>log</span> <span style=color:#f92672>=</span> <span style=color:#111>LogFactory</span><span style=color:#f92672>.</span><span style=color:#75af00>getLog</span><span style=color:#f92672>(</span><span style=color:#111>getClass</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>void</span> <span style=color:#75af00>foo</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>log</span><span style=color:#f92672>.</span><span style=color:#75af00>info</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;foo&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>上面展示了两种<code>getLog()</code>的方式，第二种的好处是子类可以直接使用该实例，原因是Java的动态特性，子类获取的<code>Log</code>字段实际上相当于<code>LogFactory.getLog(Student.class)</code>，但却是从父类继承而来，并且无需改动代码</li></ul><h3 id=log4j>Log4j</h3><p>日志实现（乐）Log4j，我真的好喜欢你啊！为了你，我不要用无序列表了！！！</p><p>Log4j是一个组件化设计的日志系统，它的架构大致如下</p><p><img src=https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220227012115179.png alt=image-20220227012115179></p><p>当我们使用Log4j输出一条日志时，Log4j自动通过不同的Appender把同一条日志输出到不同的目的地</p><ul><li>console：输出到屏幕；</li><li>file：输出到文件；</li><li>socket：通过网络输出到远程计算机；</li><li>jdbc：输出到数据库</li></ul><p>通过Filter来过滤哪些log需要被输出，最后，通过Layout来格式化日志信息</p><p>使用Log4j时只需把一个<code>log4j2.xml</code>的文件放到<code>classpath</code>下就可以让Log4j读取配置文件并按照我们的配置来输出日志</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Configuration&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;Properties&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 定义日志格式 --&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;Property</span> <span style=color:#75af00>name=</span><span style=color:#d88200>&#34;log.pattern&#34;</span><span style=color:#f92672>&gt;</span>%d{MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36}%n%msg%n%n<span style=color:#f92672>&lt;/Property&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 定义文件名变量 --&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;Property</span> <span style=color:#75af00>name=</span><span style=color:#d88200>&#34;file.err.filename&#34;</span><span style=color:#f92672>&gt;</span>log/err.log<span style=color:#f92672>&lt;/Property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;Property</span> <span style=color:#75af00>name=</span><span style=color:#d88200>&#34;file.err.pattern&#34;</span><span style=color:#f92672>&gt;</span>log/err.%i.log.gz<span style=color:#f92672>&lt;/Property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/Properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 定义Appender，即目的地 --&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;Appenders&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 定义输出到屏幕 --&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;Console</span> <span style=color:#75af00>name=</span><span style=color:#d88200>&#34;console&#34;</span> <span style=color:#75af00>target=</span><span style=color:#d88200>&#34;SYSTEM_OUT&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 日志格式引用上面定义的log.pattern --&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;PatternLayout</span> <span style=color:#75af00>pattern=</span><span style=color:#d88200>&#34;${log.pattern}&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/Console&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 定义输出到文件,文件名引用上面定义的file.err.filename --&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;RollingFile</span> <span style=color:#75af00>name=</span><span style=color:#d88200>&#34;err&#34;</span> <span style=color:#75af00>bufferedIO=</span><span style=color:#d88200>&#34;true&#34;</span> <span style=color:#75af00>fileName=</span><span style=color:#d88200>&#34;${file.err.filename}&#34;</span> <span style=color:#75af00>filePattern=</span><span style=color:#d88200>&#34;${file.err.pattern}&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;PatternLayout</span> <span style=color:#75af00>pattern=</span><span style=color:#d88200>&#34;${log.pattern}&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;Policies&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!-- 根据文件大小自动切割日志 --&gt;</span>
</span></span><span style=display:flex><span>				<span style=color:#f92672>&lt;SizeBasedTriggeringPolicy</span> <span style=color:#75af00>size=</span><span style=color:#d88200>&#34;1 MB&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;/Policies&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 保留最近10份 --&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;DefaultRolloverStrategy</span> <span style=color:#75af00>max=</span><span style=color:#d88200>&#34;10&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/RollingFile&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/Appenders&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;Loggers&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;Root</span> <span style=color:#75af00>level=</span><span style=color:#d88200>&#34;info&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 对info级别的日志，输出到console --&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;AppenderRef</span> <span style=color:#75af00>ref=</span><span style=color:#d88200>&#34;console&#34;</span> <span style=color:#75af00>level=</span><span style=color:#d88200>&#34;info&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 对error级别的日志，输出到err，即上面定义的RollingFile --&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;AppenderRef</span> <span style=color:#75af00>ref=</span><span style=color:#d88200>&#34;err&#34;</span> <span style=color:#75af00>level=</span><span style=color:#d88200>&#34;error&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/Root&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/Loggers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Configuration&gt;</span>
</span></span></code></pre></div><h3 id=slf4jlogback>SLF4J&Logback</h3><p>类似上面那一对，做了些许改进</p><table><thead><tr><th style=text-align:left>Commons Logging</th><th style=text-align:left>SLF4J</th></tr></thead><tbody><tr><td style=text-align:left>org.apache.commons.logging.Log</td><td style=text-align:left>org.slf4j.Logger</td></tr><tr><td style=text-align:left>org.apache.commons.logging.LogFactory</td><td style=text-align:left>org.slf4j.LoggerFactory</td></tr></tbody></table><p>仍使用xml</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;appender</span> <span style=color:#75af00>name=</span><span style=color:#d88200>&#34;CONSOLE&#34;</span> <span style=color:#75af00>class=</span><span style=color:#d88200>&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span style=color:#f92672>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;appender</span> <span style=color:#75af00>name=</span><span style=color:#d88200>&#34;FILE&#34;</span> <span style=color:#75af00>class=</span><span style=color:#d88200>&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span style=color:#f92672>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;charset&gt;</span>utf-8<span style=color:#f92672>&lt;/charset&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;file&gt;</span>log/output.log<span style=color:#f92672>&lt;/file&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;rollingPolicy</span> <span style=color:#75af00>class=</span><span style=color:#d88200>&#34;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;fileNamePattern&gt;</span>log/output.log.%i<span style=color:#f92672>&lt;/fileNamePattern&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/rollingPolicy&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;triggeringPolicy</span> <span style=color:#75af00>class=</span><span style=color:#d88200>&#34;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;MaxFileSize&gt;</span>1MB<span style=color:#f92672>&lt;/MaxFileSize&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/triggeringPolicy&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;root</span> <span style=color:#75af00>level=</span><span style=color:#d88200>&#34;INFO&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;appender-ref</span> <span style=color:#75af00>ref=</span><span style=color:#d88200>&#34;CONSOLE&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;appender-ref</span> <span style=color:#75af00>ref=</span><span style=color:#d88200>&#34;FILE&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/root&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><hr><p>学完基础语法的感觉是约等于同时复建了PHP+c+Python+NodeJS，虽说是速通，但是感觉触类旁通，很多东西都明白了（大概）</p><p>6小时速通基础，今天就可以学反射和其它的高级用法了！就可以跟链子了！！！</p><p>好耶！！！</p></div></section></article></main><div class="w-full h-0 flex-none order-3"></div><aside role=contentinfo class="w-full md:w-2/5 xl:w-1/2 md:pr-12 lg:pr-20 xl:pr-24 order-4 md:order-3 md:sticky md:bottom-0 self-end max-w-2xl"><div class="md:float-right md:text-right leading-loose tracking-tight md:mb-2"><div class="md:max-w-xs flex flex-col md:items-end"><ul class="font-serif flex-grow-0 flex justify-between flex-wrap md:flex-col"><li class="px-1 md:px-0"><a href=/posts/ title="Posts page">Posts</a></li><li class="px-1 md:px-0"><a href=/relax/ title="Relaxxx page">Relaxxx</a></li><li class="px-1 md:px-0"><a href=/categories/ title="Categories page">Categories</a></li><li class="px-1 md:px-0"><a href=/series/ title="Series page">Series</a></li><li class="px-1 md:px-0"><a href=/tags/ title="Tags page">Tags</a></li><li class="px-1 md:px-0"><a href=/about/ title="About page">About</a></li><li class="px-1 md:px-0"><a href=/friends/ title="Friends page">Friends</a></li><div id=fastSearch class=m-0><input id=searchInput type=text size=10 class="bg-gray-100 focus:outline-none border-b border-gray-100 focus:border-eucalyptus-300 md:text-right
placeholder-java-500 min-w-0 max-w-xxxs" placeholder=search><ul id=searchResults class="bg-gray-200 px-2 divide-y divide-gray-400"></ul></div></ul><div class="flex flex-wrap-reverse md:justify-end content-end md:content-start justify-start items-start md:flex-col max-h-16"><a href=V2VkIDI3IEFwcmlsIDIwMjIgMTE6MzM6MTUgVVRD target=_blank class="bilibili icon pl-1 text-eucalyptus-400 hover:text-java-400" title="bilibili link" rel=noopener aria-label="follow on bilibili——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M7.172 2.757 10.414 6h3.171l3.243-3.242a1 1 0 011.415 1.415L16.414 6H18.5A3.5 3.5.0 0122 9.5v8A3.5 3.5.0 0118.5 21h-13A3.5 3.5.0 012 17.5v-8A3.5 3.5.0 015.5 6h2.085L5.757 4.171a1 1 0 011.415-1.415zM18.5 8h-13A1.5 1.5.0 004.007 9.356L4 9.5v8a1.5 1.5.0 001.356 1.493L5.5 19h13a1.5 1.5.0 001.493-1.356L20 17.5v-8A1.5 1.5.0 0018.5 8zM8 11a1 1 0 011 1v2a1 1 0 01-2 0v-2a1 1 0 011-1zm8 0a1 1 0 011 1v2a1 1 0 01-2 0v-2a1 1 0 011-1z"/></g></svg></div></a><a href=https://github.com/AmiaaaZ target=_blank class="github icon pl-1 text-eucalyptus-400 hover:text-java-400" title="github link" rel=noopener aria-label="follow on github——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path fill-rule="nonzero" d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32.0 01-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 01.676-1.883c.752.27 1.261.735 1.947 1.588-.094-.117.34.427.433.539.19.227.33.365.44.438.204.137.587.196 1.15.14.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292-.218-.894-.185-1.975.302-3.192a1 1 0 01.63-.582c.081-.024.127-.035.208-.047.803-.123 1.937.17 3.415 1.096A11.731 11.731.0 0112 3.315c.912.0 1.818.104 2.684.308 1.477-.933 2.613-1.226 3.422-1.096.085.013.157.03.218.05a1 1 0 01.616.58c.487 1.216.52 2.297.302 3.19.691.936 1.058 2.045 1.058 3.293.0 3.757-1.674 5.665-4.642 6.392.125.415.19.879.19 1.38a300.492 300.492.0 01-.012 2.716 1 1 0 01-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446.005-.705c.005-.708.007-1.338.007-1.998.0-.697-.183-1.152-.425-1.36-.661-.57-.326-1.655.54-1.752 2.967-.333 4.337-1.482 4.337-4.66.0-.955-.312-1.744-.913-2.404a1 1 0 01-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 01-.833.135A9.626 9.626.0 0012 5.315c-.89.0-1.772.119-2.592.35a1 1 0 01-.83-.134c-.752-.507-1.374-.807-1.868-.947-.144.653-.073 1.194.092 1.607a1 1 0 01-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66.865.097 1.201 1.177.544 1.748-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 01-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z"/></g></svg></div></a><a href=vickyckyky@foxmail.com target=_blank class="mail icon pl-1 text-eucalyptus-400 hover:text-java-400" title="mail link" rel=noopener aria-label="follow on mail——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M3 3h18a1 1 0 011 1v16a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zm17 4.238-7.928 7.1L4 7.216V19h16V7.238zM4.511 5l7.55 6.662L19.502 5H4.511z"/></g></svg></div></a><a href='TW9uJTIwMTglMjBGZWJydWFyeSUyMDE5ODAlMjAyMTowMjo1NSUyMFVUQw==' target=_blank class="netease-cloud-music icon pl-1 text-eucalyptus-400 hover:text-java-400" title="netease-cloud-music link" rel=noopener aria-label="follow on netease-cloud-music——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M10.421 11.375c-.294 1.028.012 2.064.784 2.653 1.061.81 2.565.3 2.874-.995.08-.337.103-.722.027-1.056-.23-1.001-.52-1.988-.792-2.996-1.33.154-2.543 1.172-2.893 2.394zm5.548-.287c.273 1.012.285 2.017-.127 3-1.128 2.69-4.721 3.14-6.573.826-1.302-1.627-1.28-3.961.06-5.734.78-1.032 1.804-1.707 3.048-2.054l.379-.104c-.084-.415-.188-.816-.243-1.224-.176-1.317.512-2.503 1.744-3.04 1.226-.535 2.708-.216 3.53.76.406.479.395 1.08-.025 1.464-.412.377-.996.346-1.435-.09-.247-.246-.51-.44-.877-.436-.525.006-.987.418-.945.937.037.468.173.93.3 1.386.022.078.216.135.338.153 1.334.197 2.504.731 3.472 1.676 2.558 2.493 2.861 6.531.672 9.44-1.529 2.032-3.61 3.168-6.127 3.409-4.621.44-8.664-2.53-9.7-7.058C2.515 10.255 4.84 5.831 8.795 4.25c.586-.234 1.143-.031 1.371.498.232.537-.019 1.086-.61 1.35-2.368 1.06-3.817 2.855-4.215 5.424-.533 3.433 1.656 6.776 5 7.72 2.723.77 5.658-.166 7.308-2.33 1.586-2.08 1.4-5.099-.427-6.873a3.979 3.979.0 00-1.823-1.013c.198.716.389 1.388.57 2.062z"/></g></svg></div></a><a href=2517834528 target=_blank class="qq icon pl-1 text-eucalyptus-400 hover:text-java-400" title="qq link" rel=noopener aria-label="follow on qq——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path fill-rule="nonzero" d="M17.535 12.514l-.696-1.796c0-.021.01-.375.01-.558C16.848 7.088 15.446 4 12 4s-4.848 3.088-4.848 6.16c0 .183.009.537.01.558l-.696 1.796c-.19.515-.38 1.05-.517 1.51-.657 2.189-.444 3.095-.282 3.115.348.043 1.354-1.648 1.354-1.648.0.98.488 2.258 1.542 3.18-.394.127-.878.32-1.188.557-.28.214-.245.431-.194.52.22.385 3.79.245 4.82.125 1.03.12 4.599.26 4.82-.126.05-.088.085-.305-.194-.519-.311-.237-.795-.43-1.19-.556 1.055-.923 1.542-2.202 1.542-3.181.0.0 1.007 1.691 1.355 1.648.162-.02.378-.928-.283-3.116-.14-.463-.325-.994-.516-1.509zm1.021 8.227c-.373.652-.833.892-1.438 1.057-.24.065-.498.108-.794.138-.44.045-.986.065-1.613.064a33.23 33.23.0 01-2.71-.116c-.692.065-1.785.114-2.71.116a16.07 16.07.0 01-1.614-.064 4.928 4.928.0 01-.793-.138c-.605-.164-1.065-.405-1.44-1.059a2.274 2.274.0 01-.239-1.652c-.592-.132-1.001-.483-1.279-.911a2.43 2.43.0 01-.309-.71 4.028 4.028.0 01-.116-1.106c.013-.785.187-1.762.532-2.912.14-.466.327-1.008.568-1.655l.553-1.43a15.496 15.496.0 01-.002-.203C5.152 5.605 7.588 2 12 2c4.413.0 6.848 3.605 6.848 8.16l-.001.203.553 1.43.01.026c.225.606.413 1.153.556 1.626.348 1.15.522 2.129.535 2.916.007.407-.03.776-.118 1.108-.066.246-.161.48-.31.708-.276.427-.684.776-1.277.91.13.554.055 1.14-.24 1.654z"/></g></svg></div></a><a href='Vmlja3lja3lreQ==' target=_blank class="wechat icon pl-1 text-eucalyptus-400 hover:text-java-400" title="wechat link" rel=noopener aria-label="follow on wechat——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill-rule="evenodd"><path fill="none" d="M0 0h24v24H0z"/><path fill-rule="nonzero" d="M10 14.676v-.062c0-2.508 2.016-4.618 4.753-5.233C14.389 7.079 11.959 5.2 8.9 5.2 5.58 5.2 3 7.413 3 9.98c0 .969.36 1.9 1.04 2.698.032.038.083.094.152.165a3.568 3.568.0 011.002 2.238 3.612 3.612.0 012.363-.442c.166.026.302.046.405.06A7.254 7.254.0 0010 14.675zm.457 1.951a9.209 9.209.0 01-2.753.055 19.056 19.056.0 01-.454-.067 1.612 1.612.0 00-1.08.212l-1.904 1.148a.806.806.0 01-.49.117.791.791.0 01-.729-.851l.15-1.781a1.565 1.565.0 00-.439-1.223 5.537 5.537.0 01-.241-.262C1.563 12.855 1 11.473 1 9.979 1 6.235 4.537 3.2 8.9 3.2c4.06.0 7.403 2.627 7.85 6.008 3.372.153 6.05 2.515 6.05 5.406.0 1.193-.456 2.296-1.229 3.19-.051.06-.116.13-.195.21a1.24 1.24.0 00-.356.976l.121 1.423a.635.635.0 01-.59.68.66.66.0 01-.397-.094l-1.543-.917a1.322 1.322.0 00-.874-.169c-.147.023-.27.04-.368.053-.316.04-.64.062-.969.062-2.694.0-4.998-1.408-5.943-3.401zm6.977 1.31a3.325 3.325.0 011.676.174 3.25 3.25.0 01.841-1.502c.05-.05.087-.09.106-.112.489-.565.743-1.213.743-1.883.0-1.804-1.903-3.414-4.4-3.414-2.497.0-4.4 1.61-4.4 3.414s1.903 3.414 4.4 3.414c.241.0.48-.016.714-.046.08-.01.188-.025.32-.046z"/></g></svg></div></a><a href=https://weibo.com/u/7562434112 target=_blank class="weibo icon pl-1 text-eucalyptus-400 hover:text-java-400" title="weibo link" rel=noopener aria-label="follow on weibo——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path fill-rule="nonzero" d="M20.194 14.197c0 3.362-4.53 6.424-9.926 6.424C5.318 20.62 1 18.189 1 14.534c0-1.947 1.18-4.087 3.24-6.088 2.832-2.746 6.229-4.033 7.858-2.448.498.482.723 1.122.719 1.858 1.975-.576 3.65-.404 4.483.752.449.623.532 1.38.326 2.207 1.511.61 2.568 1.77 2.568 3.382zm-4.44-2.07c-.386-.41-.4-.92-.198-1.41.208-.508.213-.812.12-.94-.264-.368-1.533-.363-3.194.311a2.043 2.043.0 01-.509.14c-.344.046-.671.001-.983-.265-.419-.359-.474-.855-.322-1.316.215-.67.18-1.076.037-1.215-.186-.18-.777-.191-1.659.143-1.069.405-2.298 1.224-3.414 2.306C3.925 11.54 3 13.218 3 14.534c0 2.242 3.276 4.087 7.268 4.087 4.42.0 7.926-2.37 7.926-4.424.0-.738-.637-1.339-1.673-1.652-.394-.113-.536-.171-.767-.417zm7.054-1.617a1 1 0 01-1.936-.502 4 4 0 00-4.693-4.924 1 1 0 11-.407-1.958 6 6 0 017.036 7.384z"/></g></svg></div></a><a href=https://www.zhihu.com/people/lan-shan-86-69 target=_blank class="zhihu icon pl-1 text-eucalyptus-400 hover:text-java-400" title="zhihu link" rel=noopener aria-label="follow on zhihu——Opens in a new window"><div class="fill-current h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M12.344 17.963l-1.688 1.074-2.131-3.35c-.44 1.402-1.172 2.665-2.139 3.825-.402.483-.82.918-1.301 1.375-.155.147-.775.717-.878.82l-1.414-1.414c.139-.139.787-.735.915-.856.43-.408.795-.79 1.142-1.206 1.266-1.518 2.03-3.21 2.137-5.231H3v-2h4V7h-.868c-.689 1.266-1.558 2.222-2.618 2.857L2.486 8.143c1.395-.838 2.425-2.604 3.038-5.36l1.952.434c-.14.633-.303 1.227-.489 1.783H11.5v2H9v4h2.5v2H9.185l3.159 4.963zm3.838-.07L17.298 17H19V7h-4v10h.736l.446.893zM13 5h8v14h-3l-2.5 2-1-2H13V5z"/></g></svg></div></a></div><div class="text-sm text-gray-500 leading-tight a-gray"><br>Built with Hugo and theme <a href=https://github.com/heyeshuang/hugo-theme-tokiwa>Tokiwa</a>. 12995 words in this page.</div></div></div></aside><footer class="w-full md:w-3/5 xl:w-1/2 order-3 max-w-3xl md:order-4 pt-2"><hr class=double-line><div class="flex flex-wrap justify-between pb-2 leading-loose font-serif"><a class=flex-grow-0 href=/2022/02/17/defcampctf2022-wp/><svg class="fill-current inline-block h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z"/></svg>defcampCTF2022 Wp</a>
<a class=flex-grow-0 href=/2022/02/28/java-study-notes-02/>Java学习笔记Ⅱ<svg class="fill-current inline-block h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/></svg></a></div><div></div><hr><div class=pb-2><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//amiaaaz.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><hr></footer><script src=/dist/app.js></script>
<script src=/lib/fuse.min.js></script>
<script src=/lib/fastsearch.js></script></div></body></html>