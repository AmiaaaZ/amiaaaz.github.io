<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>æ–‡ä»¶åŒ…å« on AmiaaaZ's Site</title><link>https://amiaaaz.github.io/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/</link><description>Recent content in æ–‡ä»¶åŒ…å« on AmiaaaZ's Site</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 13 Dec 2021 01:12:22 +0800</lastBuildDate><atom:link href="https://amiaaaz.github.io/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/index.xml" rel="self" type="application/rss+xml"/><item><title>å…³äºinclude/require(_once)çš„æ˜“æ··æ·†ç‚¹</title><link>https://amiaaaz.github.io/2021/12/13/smth-about-include-require-in-php/</link><pubDate>Mon, 13 Dec 2021 01:12:22 +0800</pubDate><guid>https://amiaaaz.github.io/2021/12/13/smth-about-include-require-in-php/</guid><description>&lt;p>ä¹‹å‰åšé¢˜é‡åˆ°åæŸ¥äº†ä¸€ä¸‹ç›¸å…³æ–‡ç« ï¼Œè§‰å¾—å¾ˆé€‚åˆå‡ºé¢˜ï¼Œä½†æ˜¯æ„Ÿè§‰ä¸èƒ½ä¸ºäº†è€ƒè€Œè€ƒï¼Œä¹Ÿå°±å¤±å»äº†CTFçš„æ„ä¹‰ï¼Œæ‰€ä»¥è¿˜ä¸å¦‚å…ˆå‘å‡ºæ¥è¿™ä¸€ç¯‡&lt;/p>
&lt;p>&lt;del>ï¼ˆåˆ«éª‚äº† å°±æ˜¯æ‡’&lt;/del>&lt;/p>
&lt;h2 id="å…³äºincluderequire_once">å…³äº&lt;code>include/require(_once)()&lt;/code>&lt;/h2>
&lt;p>è¿™å‡ ä¸ªå‡½æ•°åº”è¯¥éƒ½ä¸é™Œç”Ÿï¼ˆè¿˜åº”è¯¥å†åŠ ä¸Šinclude_pathï¼‰ï¼Œå¹²çš„æ˜¯æ–‡ä»¶åŒ…å«çš„äº‹ï¼›å…ˆæŒ‰ç…§ç»™å®šå‚æ•°å¯»æ‰¾è·¯å¾„ï¼ˆå½“å®šä¹‰äº†è·¯å¾„åˆ™ä¼šå®Œå…¨å¿½ç•¥include_pathï¼‰ï¼Œå¦‚æœåªæœ‰æ–‡ä»¶ååˆ™æŒ‰ç…§include_pathçš„æŒ‡å®šç›®å½•å¯»æ‰¾ï¼Œå¦‚æœè¿˜æ²¡æ‰¾åˆ°åˆ™ä¼šåœ¨è°ƒç”¨è„šæœ¬æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å’Œå½“å‰å·¥ä½œç›®å½•ä¸‹å¯»æ‰¾ï¼›ä¸‹é¢è¯´å‡ ä¸ªå°ç‚¹&lt;/p>
&lt;p>é¦–å…ˆæ˜¯requireå’Œincludeçš„åŒºåˆ«åœ¨äºrequireåœ¨å‡ºé”™æ—¶ä¼šäº§ç”ŸE_COMPILE_ERRORçº§åˆ«çš„é”™è¯¯ï¼Œè„šæœ¬å°†ä¸­æ­¢è¿è¡Œï¼Œè€Œincludeåªä¼šäº§ç”Ÿè­¦å‘ŠE_WARNINGï¼Œä¸å½±å“ç»§ç»­é¡¶ç€é”™è¯¯ç»§ç»­æ‰§è¡Œè„šæœ¬ï¼ˆåšé¢˜å¾ˆå¸¸è§è¿™ä¸ª æ— æ•°çš„æŠ¥é”™ä¸‹é¢æœ‰æ­£å¸¸çš„å›æ˜¾ï¼‰&lt;/p>
&lt;p>å¦ä¸€ä¸ªåŒºåˆ«åœ¨äºrequireæ˜¯æ— æ¡ä»¶åŒ…å«å‡½æ•°ï¼Œå³ç¨‹åºæ‰§è¡Œå‰å°±ä¼šå°†æ–‡ä»¶å†…å®¹ä»¥æ–‡æœ¬æ›¿æ¢çš„å½¢å¼å¼•å…¥ï¼ˆæ‰€ä»¥è¿™ä»½æ–‡ä»¶åªè¢«å¤„ç†ä¸€æ¬¡ï¼‰ï¼Œè®©å®ƒå˜ä¸ºphpè„šæœ¬çš„ä¸€éƒ¨åˆ†ï¼ˆæ‰€ä»¥é€šå¸¸æ”¾åœ¨phpæ–‡ä»¶çš„æœ€å‰é¢ï¼‰ï¼›includeåˆ™æ˜¯æœ‰æ¡ä»¶åŒ…å«å‡½æ•°ï¼Œç”¨åˆ°æ—¶æ‰è¢«åŠ è½½ï¼Œä¸”æ¯æ¬¡æ‰§è¡Œæ–‡ä»¶æ—¶éƒ½è¦è¿›è¡Œè¯»å–å’Œè¯„ä¼°&lt;/p>
&lt;p>å½“phpé‡åˆ°require/include(_once)å‡½æ•°æ—¶ï¼Œå¦‚æœç»™å®šçš„å‚æ•°æ˜¯ä¸ªç»å¯¹è·¯å¾„åˆ™ç›´æ¥å¼•å…¥ï¼Œä½†å¦‚æœç»™çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™è¦è¿›å…¥å¦å¤–çš„é€»è¾‘ï¼ˆç»è¿‡å¤šæ¬¡è°ƒç”¨ï¼Œå®å±•å¼€åè¿›å…¥_php_stream_fopen_with_pathï¼‰å¯»æ‰¾æ­¤æ–‡ä»¶ï¼›åœ¨_php_stream_fopen_with_pathä¼šæ ¹æ®include_pathå’Œå½“å‰æ‰§è¡Œæ–‡ä»¶çš„pathç»„æˆä¸€ä¸ªå¾…é€‰çš„ç›®å½•åˆ—è¡¨ï¼Œç„¶åä»åˆ—è¡¨å¤´éƒ¨å¼€å§‹æ ¹æ®DEFAULT_DIR_SEPARATORï¼ˆlinuxä¸‹é»˜è®¤ä¸º&lt;code>:&lt;/code> winä¸º&lt;code>;&lt;/code>ï¼‰å–å‡ºè·¯å¾„ï¼Œç„¶åæ‹¼ä¸Šæ–‡ä»¶åï¼Œå¦‚æœæˆåŠŸåˆ™è¿”å›ï¼Œå¤±è´¥åˆ™ç»§ç»­ä¸‹ä¸€ä¸ªå¾…é€‰æ‹©è·¯å¾„ï¼ˆ&lt;u>æ‰€ä»¥å¦‚æœæœ‰é‡åçš„å°±å¥½ç©äº†&lt;/u>ï¼‰&lt;/p>
&lt;h2 id="å‡ ä¸ªå¥½ç©çš„å°æ —å­">å‡ ä¸ªå¥½ç©çš„å°æ —å­&lt;/h2>
&lt;p>è¿™é‡Œä¸¾ä¸€ä¸ªå°æ —å­ï¼Œæ–‡ä»¶ç»“æ„å’Œå†…å®¹å¦‚ä¸‹ï¼ˆæ³¨æ„è¿™é‡Œinclude_pathçš„å†™æ³•!!!ä¸ä»…æœ‰path_to_subdirè¿˜æœ‰&lt;code>:&lt;/code>åˆ†éš”ç¬¦å‰é¢ä»£è¡¨çš„current_dir!!!ï¼‰&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20211024095717109.png" alt="image-20211024095717109">&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20211024095830345.png" alt="image-20211024095830345">&lt;/p>
&lt;p>åœ¨ä¸åŒçš„æƒ…å†µä¸‹è¿è¡Œçœ‹çœ‹æ•ˆæœ&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20211024100007587.png" alt="image-20211024100007587">&lt;/p>
&lt;p>åœ¨rootç›®å½•ä¸‹æ‰§è¡Œæ—¶ï¼Œç›´æ¥æ ¹æ®1.phpçš„include_pathå¯»æ‰¾2.phpï¼Œè€Œ2.phpä¸­å¹¶æ²¡æœ‰è®¾ç½®include_pathï¼Œé‚£ä¹ˆè·¯å¾„å°±å˜æˆäº†åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¾…é€‰æ‹©è·¯å¾„ å³&lt;code>&amp;quot;.&amp;quot;&lt;/code>ï¼Œè€Œå½“å‰å·¥ä½œç›®å½•æ˜¯rootï¼Œæ‰€ä»¥å°±æ˜¯/root/3.phpçš„è¾“å‡º&lt;/p>
&lt;p>æ¢åˆ°subdirç›®å½•ä¸‹æ‰§è¡Œ1.phpæ—¶ï¼Œåˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¾…é€‰æ‹©è·¯å¾„&lt;code>&amp;quot;.&amp;quot;&lt;/code>å˜ä¸ºäº†subdirï¼Œè‡ªç„¶è¾“å‡ºå˜ä¸ºäº†/root/subdir/3.phpçš„è¾“å‡º&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬æŠŠinclude_pathä»…ä¿ç•™path_to_subdirï¼Œç»§ç»­ä¸Šé¢çš„æŒ‡ä»¤è¿è¡Œä¸€ä¸‹&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20211024190934131.png" alt="image-20211024190934131">&lt;/p>
&lt;p>é‚£ä¸ç®¡å½“å‰è·¯å¾„æ˜¯ä»€ä¹ˆéƒ½ä¼šå¾—åˆ°subdirçš„è¾“å‡º&lt;/p>
&lt;p>å†è¿›ä¸€æ­¥ï¼Œåœ¨2.phpä¸­åŠé“æ¸…ç©ºinclude_pathä¼šæ€ä¹ˆæ ·å‘¢&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20211024191919122.png" alt="image-20211024191919122">&lt;/p>
&lt;p>æˆ‘ä»¬å‘ç°è·Ÿä¸Šé¢ç»“æœä¸€æ ·ï¼Œä½†æ˜¯è¿™é‡Œçš„é€»è¾‘å´æœ‰å·®å¼‚ï¼š2.phpä¸­æ¸…ç©ºinclude_pathåå†åŒ…å«æ–‡ä»¶å°†ä¼šè‡ªåŠ¨å˜ä¸ºcurrent_pathçš„è·¯å¾„ï¼Œè€Œ2.phpåœ¨/root/subdirä¸‹ï¼Œæ‰€ä»¥å›æ˜¾å’Œ2.phpçš„è·¯å¾„ä¿æŒä¸€è‡´&lt;/p>
&lt;p>å†å†è¿›ä¸€æ­¥&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20211024192931075.png" alt="image-20211024192931075">&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/AmiaaaZ/ImageOverCloud/master/wpImg/image-20211024193020147.png" alt="image-20211024193020147">&lt;/p>
&lt;p>è¯¶ï¼Œå¯ä»¥çœ‹åˆ°ç”±äºè¿™é‡Œä¸¤æ¬¡éƒ½ç”¨åˆ°äº†ç›¸å¯¹ç›®å½•çš„&lt;code>&amp;quot;./&amp;quot;&lt;/code>è¿›è¡Œå¼•ç”¨ï¼Œæ‰€ä»¥åœ¨/rootç›®å½•ä¸‹è¿è¡Œå¾ˆé¡ºç•…ï¼Œè€Œ/root/subdirç›®å½•ä¸‹ç”±äºä¸ä¼šå†å­˜åœ¨./subdir/2.phpï¼Œæ‰€ä»¥æŠ¥é”™é€€å‡º&lt;/p>
&lt;h2 id="ä½¿ç”¨æ³¨æ„">ä½¿ç”¨æ³¨æ„&lt;/h2>
&lt;ul>
&lt;li>åœ¨ä½¿ç”¨include_pathå’Œç›¸å¯¹è·¯å¾„æ—¶ä¼šå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥æœ€å¥½ç”¨ç»å¯¹è·¯å¾„&lt;/li>
&lt;li>ç›®å½•ç›¸å¯¹è·¯å¾„çš„basediræ°¸è¿œæ˜¯å½“å‰å·¥ä½œè·¯å¾„&lt;/li>
&lt;li>å¯ä»¥é€šè¿‡&lt;code>__DIR__&lt;/code>æ¥è·å¾—ç»å¯¹è·¯å¾„&lt;/li>
&lt;li>å»ºè®®å°‘ä½¿ç”¨&lt;code>include/require_once&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>*å†™çš„ä¸å…¨é¢ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†éœ€è¦è¡¥å…… å…ˆé¸½äº†ï¼Œé‡åˆ°é¢˜æˆ–è€…å…·ä½“çš„åº”ç”¨åœºæ™¯æˆ‘è¡¥å……ä¸Šæ¥&lt;/p>
&lt;hr>
&lt;details>
&lt;summary>
&lt;h4 class="inline">
ä»¥ä¸‹æ˜¯æœ¬æ–‡ä¸­æ¶‰åŠåˆ°çš„ å’Œæˆ‘å­¦ä¹ æ—¶çœ‹è¿‡çš„æ‰€æœ‰æ–‡ç« çš„é“¾æ¥ğŸ”— æ¯æ—¥æ„Ÿè°¢äº’è”ç½‘çš„ä¸°å¯Œèµ„æºï¼ˆ
&lt;/h4>
&lt;/summary>
&lt;p>&lt;a href="https://www.laruence.com/2010/05/04/1450.html">æ·±å…¥ç†è§£PHPä¹‹require/includeé¡ºåº&lt;/a>&lt;/p>
&lt;/details></description></item></channel></rss>